define("lib/scrollpoint", [ "jquery" ], function(t) {
    "use strict";
    function e(t) {
        return c.test(t) || t > 0 && 1 > t;
    }
    function i(e) {
        if (t.isNumeric(e)) return parseFloat(e);
        var i = c.exec(e);
        return i ? i[1] / 100 : parseInt(e, 10);
    }
    function n(t) {
        return t.is(u) ? d.height() - (window.innerHeight || u.height()) : t.prop("scrollHeight");
    }
    function o(t, i, o) {
        return i > (e(t) ? t * n(o) : parseInt(t, 10));
    }
    function r(e) {
        var i = "window" === e ? u : t(e);
        return function() {
            var t, n, r, s = i.scrollTop();
            for (t in p[e]) n = p[e][t], r = o(t, s, i), n.cache = n.cache || !1, n.cache !== r && (n.fire(r), 
            n.cache = r);
        };
    }
    function s(e, n, o) {
        e = i(e);
        var r = p[o][e];
        r || (r = p[o][e] = new t.Callbacks()), r.add(n);
    }
    function a(t, e, i) {
        i = i || "window";
        var n;
        if (e) {
            if (t) return void p[i][t].remove(e);
            for (n in p[i]) p[i][n].remove(e);
        } else "string" == typeof t && (p[i][t].empty(), delete p[i][t]), i && delete p[i];
    }
    function l(e, i, n) {
        n = n || "window";
        var o, a = "window" === n ? u : t(n);
        p.hasOwnProperty(n) || (p[n] = {}, a.on("scroll", r(n)));
        {
            if ("object" != typeof e) return s(e, i, n);
            for (o in e) s(o, e[o], n);
        }
    }
    var c = /(\d+)%/, u = t(window), d = t(document), p = {};
    return l.on = l, l.off = a, l;
}), define("be/View/Basement", [ "jquery", "nbd/View/Element" ], function(t, e) {
    "use strict";
    var i = e.extend({
        init: function(t) {
            this._super(t), t && (this.$view = t), this.limit = this.limit.bind(this);
        },
        destroy: function() {
            t(document.body).off(this.scroll), this.$view = null;
        },
        template: t,
        rendered: function() {
            var e = this;
            this.$view.on("click", ".js-nav-basement-submenu", function() {
                window.scrollTo(0, t(this).toggleClass("open").position().top), e.limit(!0);
            });
        },
        limit: function(e) {
            if (this.$view) {
                var i = Math.max(this.$view.find(".nav-items").outerHeight(), window.innerHeight), n = {
                    height: i
                }, o = {
                    height: ""
                }, r = t(document.body).add("#nav-basement");
                e ? r.css(n) : t(document.body).one("webkitTransitionEnd oTransitionEnd otransitionend transitionend msTransitionEnd", function() {
                    r.css(o);
                });
            }
        },
        open: function() {
            t(document.body).addClass("basement-open"), this.limit(!0), t(window).on("orientationchange", this.limit);
        },
        close: function() {
            t(document.body).removeClass("basement-open"), this.limit(!1), t(window).off("orientationchange", this.limit);
        },
        toggle: function() {
            t(document.body).toggleClass("basement-open");
            var e = t(document.body).hasClass("basement-open");
            this.limit(e), t(window)[e ? "on" : "off"]("orientationchange", this.limit);
        }
    });
    return i;
}), define("require/hgn!templates/dialog", [ "hogan" ], function(t) {
    var e = new t.Template({
        code: function(t, e, i) {
            var n = this;
            return n.b(i = i || ""), n.b('<div class="popup '), n.b(n.v(n.f("dialogType", t, e, 0))), 
            n.s(n.f("classes", t, e, 1), t, e, 0, 44, 50, "{{ }}") && (n.rs(t, e, function(t, e, i) {
                i.b(" "), i.b(i.v(i.d(".", t, e, 0)));
            }), t.pop()), n.s(n.f("buttons", t, e, 1), t, e, 1, 0, 0, "") || n.b(" no-buttons"), 
            n.s(n.f("title", t, e, 1), t, e, 1, 0, 0, "") || n.b(" no-title"), n.s(n.f("fullBleed", t, e, 1), t, e, 0, 140, 151, "{{ }}") && (n.rs(t, e, function(t, e, i) {
                i.b(" full-bleed");
            }), t.pop()), n.b('">'), n.b("\n" + i), n.b('  <div class="popup-inner-wrap">'), 
            n.b("\n"), n.b("\n" + i), n.s(n.f("toolbar", t, e, 1), t, e, 0, 218, 647, "{{ }}") && (n.rs(t, e, function(t, e, n) {
                n.b('    <div class="'), n.s(n.f("layover", t, e, 1), t, e, 0, 247, 254, "{{ }}") && (n.rs(t, e, function(t, e, i) {
                    i.b("toolbar");
                }), t.pop()), n.s(n.f("layover", t, e, 1), t, e, 1, 0, 0, "") || n.b("popup-header"), 
                n.b('">'), n.b("\n" + i), n.b('      <div class="header">'), n.b(n.t(n.f("title", t, e, 0))), 
                n.b("</div>"), n.b("\n" + i), n.s(n.f("hideClose", t, e, 1), t, e, 1, 0, 0, "") || (n.b('        <a class="header-action close right js-close'), 
                n.s(n.f("layover", t, e, 1), t, e, 1, 0, 0, "") || n.b(" popup-close"), n.b('">'), 
                n.b("\n" + i), n.b('          <span class="nav-icon-close nav-icon"></span>'), n.b("\n" + i), 
                n.b("        </a>"), n.b("\n" + i)), n.s(n.f("layover", t, e, 1), t, e, 0, 569, 619, "{{ }}") && (n.rs(t, e, function(t, e, i) {
                    i.s(i.f("button", t, e, 1), t, e, 0, 589, 601, "{{ }}") && (i.rs(t, e, function(t, e, i) {
                        i.b(i.rp("<button0", t, e, ""));
                    }), t.pop());
                }), t.pop()), n.b("    </div>"), n.b("\n" + i);
            }), t.pop()), n.b("\n" + i), n.b('    <div class="popup-content'), n.s(n.f("toolbar", t, e, 1), t, e, 0, 702, 714, "{{ }}") && (n.rs(t, e, function(t, e, i) {
                i.b(" has-toolbar");
            }), t.pop()), n.b('">'), n.b("\n" + i), n.b(n.rp("<content1", t, e, "      ")), 
            n.s(n.f("layover", t, e, 1), t, e, 1, 0, 0, "") || (n.b("    </div>"), n.b("\n" + i)), 
            n.b("\n" + i), n.b('      <div class="popup-buttons'), n.s(n.f("buttons", t, e, 1), t, e, 1, 0, 0, "") || n.b(" hide"), 
            n.b('">'), n.b("\n" + i), n.s(n.f("buttons", t, e, 1), t, e, 0, 878, 890, "{{ }}") && (n.rs(t, e, function(t, e, i) {
                i.b(i.rp("<button2", t, e, ""));
            }), t.pop()), n.b("      </div>"), n.b("\n"), n.b("\n" + i), n.s(n.f("layover", t, e, 1), t, e, 0, 933, 949, "{{ }}") && (n.rs(t, e, function(t, e, n) {
                n.b("    </div>"), n.b("\n" + i);
            }), t.pop()), n.b("\n" + i), n.b("  </div>"), n.b("\n" + i), n.b("</div>"), n.b("\n"), 
            n.b("\n" + i), n.s(n.f("blocking", t, e, 1), t, e, 0, 1015, 1049, "{{ }}") && (n.rs(t, e, function(t, e, n) {
                n.b('<div class="blocking-div"></div>'), n.b("\n" + i);
            }), t.pop()), n.fl();
        },
        partials: {
            "<button0": {
                name: "button",
                partials: {},
                subs: {}
            },
            "<content1": {
                name: "content",
                partials: {},
                subs: {}
            },
            "<button2": {
                name: "button",
                partials: {},
                subs: {}
            }
        },
        subs: {}
    }, "", t), i = function(t, e) {
        for (var i in e) t[i] = e[i];
        return t;
    }, n = {
        "": null
    }, o = function() {
        return e.render.apply(e, arguments);
    };
    return e.ri = function(t, e, o) {
        return this.r(t, i(n, e), o);
    }, o.template = e, o;
}), define("require/hgn!templates/button", [ "hogan" ], function(t) {
    var e = new t.Template({
        code: function(t, e, i) {
            var n = this;
            return n.b(i = i || ""), n.b('  <div class="form-item form-item-a'), n.s(n.f("containerClasses", t, e, 1), t, e, 0, 56, 62, "{{ }}") && (n.rs(t, e, function(t, e, i) {
                i.b(" "), i.b(i.v(i.d(".", t, e, 0)));
            }), t.pop()), n.b('">'), n.b("\n" + i), n.b('    <a class="form-button'), n.s(n.f("classes", t, e, 1), t, e, 0, 123, 129, "{{ }}") && (n.rs(t, e, function(t, e, i) {
                i.b(" "), i.b(i.v(i.d(".", t, e, 0)));
            }), t.pop()), n.s(n.f("classes", t, e, 1), t, e, 1, 0, 0, "") || n.b(" form-button-default"), 
            n.b('"'), n.b("\n" + i), n.b("      "), n.s(n.f("href", t, e, 1), t, e, 0, 202, 218, "{{ }}") && (n.rs(t, e, function(t, e, i) {
                i.b(' href="'), i.b(i.v(i.f("href", t, e, 0))), i.b('"');
            }), t.pop()), n.b(' unselectable="on"'), n.b("\n" + i), n.b("      tabindex="), 
            n.s(n.f("tabindex", t, e, 1), t, e, 0, 274, 288, "{{ }}") && (n.rs(t, e, function(t, e, i) {
                i.b('"'), i.b(i.v(i.f("tabindex", t, e, 0))), i.b('"');
            }), t.pop()), n.b("\n" + i), n.b("      "), n.s(n.f("tabindex", t, e, 1), t, e, 1, 0, 0, "") || n.b('"0"'), 
            n.b(">"), n.b(n.v(n.f("label", t, e, 0))), n.b("</a>"), n.b("\n" + i), n.b("  </div>"), 
            n.b("\n"), n.fl();
        },
        partials: {},
        subs: {}
    }, "", t), i = function(t, e) {
        for (var i in e) t[i] = e[i];
        return t;
    }, n = {
        "": null
    }, o = function() {
        return e.render.apply(e, arguments);
    };
    return e.ri = function(t, e, o) {
        return this.r(t, i(n, e), o);
    }, o.template = e, o;
}), define("be/View/Dialog", [ "jquery", "nbd/View/Entity", "nbd/util/extend", "hgn!templates/dialog", "hgn!templates/button" ], function(t, e, i, n, o) {
    "use strict";
    var r = e.extend({
        mustache: {},
        template: function(e) {
            return t(n(e, i({
                content: this.mustache.template,
                button: o.template
            }, this.partials)));
        },
        rendered: function() {
            this.$view.on("click", ".js-close, .close, .form-button-close, .form-button-cancel", this.hide.bind(this)).on("click", ".form-button-disabled", !1);
        },
        position: function() {},
        show: function() {
            return this.trigger("show", this.$view);
        },
        hide: function() {
            return this.trigger("hide", this.$view);
        },
        toggle: function() {
            var t = this.$view.is(":visible");
            return this[t ? "hide" : "show"]();
        }
    });
    return r;
}), define("be/View/Dialog/Layover", [ "jquery", "be/View/Dialog" ], function(t, e) {
    "use strict";
    var i = e.extend({
        destroy: function() {
            this.hide(), this._super();
        },
        template: function(e) {
            return this._super(t.extend({
                dialogType: "layover",
                layover: !0,
                toolbar: !0
            }, e));
        },
        rendered: function() {
            this._super(), this.show();
        },
        show: function() {
            return this.$view ? (this.scrollTop = this.scrollTop || t(window).scrollTop(), t("#site-content").hide(), 
            t("html").addClass("overflow-hidden"), this.$view.show(), this._super()) : void 0;
        },
        hide: function() {
            return this.$view ? (t("#site-content").show(), t("html").removeClass("overflow-hidden"), 
            window.scrollTo(0, this.scrollTop), delete this.scrollTop, this.$view.hide(), this._super()) : void 0;
        }
    });
    return i;
}), define("require/hgn!templates/discover/search", [ "hogan" ], function(t) {
    var e = new t.Template({
        code: function(t, e, i) {
            var n = this;
            return n.b(i = i || ""), n.b('<div id="search-popup">'), n.b("\n" + i), n.b('  <form class="search-option-confirm">'), 
            n.b("\n" + i), n.b('    <input type="search" class="form-text form-text-normal form-search form-searchi" placeholder="Search Behance" name="search" /><!--'), 
            n.b("\n" + i), n.b('    --><a class="form-button form-button-light-and-grey close">Cancel</a>'), 
            n.b("\n" + i), n.b("  </form>"), n.b("\n" + i), n.b("</div>"), n.fl();
        },
        partials: {},
        subs: {}
    }, "", t), i = function(t, e) {
        for (var i in e) t[i] = e[i];
        return t;
    }, n = {
        "": null
    }, o = function() {
        return e.render.apply(e, arguments);
    };
    return e.ri = function(t, e, o) {
        return this.r(t, i(n, e), o);
    }, o.template = e, o;
}), define("be/View/Dialog/Layover/Search", [ "jquery", "be/View/Dialog/Layover", "hgn!templates/discover/search" ], function(t, e, i) {
    "use strict";
    var n = e.extend({
        mustache: i,
        template: function(e) {
            return this._super(t.extend({
                classes: [ "search" ],
                hide_toolbar: !0
            }, e));
        },
        rendered: function() {
            this.$view.addClass("mobile-popup-transparent mobile-popup-full-bleed").on("click", ".search-option-confirm", !1).on("click", ".mobile-popup-content, .close", this.hide.bind(this)).on("touchmove", !1);
        },
        show: function() {
            return window.scrollTo(0, 1), this.$view && this.$view.show().find("input").focus();
        },
        hide: function() {
            return this.$view && this.$view.hide();
        },
        toggle: function() {
            return this.$view ? void this._super() : (window.scrollTo(0, 1), this.render(t(document.body)), 
            void this.$view.find("input").focus());
        }
    });
    return n;
}), define("be/navigation", [ "jquery", "nbd/Promise", "nbd/util/media", "lib/scrollpoint", "be/View/Basement", "be/View/Dialog/Layover/Search" ], function(t, e, i, n, o, r) {
    "use strict";
    function s(t) {
        var e = t.find("#nav-basement");
        u = new r(), c = new o(e), c.rendered(), t.on("click", ".js-header-action-search", function(t) {
            t.preventDefault(), u.toggle();
        }).on("click", "#hamburger-button", function(t) {
            t.preventDefault(), c.toggle();
        }).on("click", "#top-panel-blocking", function(t) {
            t.preventDefault(), c.close();
        });
    }
    function a(t) {
        t = t[0];
        var e;
        t.hasClass("logged-in") || (e = d.find("#site-content").offset().top + d.find("#sorts-container").outerHeight() + 60, 
        n(e, function(t) {
            d.find(".js-nav-primary").toggleClass("scrolled", t);
        }));
    }
    var l, c, u, d, p = {
        dom: new e(),
        phone: new e(),
        tablet: new e(),
        desktop: new e()
    };
    return i.on("phone:enter", p.phone.resolve).on("tablet:enter", p.tablet.resolve).on("desktop:enter", p.desktop.resolve), 
    i.getState().forEach(function(t) {
        p[t].resolve();
    }), e.all([ p.dom, p.phone ]).then(function(t) {
        return p.tablet.reject(), t[0];
    }).then(s), e.all([ p.dom, p.tablet ]).then(function(t) {
        return p.phone.reject(), t[0];
    }).then(s), e.all([ p.dom, p.desktop ]).then(a), l = {
        init: function(e) {
            d = e || t(document.body), p.dom.resolve(d);
        }
    };
}), define("require/hgn!templates/lib/_crumb", [ "hogan" ], function(t) {
    var e = new t.Template({
        code: function(t, e, i) {
            var n = this;
            return n.b(i = i || ""), n.b('<div class="crumb'), n.s(n.f("type", t, e, 1), t, e, 0, 26, 41, "{{ }}") && (n.rs(t, e, function(t, e, i) {
                i.b(" crumb-"), i.b(i.v(i.f("type", t, e, 0)));
            }), t.pop()), n.b(' js-crumb listselector-selection ui-textboxlist-bit left"'), 
            n.s(n.f("id", t, e, 1), t, e, 0, 114, 131, "{{ }}") && (n.rs(t, e, function(t, e, i) {
                i.b(' data-id="'), i.b(i.v(i.f("id", t, e, 0))), i.b('"');
            }), t.pop()), n.s(n.f("key", t, e, 1), t, e, 0, 146, 165, "{{ }}") && (n.rs(t, e, function(t, e, i) {
                i.b(' data-key="'), i.b(i.v(i.f("key", t, e, 0))), i.b('"');
            }), t.pop()), n.b(">"), n.b("\n" + i), n.b('  <div class="listselector-selection-display ui-textboxlist-selection-display">'), 
            n.b(n.v(n.f("value", t, e, 0))), n.b("</div>"), n.b("\n" + i), n.b('  <div class="closeX close-btn ui-textboxlist-deletebutton js-remove">X</div>'), 
            n.b("\n" + i), n.b("</div>"), n.b("\n"), n.fl();
        },
        partials: {},
        subs: {}
    }, "", t), i = function(t, e) {
        for (var i in e) t[i] = e[i];
        return t;
    }, n = {
        "": null
    }, o = function() {
        return e.render.apply(e, arguments);
    };
    return e.ri = function(t, e, o) {
        return this.r(t, i(n, e), o);
    }, o.template = e, o;
}), define("require/hgn!templates/breadcrumbs", [ "hogan", "require/hgn!templates/lib/_crumb" ], function(t) {
    var e = new t.Template({
        code: function(t, e, i) {
            var n = this;
            return n.b(i = i || ""), n.b('<div id="filter-crumbs" class="listselector_selections">'), 
            n.b("\n" + i), n.b("  "), n.s(n.f("label", t, e, 1), t, e, 0, 69, 116, "{{ }}") && (n.rs(t, e, function(t, e, i) {
                i.b('<span class="selections-label">'), i.b(i.v(i.f("label", t, e, 0))), i.b("</span>");
            }), t.pop()), n.b("\n" + i), n.s(n.f("breadcrumbs", t, e, 1), t, e, 0, 145, 167, "{{ }}") && (n.rs(t, e, function(t, e, i) {
                i.b(i.rp("<lib/_crumb0", t, e, "  "));
            }), t.pop()), n.b('  <span class="clear-all-crumbs js-remove-all beicons-pre beicons-pre-x-circle">Clear All Filters</span>'), 
            n.b("\n" + i), n.b("</div>"), n.b("\n"), n.fl();
        },
        partials: {
            "<lib/_crumb0": {
                name: "lib/_crumb",
                partials: {},
                subs: {}
            }
        },
        subs: {}
    }, "", t), i = function(t, e) {
        for (var i in e) t[i] = e[i];
        return t;
    }, n = {
        "lib/_crumb": arguments[1].template,
        "": null
    }, o = function() {
        return e.render.apply(e, arguments);
    };
    return e.ri = function(t, e, o) {
        return this.r(t, i(n, e), o);
    }, o.template = e, o;
}), define("be/View/Breadcrumbs", [ "jquery", "nbd/View/Element", "hgn!templates/breadcrumbs" ], function(t, e, i) {
    "use strict";
    return e.extend({
        mustache: i,
        template: function(e) {
            return t(this.mustache(e));
        },
        rendered: function() {
            var e = this.$view.find(".js-crumb").on("click", ".js-remove", function(e) {
                this.trigger("remove", t(e.delegateTarget).data());
            }.bind(this));
            this.$view.find(".js-remove-all").on("click", this.trigger.bind(this, "removeall")), 
            this.$parent.toggleClass("hide", !e.length);
        }
    });
}), define("be/Controller/Breadcrumbs", [ "nbd/util/extend", "nbd/Controller", "nbd/trait/pubsub", "be/View/Breadcrumbs" ], function(t, e, i, n) {
    "use strict";
    return e.extend({
        init: function(t) {
            this._initView(this.constructor.VIEW_CLASS, t);
        },
        nubbies: {},
        bind: function(t) {
            var e = function(e) {
                var i = e.key || e, n = this.nubbies[i];
                n && ("function" == typeof n.default ? t.set(n.default(e)) : t.set(i, n.default));
            };
            this.listenTo(t, "all", function() {
                this.render(t.data());
            }).listenTo(this._view, "remove", e).listenTo(this._view, "removeall", function() {
                Object.keys(t.data()).filter(this.nubbies.hasOwnProperty.bind(this.nubbies)).forEach(e, this);
            }), this.render(t.data());
        },
        destroy: function() {
            this._view.destroy(), this._view = null, this.stopListening();
        },
        render: function(e) {
            var i = Object.keys(e).filter(this.nubbies.hasOwnProperty.bind(this.nubbies)).map(function(i) {
                var n, o, r = e[i], s = this.nubbies[i];
                if (r && s) return n = "function" == typeof s ? s.call(i, r) : s[r], o = {
                    id: r,
                    key: i,
                    type: i
                }, "string" == typeof n ? (o.value = n, o) : Array.isArray(n) ? n : "object" == typeof n ? t(o, n) : n;
            }, this).filter(Boolean);
            this._view.render({
                label: this.label,
                breadcrumbs: Array.prototype.concat.apply([], i),
                empty: !!i.length
            });
        }
    }, {
        VIEW_CLASS: n,
        pipeMap: function(t, e) {
            return e.split("|").filter(Boolean).map(function(e) {
                return {
                    id: e,
                    key: this,
                    type: this,
                    value: t.call(this, e)
                };
            }, this);
        },
        resetPiped: function(t) {
            var e, i, n = {};
            return "string" == typeof t ? (n[t] = "", n) : (e = this.get(t.key).split("|"), 
            i = e.indexOf(String(t.id)), ~i && e.splice(i, 1), n[t.key] = e.join("|"), n);
        }
    }).mixin(i);
}), define("discover/Model/Filters", [ "page_constants", "nbd/Model", "nbd/util/extend" ], function(t, e, i) {
    "use strict";
    var n = e.extend({
        init: function(t) {
            this._super.apply(this, arguments), this.rectify(t.content), this._data = i({}, this.DEFAULTS, t);
        },
        rectify: function(e) {
            e = e || t.CONTENT_KEY_PROJECTS, "users" === e && (e = "projects"), this.DEFAULTS = i({}, this.constructor[e] || this.constructor.projects);
        },
        reset: function() {
            var t, e = this.data();
            for (t in e) this.DEFAULTS.hasOwnProperty(t) || delete e[t];
            i(e, this.DEFAULTS);
        }
    }, {
        projects: {
            field: "",
            content: t.CONTENT_KEY_PROJECTS,
            sort: t.SORT_KEY_FEATURED_DATE,
            time: t.TIME_KEY_ALL,
            location_id: ""
        },
        wips: {
            content: t.CONTENT_KEY_PROJECTS,
            sort: t.SORT_KEY_COMMENTS,
            time: t.TIME_KEY_WEEK,
            location_id: ""
        },
        teams: {
            content: t.CONTENT_KEY_PROJECTS,
            sort: t.SORT_KEY_FEATURED_DATE,
            time: t.TIME_KEY_ALL,
            location_id: ""
        }
    });
    return n;
}), define("discover/lib/correction", [ "nbd/util/extend", "page_constants" ], function(t, e) {
    "use strict";
    function i(t) {
        var i = t[e.FILTER_KEY_SORT], n = {
            time: e.TIME_KEY_WEEK
        };
        return i && (i === e.SORT_KEY_FEATURED_DATE || i === e.SORT_KEY_PUBLISHED_DATE ? n.time = e.TIME_KEY_ALL : i === e.SORT_KEY_COMMENTS && (n.time = e.TIME_KEY_TODAY)), 
        n;
    }
    function n(t, i) {
        return {
            sort: i.content === e.CONTENT_KEY_WIPS ? e.SORT_KEY_COMMENTS : e.SORT_KEY_APPRECIATIONS
        };
    }
    function o(o, s) {
        var a, l = s.content, c = !1, u = {};
        r[l] = r[l] || {}, t(r[l], o);
        for (a in o) if (o[a] != s[a]) {
            c = !0;
            break;
        }
        if (!c) return u;
        if ("undefined" != typeof o.content && o.content !== e.CONTENT_KEY_USERS && s.sort === e.SORT_KEY_FOLLOWED) u.sort = e.SORT_KEY_FEATURED_DATE; else {
            if ("undefined" != typeof o.content && o.content != s.content) return u;
            r[l].sort || t(u, n(o, s));
        }
        return r[l].time || t(u, i(t({}, o, u))), "undefined" != typeof o.field && o.field != s.field && (u.user_tags = void 0), 
        u;
    }
    var r = {};
    return o.clear = function(t) {
        r = t || {};
    }, o.changed = function() {
        return r;
    }, o;
}), define("discover/lib/filters", [ "nbd/util/extend", "nbd/util/deparam", "discover/Model/Filters", "discover/lib/correction", "vendor/misc/history", "page_config", "page_constants" ], function(t, e, i, n, o, r, s) {
    "use strict";
    var a = s.CONTENT_PER_PAGE, l = {}, c = 0, u = r.timestamp, d = window.location.search.replace(/^\?/, ""), p = e(d), h = new i(p);
    return t(h.DEFAULTS, n(p, h.DEFAULTS)), t(h._data, h.DEFAULTS, p), o.replaceState({
        filters: p
    }, document.title), t(h, {
        type: function(e) {
            var i = this.get("content");
            l[i] = t({}, this.data()), this.rectify(e), this.reset(), this.set(l[e]), this.set("content", e);
        },
        change: function(e, i) {
            var o, r, s;
            return "string" == typeof e ? (o = {}, o[e] = i) : o = e, r = n(o, h.data()), s = t(h.DEFAULTS, r), 
            o = t(r, o), h.set(o), o;
        },
        offset: function(t) {
            return void 0 === t ? c : c = t;
        },
        timestamp: function(t) {
            return u = t;
        },
        toJSON: function() {
            var e = this.data();
            return t({
                ts: u,
                ordinal: c,
                per_page: a[e.content] || 12
            }, e);
        }
    }), h;
}), define("discover/lib/loader", [ "jquery", "nbd/util/async", "discover/lib/filters", "page_config" ], function(t, e, i, n) {
    "use strict";
    function o() {
        return a.fireWith(null, arguments), t.ajax({
            type: "GET",
            url: d,
            data: i.toJSON()
        });
    }
    function r(t) {
        if (t && s) try {
            s.abort();
        } catch (e) {}
        if (t || !(s && "pending" === s.state() || null === i.offset())) return s = o(), 
        s.then(l.fire.bind(l), c.fire.bind(c), u.fire.bind(u)), s;
    }
    var s, a = new t.Callbacks(), l = new t.Callbacks(), c = new t.Callbacks(), u = new t.Callbacks(), d = "/search";
    return t.extend(r, {
        before: function() {
            return a.add.apply(a, arguments), r;
        },
        then: function(t, e, i) {
            return l.add(t), c.add(e), u.add(i), r;
        },
        remove: function(t) {
            return l.remove(t), c.remove(t), u.remove(t), r;
        },
        clear: function() {
            return l.empty(), c.empty(), u.empty(), r;
        }
    }), i.on("all", function p() {
        p.fired || (e(function() {
            i.offset(0), i.timestamp(n.timestamp), r(!0), p.fired = !1;
        }), p.fired = !0);
    }), r;
}), define("be/Controller/Dialog/Roulette", [ "jquery", "nbd/Controller/Responsive", "nbd/util/async" ], function(t, e, i) {
    "use strict";
    var n = e.extend({
        $context: null,
        setContext: function(t) {
            this.$context && this.$context.off("click"), this.$context = t.on("click", function(t) {
                t.isDefaultPrevented() || t.originalEvent.data === this._view || this.toggle(t.delegateTarget);
            }.bind(this));
        },
        render: function(e) {
            var i = t(e).closest(this._view.attachment), n = this._view.render(i.length ? i : document.body);
            return this._view.position(e), n;
        },
        toggle: function(t) {
            this._view.$view && this._view.$view.length ? (this._view.toggle(), this._view.position(t)) : (this.render(t || this.$context), 
            i(this._view.show.bind(this._view)));
        }
    });
    return n;
}), define("discover/Controller/Roulette", [ "be/Controller/Dialog/Roulette", "nbd/util/async" ], function(t, e) {
    "use strict";
    var i = t.extend({
        init: function() {
            this._super.apply(this, arguments), this.commit = this.commit.bind(this);
        },
        commit: function() {},
        switchView: function() {
            this._super.apply(this, arguments), this._view.hide();
        },
        toggle: function(t) {
            this.render(t || this.$context), this._view.$view && this._view.$view.length ? this._view.toggle() : e(this._view.show.bind(this._view));
        }
    });
    return i;
}), define("discover/View/Layover", [ "be/View/Dialog/Layover" ], function(t) {
    "use strict";
    var e = t.extend({
        rendered: function() {
            this.$view.on("click", "a", this.hide.bind(this)), this._super();
        }
    });
    return e;
}), define("discover/lib/fields", [ "discover/lib/filters" ], function(t) {
    "use strict";
    return {
        onChange: function(t, e) {
            this.$view && this.$view.find("[data-key=" + e + "] a").removeClass("active").end().find("[data-key=" + t + "] a").addClass("active");
        },
        followed: function() {
            this.$view.find("[data-key=followed]").toggleClass("hide", "projects" === t.get("content")), 
            t.on("content", function(t) {
                this.$view && this.$view.find("[data-key=followed]").toggleClass("hide", "projects" === t);
            }, this);
        },
        recent: function() {
            this.$view.find("#time-list").toggleClass("disabled", "published_date" === this._model.get("sort")), 
            this._model.on("sort", function(t) {
                this.$view.find("#time-list").toggleClass("disabled", "published_date" === t);
            }, this);
        }
    };
}), define("require/hgn!templates/discover/sort-fields", [ "hogan" ], function(t) {
    var e = new t.Template({
        code: function(t, e, i) {
            var n = this;
            return n.b(i = i || ""), n.s(n.f("phone", t, e, 1), t, e, 1, 0, 0, "") || (n.b('<div class="cfix" id="fields-menu">'), 
            n.b("\n"), n.b("\n" + i), n.b('  <div class="submenu left-menu left">'), n.b("\n" + i), 
            n.b('    <div class="list-header">Popular</div>'), n.b("\n" + i), n.b('    <ul id="popular-fields-list">'), 
            n.b("\n" + i), n.b('      <li data-key=""><a href="?field=">All Creative Fields</a></li>'), 
            n.b("\n" + i), n.s(n.f("populars", t, e, 1), t, e, 0, 246, 318, "{{ }}") && (n.rs(t, e, function(t, e, n) {
                n.b('      <li data-key="'), n.b(n.v(n.f("id", t, e, 0))), n.b('"><a href="?field='), 
                n.b(n.v(n.f("id", t, e, 0))), n.b('">'), n.b(n.v(n.f("value", t, e, 0))), n.b("</a></li>"), 
                n.b("\n" + i);
            }), t.pop()), n.b("    </ul>"), n.b("\n" + i), n.b("  </div>"), n.b("\n"), n.b("\n" + i), 
            n.b('  <div class="submenu right-menu left">'), n.b("\n" + i), n.b('    <div class="list-header">Alphabetical</div>'), 
            n.b("\n" + i)), n.b('    <ul class="divided-list '), n.s(n.f("phone", t, e, 1), t, e, 0, 489, 499, "{{ }}") && (n.rs(t, e, function(t, e, i) {
                i.b("phone-list");
            }), t.pop()), n.s(n.f("phone", t, e, 1), t, e, 1, 0, 0, "") || n.b("desktop-list"), 
            n.b('" id="all-fields-list">'), n.b("\n" + i), n.s(n.f("phone", t, e, 1), t, e, 0, 579, 827, "{{ }}") && (n.rs(t, e, function(t, e, n) {
                n.b('      <li data-key=""><a href="?field=">All Creative Fields</a></li>'), n.b("\n" + i), 
                n.b('      <li class="list-divider">Popular</li>'), n.b("\n" + i), n.s(n.f("populars", t, e, 1), t, e, 0, 712, 809, "{{ }}") && (n.rs(t, e, function(t, e, n) {
                    n.b('      <li class="list-field" data-key="'), n.b(n.v(n.f("id", t, e, 0))), n.b('"><a href="?field='), 
                    n.b(n.v(n.f("id", t, e, 0))), n.b('">'), n.b(n.v(n.f("value", t, e, 0))), n.b("</a></li>"), 
                    n.b("\n" + i);
                }), t.pop());
            }), t.pop()), n.s(n.f("fields", t, e, 1), t, e, 0, 853, 1033, "{{ }}") && (n.rs(t, e, function(t, e, n) {
                n.b('      <li class="list-divider">'), n.b(n.v(n.f("name", t, e, 0))), n.b("</li>"), 
                n.b("\n" + i), n.s(n.f("entries", t, e, 1), t, e, 0, 917, 1016, "{{ }}") && (n.rs(t, e, function(t, e, n) {
                    n.b('        <li class="list-field" data-key="'), n.b(n.v(n.f("id", t, e, 0))), 
                    n.b('"><a href="?field='), n.b(n.v(n.f("id", t, e, 0))), n.b('">'), n.b(n.v(n.f("value", t, e, 0))), 
                    n.b("</a></li>"), n.b("\n" + i);
                }), t.pop());
            }), t.pop()), n.b("    </ul>"), n.b("\n" + i), n.s(n.f("phone", t, e, 1), t, e, 1, 0, 0, "") || (n.b("  </div>"), 
            n.b("\n"), n.b("\n" + i), n.b("</div>"), n.b("\n" + i)), n.fl();
        },
        partials: {},
        subs: {}
    }, "", t), i = function(t, e) {
        for (var i in e) t[i] = e[i];
        return t;
    }, n = {
        "": null
    }, o = function() {
        return e.render.apply(e, arguments);
    };
    return e.ri = function(t, e, o) {
        return this.r(t, i(n, e), o);
    }, o.template = e, o;
}), define("discover/View/Layover/Fields", [ "nbd/util/extend", "discover/View/Layover", "discover/lib/fields", "hgn!templates/discover/sort-fields" ], function(t, e, i, n) {
    "use strict";
    var o = e.extend({
        init: function() {
            this._super.apply(this, arguments), this._model.on("field", this.onChange, this);
        },
        destroy: function() {
            this._model.off(null, null, this), this._super();
        },
        mustache: n,
        templateData: function() {
            return t({
                phone: !0
            }, this._model.data());
        },
        rendered: function() {
            this._super(), this.$view.find("[data-key=" + this._model.get("field") + "] a").addClass("active");
        }
    }).mixin(i);
    return o;
}), define("be/View/Dialog/Menu", [ "jquery", "be/View/Dialog", "nbd/util/async", "jquery/ui/position" ], function(t, e, i) {
    "use strict";
    var n = e.extend({
        init: function() {
            this._super.apply(this, arguments), this.dismiss = function(t) {
                t.originalEvent.data !== this && (this.hide(), t.preventDefault());
            }.bind(this);
        },
        destroy: function() {
            this._unbind(), this._super.apply(this, arguments);
        },
        template: function(e) {
            return this._super(t.extend({
                dialogType: "menu",
                blocking: !1,
                hide_toolbar: !0
            }, e));
        },
        rendered: function() {
            this._super();
            var t = this;
            this.$view.on("click touchend", function(e) {
                e.originalEvent.data = t;
            });
        },
        _bind: function() {
            t("html").on("click touchend", this.dismiss);
        },
        _unbind: function() {
            t("html").off("click touchend", this.dismiss);
        },
        position: function(e, i) {
            if (this.$view) {
                e && (this._lastContext = e);
                var n = {
                    my: "left top",
                    at: "left bottom+10",
                    of: this._lastContext,
                    collision: "flipfit"
                };
                this.$view.position(t.extend(n, i));
            }
        },
        show: function() {
            return this.$view ? (i(this._bind.bind(this)), this.$view.addClass("shown"), this._super()) : void 0;
        },
        hide: function() {
            return this.$view ? (this._unbind(), this.$view.removeClass("shown"), this._super()) : void 0;
        },
        toggle: function() {
            return this[this.$view.hasClass("shown") ? "hide" : "show"]();
        }
    });
    return n;
}), define("discover/View/Menu", [ "be/View/Dialog/Menu", "nbd/util/media" ], function(t, e) {
    "use strict";
    var i = t.extend({
        attachment: ".sort",
        position: function(t) {
            var i, n = $(t), o = n.find(".beicons-pre"), r = this._controller.$context.width() / 2, s = this.constructor.NUB_OFFSET - r, a = this._controller.$context.offset(), l = this.$view.offset(), c = 20;
            try {
                e("small-tablet", "(max-width: 799px)"), e.is("small-tablet") && (c = 5);
            } catch (u) {}
            return i = Math.floor(a.left) > l.left + Math.abs(s) ? "nub-right" : "", this.$view.removeClass("nub-right").addClass(i), 
            o.length ? this._super(t, {
                my: "left top",
                at: "left+18 bottom-" + c,
                collision: "flip none"
            }) : this._super(t, {
                my: "left top",
                at: "left-12 bottom-" + c,
                collision: "flip none"
            });
        },
        rendered: function() {
            this.$view.on("click", "a", this.dismiss), this._super();
        },
        show: function() {
            this.position(), this._super();
        },
        toggle: function() {
            this.position(), this._super();
        }
    }, {
        NUB_OFFSET: 20
    });
    return i;
}), define("discover/View/Menu/Fields", [ "discover/View/Menu", "discover/lib/fields", "lib/scrollpoint", "hgn!templates/discover/sort-fields" ], function(t, e, i, n) {
    "use strict";
    var o = t.extend({
        init: function() {
            this._super.apply(this, arguments), this.scrollpoint = this.scrollpoint.bind(this), 
            this._model.on("field", this.onChange, this);
        },
        destroy: function() {
            i.off(this.scrollpoint), this._model.off(null, null, this), this._super();
        },
        mustache: n,
        rendered: function() {
            this._super(), this.$view.find("[data-key=" + this._model.get("field") + "] a").addClass("active");
        },
        scrollpoint: function(t) {
            var e = this.$parent || this._controller.$context;
            e && e.find(".sort-label").toggleClass("active", t || !!this._model.get("field"));
        }
    }).mixin(e);
    return o;
}), define("discover/Controller/Roulette/Fields", [ "discover/Controller/Roulette", "discover/View/Layover/Fields", "discover/View/Menu/Fields", "discover/lib/filters", "page_constants" ], function(t, e, i, n, o) {
    "use strict";
    var r = t.extend({
        init: function() {
            this._super.apply(this, arguments), n.on("field", function(t) {
                this._model.set("field", t);
            }, this), this._model.on("field", this.commit);
        },
        destroy: function() {
            n.off(null, null, this), this._super();
        },
        setContext: function() {
            this._super.apply(this, arguments), this.commit(this._model.get("field"));
        },
        commit: function(t) {
            this.$context && (t = o.FIELDS[t], this.$context.find(".sort-label").toggleClass("active", !!t).text(t || "All Creative Fields"));
        }
    }, {
        VIEW_CLASS: {
            phone: e,
            tablet: i,
            desktop: i
        }
    });
    return r;
}), define("require/hgn!templates/discover/sort-browse", [ "hogan" ], function(t) {
    var e = new t.Template({
        code: function(t, e, i) {
            var n = this;
            return n.b(i = i || ""), n.b('<div class="'), n.s(n.f("phone", t, e, 1), t, e, 1, 0, 0, "") || n.b("sort-menu"), 
            n.b(" cfix "), n.s(n.f("phone", t, e, 1), t, e, 0, 57, 67, "{{ }}") && (n.rs(t, e, function(t, e, i) {
                i.b("phone-list");
            }), t.pop()), n.s(n.f("phone", t, e, 1), t, e, 1, 0, 0, "") || n.b("desktop-list"), 
            n.b('" id="featured-menu">'), n.b("\n"), n.b("\n" + i), n.s(n.f("phone", t, e, 1), t, e, 1, 0, 0, "") || (n.b('  <div class="list-header">Browse</div>'), 
            n.b("\n" + i)), n.b("\n" + i), n.b('  <ul id="browse-list" class="divided-list">'), 
            n.b("\n" + i), n.s(n.f("sorts", t, e, 1), t, e, 0, 254, 424, "{{ }}") && (n.rs(t, e, function(t, e, n) {
                n.b('    <li class="list-browse sort-item-'), n.b(n.v(n.f("id", t, e, 0))), n.b('" data-key='), 
                n.b(n.v(n.f("id", t, e, 0))), n.b('><a href="?sort='), n.b(n.v(n.f("id", t, e, 0))), 
                n.b('" class="discover-sprite-pre discover-sprite sort-item sort-'), n.b(n.v(n.f("id", t, e, 0))), 
                n.b('">'), n.b(n.v(n.f("value", t, e, 0))), n.b("</a></li>"), n.b("\n" + i);
            }), t.pop()), n.b("  </ul>"), n.b("\n"), n.b("\n" + i), n.s(n.f("phone", t, e, 1), t, e, 1, 0, 0, "") || (n.b('  <div class="list-header hide-teams">Time</div>'), 
            n.b("\n" + i)), n.b("\n" + i), n.b('  <ul id="time-list" class="hide-teams divided-list '), 
            n.s(n.f("phone", t, e, 1), t, e, 1, 0, 0, "") || n.b("collapsed"), n.b('">'), n.b("\n" + i), 
            n.s(n.f("times", t, e, 1), t, e, 0, 614, 737, "{{ }}") && (n.rs(t, e, function(t, e, n) {
                n.b('    <li class="list-browse" data-key="'), n.b(n.v(n.f("id", t, e, 0))), n.b('"><a href="?time='), 
                n.b(n.v(n.f("id", t, e, 0))), n.b('" class="discover-sprite sort-item">'), n.b(n.v(n.f("value", t, e, 0))), 
                n.b("</a></li>"), n.b("\n" + i);
            }), t.pop()), n.b("  </ul>"), n.b("\n"), n.b("\n" + i), n.b("</div>"), n.b("\n"), 
            n.fl();
        },
        partials: {},
        subs: {}
    }, "", t), i = function(t, e) {
        for (var i in e) t[i] = e[i];
        return t;
    }, n = {
        "": null
    }, o = function() {
        return e.render.apply(e, arguments);
    };
    return e.ri = function(t, e, o) {
        return this.r(t, i(n, e), o);
    }, o.template = e, o;
}), define("discover/View/Layover/Browse", [ "nbd/util/extend", "discover/View/Layover", "discover/lib/fields", "hgn!templates/discover/sort-browse" ], function(t, e, i, n) {
    "use strict";
    var o = e.extend({
        init: function() {
            this._super.apply(this, arguments), this._model.on("sort", this.onChange, this), 
            this._model.on("time", this.onChange, this);
        },
        destroy: function() {
            this._model.off(null, null, this), this._super();
        },
        mustache: n,
        templateData: function() {
            return t({
                phone: !0
            }, this._model.data());
        },
        rendered: function() {
            this._super(), this.$view.find("[data-key=" + this._model.get("sort") + "] a").addClass("active"), 
            this.$view.find("[data-key=" + this._model.get("time") + "] a").addClass("active"), 
            this.followed(), this.recent();
        }
    }).mixin(i);
    return o;
}), define("discover/View/Menu/Browse", [ "discover/View/Menu", "discover/lib/fields", "hgn!templates/discover/sort-browse" ], function(t, e, i) {
    "use strict";
    var n = t.extend({
        init: function() {
            this._super.apply(this, arguments), this._model.on("sort", this.onChange, this), 
            this._model.on("time", this.onChange, this), this._model.on("time", this.onTime, this);
        },
        destroy: function() {
            this._model.off(null, null, this), this._super();
        },
        mustache: i,
        rendered: function() {
            this._super();
            var t = this.$view.find("#time-list").on("click", "a", function() {
                return t.hasClass("collapsed") ? (t.removeClass("collapsed"), !1) : void 0;
            });
            this.$view.find("[data-key=" + this._model.get("sort") + "] a").addClass("active"), 
            this.$view.find("[data-key=" + this._model.get("time") + "]").addClass("active-time").find("a").addClass("active"), 
            this.followed(), this.recent();
        },
        onTime: function(t, e) {
            this.$view && this.$view.find("[data-key=" + e + "]").removeClass("active-time").end().find("[data-key=" + t + "]").addClass("active-time");
        },
        hide: function() {
            this.$view && (this.$view.find("#time-list").addClass("collapsed"), this._super());
        },
        toggle: function() {
            this.$view && (this.$view.find("#time-list").addClass("collapsed"), this._super());
        }
    }).mixin(e);
    return n;
}), define("discover/Controller/Roulette/Browse", [ "discover/Controller/Roulette", "discover/View/Layover/Browse", "discover/View/Menu/Browse", "discover/lib/filters", "page_constants" ], function(t, e, i, n, o) {
    "use strict";
    var r = t.extend({
        init: function() {
            this._super.apply(this, arguments), n.on("sort", function(t) {
                this._model.set("sort", t);
            }, this).on("time", function(t) {
                this._model.set("time", t);
            }, this), this._model.on("sort", this.commit);
        },
        destroy: function() {
            n.off(null, null, this), this._super();
        },
        setContext: function() {
            this._super.apply(this, arguments), this.commit(this._model.get("sort"));
        },
        commit: function(t) {
            this.$context && (t = o.SORTS[t], this.$context.find(".sort-label").text(t));
        }
    }, {
        VIEW_CLASS: {
            phone: e,
            tablet: i,
            desktop: i
        }
    });
    return r;
}), define("beff/Component", [ "nbd/Class", "nbd/util/construct", "nbd/trait/log", "nbd/trait/pubsub" ], function(t, e, i, n) {
    "use strict";
    return t.extend({
        bind: function() {
            return this;
        },
        unbind: function() {
            return this;
        },
        destroy: function() {
            this.off().stopListening().unbind();
        }
    }, {
        displayName: "Component",
        init: function() {
            return e.apply(this, arguments).bind();
        }
    }).mixin(i).mixin(n);
}), define("lib/autosource", [ "jquery", "nbd/Class" ], function(t, e) {
    "use strict";
    function i(t) {
        var e = new l(t);
        return e.source;
    }
    var n = Array.prototype.push, o = function() {
        return n.apply(this._remotes, arguments), this.source;
    }, r = function() {
        return n.apply(this._local, arguments), this.source;
    }, s = function() {
        return Array.prototype.concat.apply([], arguments);
    }, a = function(t, e) {
        return this.filter([], t).concat(e);
    }, l = e.extend({
        _blacklist: "",
        options: {
            maxLocal: 1/0,
            caseInsensitive: !1,
            minLength: 1
        },
        init: function(e) {
            this._remotes = [], this._local = [], this.setOptions(e), this.source = t.extend(this.source.bind(this), {
                addRemote: o.bind(this),
                addLocal: r.bind(this)
            });
        },
        setOptions: function(e) {
            t.extend(this.options, e);
        },
        callRemote: function(e) {
            return t.isFunction(e) ? e(this) : "string" == typeof e ? t.ajax({
                url: e,
                data: this
            }) : e;
        },
        callLocal: function(e) {
            return t.isFunction(e) ? e(this) : e;
        },
        filter: function(t, e) {
            this._filterMemo = this._filterMemo || {};
            var i, n, o = [], r = this.options.maxLocal || 1/0, s = e.term;
            if (this.options.caseInsensitive && (s = s.toLocaleLowerCase()), this._filterMemo[s]) return this._filterMemo[s];
            for (i = 0; i < t.length && o.length < r; ++i) n = t[i].value, this.options.caseInsensitive && (n = n.toLocaleLowerCase()), 
            n.indexOf(s) >= 0 && o.push(t[i]);
            return this._filterMemo[s] = o;
        },
        source: function(e, i) {
            if (!(e.term.length < this.options.minLength)) {
                var n = this._local.length ? this.filter(s.apply(null, this._local.map(this.callLocal, e)), e) : [];
                this._remotes.length ? (n.length && i(n), t.when.apply(t, this._remotes.map(this.callRemote, e)).then(s).then(a.bind(this, e)).then(i)) : i(n);
            }
        },
        setBlacklist: function(t) {
            this._blacklist = t;
        }
    });
    return i.constructor = l, i.init = function(t) {
        return new l(t);
    }, i;
}), define("lib/tooltip", [ "jquery" ], function(t) {
    "use strict";
    function e(e, i, n) {
        var o, r, s;
        return n = n || [], o = e.closest(".js-form-item, .form-item"), o.length || (o = e), 
        r = t("<div>" + i + "</div>").addClass(n.join(" ")).appendTo(o), s = null == e[0].offsetParent ? 0 : e.position().top, 
        r.css("top", -(r.outerHeight() + 8 - s)), o.addClass("form-item-error"), r;
    }
    return e;
}), define("lib/xhr", [ "jquery", "nbd/trait/promise" ], function(t, e) {
    "use strict";
    return function() {
        var i, n = new e(), o = t.ajax.apply(t, arguments);
        return n.resolve(o), i = n.thenable(), i.abort = o.abort, i;
    };
}), define("require/hgn!templates/discover/suggest-item", [ "hogan" ], function(t) {
    var e = new t.Template({
        code: function(t, e, i) {
            var n = this;
            return n.b(i = i || ""), n.s(n.f("divider", t, e, 1), t, e, 0, 12, 104, "{{ }}") && (n.rs(t, e, function(t, e, n) {
                n.b('<div class="ui-menu-divider"></div>'), n.b("\n" + i), n.b('<div class="ui-menu-divider-label">'), 
                n.b(n.v(n.f("typelabel", t, e, 0))), n.b("</div>"), n.b("\n" + i);
            }), t.pop()), n.b('<li class="ui-menu-item-'), n.b(n.v(n.f("type", t, e, 0))), n.b('"><a class="text-ellipsis">'), 
            n.b(n.v(n.f("value", t, e, 0))), n.b("</a></li>"), n.b("\n"), n.fl();
        },
        partials: {},
        subs: {}
    }, "", t), i = function(t, e) {
        for (var i in e) t[i] = e[i];
        return t;
    }, n = {
        "": null
    }, o = function() {
        return e.render.apply(e, arguments);
    };
    return e.ri = function(t, e, o) {
        return this.r(t, i(n, e), o);
    }, o.template = e, o;
}), define("be/location", [ "jquery", "nbd/util/extend", "beff/Component", "lib/autosource", "lib/tooltip", "lib/xhr", "hgn!templates/discover/suggest-item", "jquery/be/autosuggest", "jquery/plugins/jquery.changeinput" ], function(t, e, i, n, o, r, s) {
    "use strict";
    function a(t) {
        return t.value = t.n, t;
    }
    function l(t) {
        return t.map(a);
    }
    return i.extend({
        init: function(i, n) {
            this._options = e({
                country: ".country, .js-country",
                state: ".state, .js-state",
                province: ".province, .js-province",
                hidden_state: ".hidden-state, .js-hidden-state",
                city: ".city, .js-city",
                hidden_city: ".js-hidden-city",
                showErrors: !0,
                disableState: !1,
                setVisiblity: !1
            }, n);
            var o = i.find(this._options.country), r = i.find(this._options.state), s = i.find(this._options.province), a = i.find(this._options.hidden_state), l = i.find(this._options.city), c = r.add(s), u = this._stateProvinceField(o.val(), r, s), d = i.find(this._options.hidden_city);
            d.length || (d = t("<input>", {
                type: "hidden",
                name: "location_id"
            }).insertAfter(l)), o.on("change", function(t) {
                this._reset(c, a, l), this._countryChanged(t.target.value, i, r, s, l.add(d));
            }.bind(this)), c.on("change", function(t) {
                this._resetCityValue(l.add(d)), this._stateChanged(t.target.value, a, l.add(d));
            }.bind(this)), this._autoselect(o, c, a, l, d), this._options.disableState && (c.changeInput("disable"), 
            u && u.changeInput("enable")), this._options.setVisiblity && (this._countryChanged(o.val(), i, r, s, l.add(d)), 
            this._stateChanged(u && u.length ? u.val() : "", a, l.add(d))), this.get = function() {
                var t = o.find('[value="' + o.val() + '"]');
                return {
                    country: t.data("code") || t.attr("code") || o.val(),
                    state: a.val(),
                    location_id: d.val(),
                    city: l.val()
                };
            };
        },
        _countryChanged: function(t, e, i, n, o) {
            var r = this._stateProvinceField(t, i, n);
            r ? this._toggleState(r) : "" !== t && this._toggleCity(o), e.toggleClass("showing-stateprov", !!r);
        },
        _stateChanged: function(t, e, i) {
            e.val(t), t ? this._toggleCity(i) : this._disableCity(i);
        },
        _stateProvinceField: function(t, e, i) {
            return "US" === t || "United States" === t ? e : "CA" === t || "Canada" === t ? i : void 0;
        },
        _toggleState: function(t) {
            var e = t.closest(t.data("containerSelector"));
            e = e.length ? e : t.parent(), e.removeClass("hide"), t.changeInput("enable");
        },
        _toggleCity: function(t) {
            t.is(".disabled") && t.removeClass("disabled").removeAttr("disabled");
        },
        _disableCity: function(t) {
            t.addClass("disabled").prop("disabled", !0);
        },
        _reset: function(t, e, i) {
            this._resetValues(t, e, i), this._resetVisiblity(t, i);
        },
        _resetVisiblity: function(t, e) {
            var i;
            e.addClass("disabled").prop("disabled", !0), t && (i = t.closest(t.data("containerSelector")), 
            i = i.length ? i : t.parent(), i.addClass("hide"), this._options.disableState && t.changeInput("disable"));
        },
        _resetCityValue: function(t) {
            t.val(""), t.is(".autocomplete") && t.autoselect("empty");
        },
        _resetValues: function(t, e, i) {
            t.changeInput("value", ""), e.val(""), this._removeErrors(i), this._resetCityValue(i);
        },
        _removeErrors: function(t) {
            t.siblings(".form-error").remove(), t.parent().removeClass("form-item-error");
        },
        _autoselect: function(e, i, a, c, u) {
            var d = n({
                caseInsensitive: !0
            }), p = this;
            d.addRemote(function(t) {
                var n = t.term, o = e.find('option[value="' + e.val() + '"]'), s = i.find('option[value="' + a.val() + '"]'), c = o.data("code") || o.attr("code") || e.val(), u = s.data("code") || s.attr("code") || a.val();
                return r({
                    url: "/utilities/location",
                    data: {
                        level: "3",
                        country: c,
                        stateprov: u,
                        city: n
                    }
                }).then(l);
            }), c.autosuggest({
                source: d,
                position: {
                    my: "right top",
                    at: "right bottom"
                },
                itemTemplate: s,
                minLength: 2,
                width: c.outerWidth()
            }).on({
                autosuggestchange: function(e, i) {
                    var n = i.item, r = !1, s = !0, a = t(this), l = a.data("beAutosuggest");
                    p._removeErrors(c), n || (l.widget().children().each(function() {
                        n = t(this).data("ui-autocomplete-item").value, new RegExp("^" + n + "$", "gi").test(l.term) && (c.val(n), 
                        r = !0);
                    }), r || (c.add(u).val(""), p._options.showErrors && o(c, "Please type in your city.", [ "form-error" ]), 
                    s = !1)), u.val(n && n.location_id), l._trigger("changevalidated", null, {
                        valid: s
                    });
                },
                blur: function() {
                    "" === t(this).val().trim() && (p._removeErrors(c), p._resetCityValue(c.add(u)), 
                    p._options.showErrors && o(c, "Please type in your city.", [ "form-error" ]));
                }
            });
        }
    });
}), define("be/ProximitySlider", [ "jquery", "beff/Component", "nbd/util/construct", "nbd/trait/pubsub", "jquery/ui/slider" ], function(t, e, i, n) {
    "use strict";
    function o(t) {
        return (1.60934 * +t).toFixed(1);
    }
    function r(t, e, i) {
        i = +i || 0, t.find(".js-mi").text(i).end().find(".js-km").text(o(i)), e.css("width", i + "%");
    }
    return e.extend({
        init: function(e, i) {
            this.$progress = t('<div class="ui-progress"/>'), this.$slider = e.find(".js-proximity-slider"), 
            this.model = i, this.updateDisplay = r.bind(null, e, this.$progress), this.listenTo(this.model, "proximity", this.setValue), 
            this.$slider.on("slide slidechange", this._onChange.bind(this));
        },
        _onChange: function(t, e) {
            this.updateDisplay(e.value), this.trigger("change");
        },
        bind: function() {
            var t = {
                value: this.model.get("proximity")
            };
            return this.$slider.slider(t).prepend(this.$progress), this.updateDisplay(this.model.get("proximity")), 
            this;
        },
        getValue: function() {
            return this.$slider.slider("value");
        },
        setValue: function(t) {
            return this.$slider.slider("value", t), this;
        }
    }, {
        init: function() {
            return i.apply(this, arguments).bind();
        }
    }).mixin(n);
}), define("require/hgn!templates/discover/sidebar-menu", [ "hogan" ], function(t) {
    var e = new t.Template({
        code: function(t, e, i) {
            var n = this;
            return n.b(i = i || ""), n.b('<div class="sort-menu search-option '), n.s(n.f("confirm", t, e, 1), t, e, 1, 0, 0, "") || n.b("search-option-no-confirm"), 
            n.b('">'), n.b("\n" + i), n.b("  "), n.b("\n" + i), n.b("  "), n.s(n.f("title", t, e, 1), t, e, 0, 102, 151, "{{ }}") && (n.rs(t, e, function(t, e, i) {
                i.b('<div class="search-option-header">'), i.b(i.v(i.f("title", t, e, 0))), i.b("</div>");
            }), t.pop()), n.b("\n"), n.b("\n" + i), n.b('  <div class="search-option-content">'), 
            n.b("\n" + i), n.s(n.f("field", t, e, 1), t, e, 0, 213, 290, "{{ }}") && (n.rs(t, e, function(t, e, n) {
                n.b('    <input id="'), n.b(n.v(n.f("field", t, e, 0))), n.b('" type="text" class="form-text form-text-normal">'), 
                n.b("\n" + i);
            }), t.pop()), n.b("    "), n.b(n.t(n.f("content", t, e, 0))), n.b("\n" + i), n.b("  </div>"), 
            n.b("\n"), n.b("\n" + i), n.s(n.f("confirm", t, e, 1), t, e, 0, 343, 596, "{{ }}") && (n.rs(t, e, function(t, e, n) {
                n.b('  <div class="search-option-confirm clear">'), n.b("\n" + i), n.b('    <span class="form-button form-button-small form-button-default search-option-confirm-apply left">Apply</span>'), 
                n.b("\n" + i), n.b('    <span class="search-option-cancel discover-sprite-pre right hide">Clear</span>'), 
                n.b("\n" + i), n.b("  </div>"), n.b("\n" + i);
            }), t.pop()), n.b("  "), n.b("\n" + i), n.b('  <div class="search-option-nub"></div>'), 
            n.b("\n" + i), n.b("  "), n.b("\n" + i), n.b("</div>"), n.b("\n"), n.fl();
        },
        partials: {},
        subs: {}
    }, "", t), i = function(t, e) {
        for (var i in e) t[i] = e[i];
        return t;
    }, n = {
        "": null
    }, o = function() {
        return e.render.apply(e, arguments);
    };
    return e.ri = function(t, e, o) {
        return this.r(t, i(n, e), o);
    }, o.template = e, o;
}), define("require/hgn!templates/lib/_proximity", [ "hogan" ], function(t) {
    var e = new t.Template({
        code: function(t, e, i) {
            var n = this;
            return n.b(i = i || ""), n.b('<div class="hide proximity js-proximity">'), n.b("\n" + i), 
            n.b('  <div class="sub-label">'), n.b("\n" + i), n.b('    <span class="sub-label-text">Proximity</span>'), 
            n.b("\n" + i), n.b('    <span class="sub-label-note">Within <span class="js-mi">0</span> Miles (<span class="js-km">0</span> km)</span>'), 
            n.b("\n" + i), n.b("  </div>"), n.b("\n" + i), n.b('  <div id="proximity" class="js-proximity-slider"></div>'), 
            n.b("\n" + i), n.b("</div>"), n.b("\n"), n.fl();
        },
        partials: {},
        subs: {}
    }, "", t), i = function(t, e) {
        for (var i in e) t[i] = e[i];
        return t;
    }, n = {
        "": null
    }, o = function() {
        return e.render.apply(e, arguments);
    };
    return e.ri = function(t, e, o) {
        return this.r(t, i(n, e), o);
    }, o.template = e, o;
}), define("require/hgn!templates/location", [ "hogan", "require/hgn!templates/lib/_proximity" ], function(t) {
    var e = new t.Template({
        code: function(t, e, i) {
            var n = this;
            return n.b(i = i || ""), n.b('<div class="country-container form-item">'), n.b("\n" + i), 
            n.b("  <label>Country</label>"), n.b("\n" + i), n.b('  <select class="country form-select ui-selectmenu-large">'), 
            n.b("\n" + i), n.b('  <option class="form-option form-option-empty" value="">-- Select a Country</option>'), 
            n.b("\n" + i), n.s(n.f("countries", t, e, 1), t, e, 0, 228, 317, "{{ }}") && (n.rs(t, e, function(t, e, n) {
                n.b('  <option class="form-option" data-code="'), n.b(n.v(n.f("id", t, e, 0))), 
                n.b('" value="'), n.b(n.v(n.f("value", t, e, 0))), n.b('">'), n.b(n.v(n.f("value", t, e, 0))), 
                n.b("</option>"), n.b("\n" + i);
            }), t.pop()), n.b("  </select>"), n.b("\n" + i), n.b("</div>"), n.b("\n"), n.b("\n" + i), 
            n.b('<div class="state-container hide form-item">'), n.b("\n" + i), n.b("  <label>State</label>"), 
            n.b("\n" + i), n.b('  <select class="state form-select ui-selectmenu-large">'), 
            n.b("\n" + i), n.b('  <option class="form-option form-option-empty" value="">-- Select a State</option>'), 
            n.b("\n" + i), n.s(n.f("states", t, e, 1), t, e, 0, 574, 663, "{{ }}") && (n.rs(t, e, function(t, e, n) {
                n.b('  <option class="form-option" data-code="'), n.b(n.v(n.f("id", t, e, 0))), 
                n.b('" value="'), n.b(n.v(n.f("value", t, e, 0))), n.b('">'), n.b(n.v(n.f("value", t, e, 0))), 
                n.b("</option>"), n.b("\n" + i);
            }), t.pop()), n.b("  </select>"), n.b("\n" + i), n.b("</div>"), n.b("\n"), n.b("\n" + i), 
            n.b('<div class="province-container hide form-item">'), n.b("\n" + i), n.b("  <label>Province</label>"), 
            n.b("\n" + i), n.b('  <select class="province form-select ui-selectmenu-large">'), 
            n.b("\n" + i), n.b('  <option class="form-option form-option-empty" value="">-- Select a Province</option>'), 
            n.b("\n" + i), n.s(n.f("provinces", t, e, 1), t, e, 0, 932, 1021, "{{ }}") && (n.rs(t, e, function(t, e, n) {
                n.b('  <option class="form-option" data-code="'), n.b(n.v(n.f("id", t, e, 0))), 
                n.b('" value="'), n.b(n.v(n.f("value", t, e, 0))), n.b('">'), n.b(n.v(n.f("value", t, e, 0))), 
                n.b("</option>"), n.b("\n" + i);
            }), t.pop()), n.b("  </select>"), n.b("\n" + i), n.b("</div>"), n.b("\n"), n.b("\n" + i), 
            n.b('<input type="hidden" class="hidden-state" />'), n.b("\n"), n.b("\n" + i), n.b('<div class="city-container form-item ui-front">'), 
            n.b("\n" + i), n.b("  <label>City</label>"), n.b("\n" + i), n.b('  <input type="text" class="city form-text form-text-normal disabled" disabled="disabled">'), 
            n.b("\n" + i), n.b("</div>"), n.b("\n"), n.b("\n" + i), n.s(n.f("proximity", t, e, 1), t, e, 0, 1285, 1305, "{{ }}") && (n.rs(t, e, function(t, e, i) {
                i.b(i.rp("<lib/_proximity0", t, e, ""));
            }), t.pop()), n.fl();
        },
        partials: {
            "<lib/_proximity0": {
                name: "lib/_proximity",
                partials: {},
                subs: {}
            }
        },
        subs: {}
    }, "", t), i = function(t, e) {
        for (var i in e) t[i] = e[i];
        return t;
    }, n = {
        "lib/_proximity": arguments[1].template,
        "": null
    }, o = function() {
        return e.render.apply(e, arguments);
    };
    return e.ri = function(t, e, o) {
        return this.r(t, i(n, e), o);
    }, o.template = e, o;
}), define("discover/lib/locate", [ "page_gates", "has", "nbd/util/extend", "be/location", "be/ProximitySlider", "discover/lib/filters", "hgn!templates/discover/sidebar-menu", "hgn!templates/location", "jquery/plugins/jquery.ui.selectmenu" ], function(t, e, i, n, o, r, s, a) {
    "use strict";
    return {
        mustache: s,
        templateData: function() {
            var e = i({
                proximity: t.talentsearch
            }, this._model.data());
            return i({
                content: a(e),
                confirm: !0
            }, e);
        },
        rendered: function() {
            this.$view.addClass("location-menu").on("click", ".ui-menu a", function(t) {
                t.stopImmediatePropagation();
            }), this._super(), this.locate = n.init(this.$view.find(".search-option-content")), 
            e("touch") || this.$view.find("select").selectmenu(), this.proximity(), this.preload(), 
            this.$apply = this.$view.find(".search-option-confirm-apply"), this.$clear = this.$view.find(".search-option-cancel"), 
            this.$apply.on("click", this.apply.bind(this)), this.$clear.on("click", this.reset.bind(this));
        },
        hide: function() {
            return this._super(), this.$view && this.$view.find(".form-error").remove();
        },
        proximity: function() {
            var t = this.$view.find(".js-proximity");
            t.length && (o.init(t, this._model), this.$view.find(".city").on("autosuggestselect change", function() {
                t.toggleClass("hide", !this.value);
            }));
        },
        preload: function() {
            var t, e, i;
            (t = r.get("country")) && this.$view.find("select.country").selectmenu("value", this.$view.find('[data-code="' + t + '"]').val()), 
            (e = r.get("state")) && this.$view.find("select.state, select.province").selectmenu("value", e), 
            (i = r.get("city")) && this.$view.find(".city").val(i);
        },
        reset: function() {
            if (r.get("country")) {
                this.$view.find("select.country").selectmenu("value", ""), this.$view.find("select.state").selectmenu("value", ""), 
                this.$view.find("select.province").selectmenu("value", ""), this.$view.find(".js-proximity").addClass("hide");
                var t = {
                    country: void 0,
                    state: void 0,
                    city: void 0,
                    proximity: void 0
                };
                this._model.set(t), r.change(t);
            }
            this.hide();
        },
        apply: function(t) {
            if (!this.$apply.hasClass("form-button-disabled") || t) {
                var e = this.locate.get(), i = this.$view.find("#proximity");
                i.length && (e.proximity = +i.slider("value") || 0), this._model.set(e), r.change(e), 
                this.hide();
            }
        }
    };
}), define("discover/View/Layover/Locate", [ "discover/View/Layover", "discover/lib/locate" ], function(t, e) {
    "use strict";
    return t.extend(e, {
        displayName: "discover/View/Layover/Locate"
    });
}), define("discover/View/Menu/Locate", [ "discover/View/Menu", "discover/lib/locate" ], function(t, e) {
    "use strict";
    return t.extend(e, {
        displayName: "discover/View/Menu/Locate"
    });
}), define("discover/Controller/Roulette/Locate", [ "jquery", "nbd/util/async", "discover/Controller/Roulette", "discover/View/Layover/Locate", "discover/View/Menu/Locate", "discover/lib/filters" ], function(t, e, i, n, o, r) {
    "use strict";
    var s = i.extend({
        init: function() {
            this._super.apply(this, arguments), r.on("country", function(t) {
                this._model.set("country", t);
            }, this).on("state", function(t) {
                this._model.set("state", t);
            }, this).on("city", function(t) {
                this._model.set("city", t);
            }, this).on("sort field", this.underflow, this), this._model.on("country state city", this.commit), 
            this.underflow();
        },
        commit: function() {
            if (this.$context) {
                var t = this._model.data(), e = [ t.city, t.state, t.country ].filter(Boolean).join(", ");
                this.$context.find(".sort-label").text(e || "Worldwide"), this.underflow();
            }
        },
        underflow: function a() {
            a.count = a.count || 0, 0 === a.count++ && e(function() {
                var e = this.$context.find(".sort-label").css("width", ""), i = this.$context.siblings().addBack().get().reduce(function(e, i) {
                    return e + t(i).outerWidth(!0);
                }, 10 - t(".js-sorts").width());
                i > 0 && e.css("width", "-=" + i), a.count = 0;
            }.bind(this));
        }
    }, {
        VIEW_CLASS: {
            phone: n,
            tablet: o,
            desktop: o
        }
    });
    return s;
}), define("discover/coordinator", [ "beff/Component" ], function(t) {
    "use strict";
    return new t();
}), define("require/hgn!templates/discover/sort-content", [ "hogan" ], function(t) {
    var e = new t.Template({
        code: function(t, e, i) {
            var n = this;
            return n.b(i = i || ""), n.b('<div class="list-header">View</div>'), n.b("\n" + i), 
            n.b('<ul class="sort-content-list '), n.s(n.f("phone", t, e, 1), t, e, 0, 75, 87, "{{ }}") && (n.rs(t, e, function(t, e, i) {
                i.b("divided-list");
            }), t.pop()), n.b('">'), n.b("\n" + i), n.s(n.f("contentTypes", t, e, 1), t, e, 0, 119, 267, "{{ }}") && (n.rs(t, e, function(t, e, n) {
                n.b("  <li>"), n.b("\n" + i), n.b('    <a class="beicons-pre beicons-pre-'), n.b(n.v(n.f("icon", t, e, 0))), 
                n.b(" js-content-type"), n.s(n.f("active", t, e, 1), t, e, 0, 200, 207, "{{ }}") && (n.rs(t, e, function(t, e, i) {
                    i.b(" active");
                }), t.pop()), n.b('" data-key="'), n.b(n.v(n.f("content", t, e, 0))), n.b('">'), 
                n.b(n.v(n.f("label", t, e, 0))), n.b("</a>"), n.b("\n" + i), n.b("  </li>"), n.b("\n" + i);
            }), t.pop()), n.b("</ul>"), n.fl();
        },
        partials: {},
        subs: {}
    }, "", t), i = function(t, e) {
        for (var i in e) t[i] = e[i];
        return t;
    }, n = {
        "": null
    }, o = function() {
        return e.render.apply(e, arguments);
    };
    return e.ri = function(t, e, o) {
        return this.r(t, i(n, e), o);
    }, o.template = e, o;
}), define("discover/lib/content", [ "jquery", "discover/lib/filters", "hgn!templates/discover/sort-content" ], function(t, e, i) {
    "use strict";
    return {
        init: function() {
            this._super.apply(this, arguments), this.listenTo(this._model, "content", this.onChange);
        },
        rendered: function() {
            this._super(), this.$view.on("click", ".js-content-type", function(e) {
                var i = t(e.target).data("key");
                this._model.set("content", i);
            }.bind(this));
        },
        onChange: function(e, i) {
            this.$view && (t("#site-content").find(".js-discover-search").val(""), this.$view.find("[data-key=" + i + "]").removeClass("active").end().find("[data-key=" + e + "]").addClass("active"));
        },
        mustache: i
    };
}), define("discover/View/Layover/Content", [ "discover/View/Layover", "discover/lib/content", "nbd/util/extend" ], function(t, e, i) {
    "use strict";
    return t.extend(e).extend({
        templateData: function() {
            return i({
                phone: !0
            }, this._model.data());
        }
    }, {
        displayName: "discover/View/Layover/Content"
    });
}), define("discover/View/Menu/Content", [ "discover/View/Menu", "discover/lib/content" ], function(t, e) {
    "use strict";
    return t.extend(e, {
        displayName: "discover/View/Menu/Content"
    });
}), define("discover/Controller/Roulette/Content", [ "discover/coordinator", "discover/Controller/Roulette", "discover/View/Layover/Content", "discover/View/Menu/Content", "discover/lib/filters", "page_constants" ], function(t, e, i, n, o) {
    "use strict";
    var r = e.extend({
        init: function() {
            this._super.apply(this, arguments), o.on("content", function(t, e) {
                this._model.set("content", t), this.update(t, e);
            }, this), this._model.on("content", this.commit);
        },
        destroy: function() {
            o.off(null, null, this), this._super();
        },
        setContext: function() {
            this._super.apply(this, arguments), this.commit(this._model.get("content"));
        },
        commit: function(e) {
            t.trigger("content.type", e);
        },
        update: function(t, e) {
            if (this.$context) {
                var i = this._model.get("contentMap"), n = this.$context.find(".sort-label");
                e && n.removeClass("beicons-pre-" + i[e].icon), n.addClass("beicons-pre-" + i[t].icon).text(i[t].label);
            }
        }
    }, {
        VIEW_CLASS: {
            phone: i,
            tablet: n,
            desktop: n
        }
    });
    return r;
}), define("discover/View/Sorts", [ "jquery", "nbd/View/Element", "page_constants", "discover/lib/filters", "discover/Controller/Roulette/Fields", "discover/Controller/Roulette/Browse", "discover/Controller/Roulette/Locate", "discover/Controller/Roulette/Content" ], function(t, e, i, n, o, r, s, a) {
    "use strict";
    var l = e.extend({
        fields: null,
        browse: null,
        locate: null,
        content: null,
        init: function() {
            function t(t, e) {
                return {
                    id: e,
                    value: i[t][e]
                };
            }
            this._super.apply(this, arguments), this.$view = this.$parent.find("#sorts");
            var e, n, o, r = {};
            for (e in i.FIELDS) n = i.FIELDS[e], o = n.charAt(0), r[o] = r[o] || [], r[o].push({
                id: e,
                value: n
            });
            this.fields_data = Object.keys(r).sort().map(function(t) {
                return {
                    name: t,
                    entries: r[t]
                };
            }), this.popular_data = i.FIELDS_ORDER.map(t.bind(null, "FIELDS")).sort(function(t, e) {
                return t.value > e.value ? 1 : -1;
            }), this.sorts_data = i.SORTS_ORDER.map(t.bind(null, "SORTS")), this.times_data = i.TIMES_ORDER.map(t.bind(null, "TIMES")), 
            this.countries_data = Object.keys(i.LOCATION.COUNTRIES).map(function(t) {
                return {
                    id: t,
                    value: i.LOCATION.COUNTRIES[t]
                };
            }).sort(function(t, e) {
                return "US" === t.id ? -1 : "US" === e.id ? 1 : t.value > e.value ? 1 : -1;
            }), this.states_data = i.LOCATION.STATES.map(function(t, e) {
                return {
                    id: i.LOCATION.STATE_CODES[e],
                    abbrev: i.LOCATION.STATE_ABBREVIATIONS[e],
                    value: t
                };
            }), this.provinces_data = i.LOCATION.PROVINCES.map(function(t, e) {
                return {
                    id: i.LOCATION.PROVINCE_CODES[e],
                    value: t
                };
            }), this.content_types = i.CONTENT_KEYS.reduce(function(t, e) {
                return t[e.content] = {
                    label: e.label,
                    icon: e.icon
                }, t;
            }, {});
        },
        destroy: function() {
            n.off(null, null, this), this._super();
        },
        template: t,
        rendered: function() {
            this.projectRoulettes(this.$view);
        },
        projectRoulettes: function(t) {
            var e = t.find(".js-sort-content"), l = t.find(".js-sort-fields"), c = t.find(".js-sort-featured"), u = t.find(".js-sort-location");
            this.fields = new o({
                field: n.get("field"),
                fields: this.fields_data,
                populars: this.popular_data,
                title: "Creative Fields"
            }), this.fields.setContext(l), this.browse = new r({
                time: n.get("time"),
                sort: n.get("sort"),
                sorts: this.sorts_data,
                times: this.times_data,
                title: "Sort"
            }), this.browse.setContext(c), this.locate = new s({
                title: "Location",
                country: n.get("country"),
                state: n.get("state"),
                city: n.get("city"),
                countries: this.countries_data,
                states: this.states_data,
                provinces: this.provinces_data
            }), this.locate.setContext(u), this.content = new a({
                content: n.get("content"),
                contentTypes: i.CONTENT_KEYS,
                contentMap: this.content_types
            }), this.content.setContext(e);
        }
    });
    return l;
}), define("discover/filter", [ "page_constants", "jquery", "nbd/util/media", "be/Controller/Breadcrumbs", "discover/lib/filters", "discover/lib/loader", "discover/View/Sorts", "jquery/plugins/jquery.sticky" ], function(t, e, i, n, o, r, s) {
    "use strict";
    var a = function(e) {
        return t[this.toUpperCase()][e].n;
    }, l = n.resetPiped.bind(o);
    return {
        init: function(c) {
            var u, d, p = e("#sorts-container", c);
            e(document.body).hasClass("logged-out") && i.is("desktop") && p.sticky({
                wrapperClassName: "sticky",
                topSpacing: e(".js-nav-primary").height()
            }), u = new s(p), u.rendered(), d = new n(e("#breadcrumbs-container .grid-site", c)), 
            d.nubbies = [ t.FILTER_KEY_AWARDS, t.FILTER_KEY_TOOLS, t.FILTER_KEY_SCHOOLS, t.FILTER_KEY_CLIENTS ].reduce(function(t, e) {
                return t[e] = n.pipeMap.bind(e, a), t[e].default = l, t;
            }, {}), d.nubbies[t.FILTER_KEY_USER_TAGS] = n.pipeMap.bind(t.FILTER_KEY_USER_TAGS, function(e) {
                return t.TAGS[e] && t.TAGS[e].n;
            }), d.nubbies[t.FILTER_KEY_USER_TAGS].default = l, d.nubbies[t.FILTER_KEY_COLOR_HEX] = function(t) {
                return "#" + t;
            }, d.nubbies[t.FILTER_KEY_COLOR_HEX].default = function() {
                var e = {};
                return e[t.FILTER_KEY_COLOR_HEX] = void 0, e[t.FILTER_KEY_COLOR_RANGE] = void 0, 
                e;
            }, d.nubbies[t.FILTER_KEY_RANK] = function(e) {
                var i = [];
                return "all" === e ? !1 : (t.RANKS.forEach(function(t) {
                    -1 !== e.indexOf(t.value) && i.push(t.label);
                }), i.join(", "));
            }, d.nubbies[t.FILTER_KEY_RANK].default = "all", d.nubbies[t.FILTER_KEY_SEARCH] = function(t) {
                return e("#site-content").find(".js-discover-search").val(t), t && t.trim() || void 0;
            }, d._view.on("postrender", function(t) {
                e("#site-content").toggleClass("has-breadcrumbs", !!t.find(".js-crumb").length);
            }), d.bind(o), r.then(function(i) {
                e.extend(!0, t, {
                    SCHOOLS: i.search_schools,
                    BRANDS: i.search_brands,
                    TOOLS: i.search_tools,
                    TAGS: i.search_tags
                }), d.render(o.data());
            });
        }
    };
}), define("lib/infinitescroll", [ "jquery", "log" ], function(t, e) {
    "use strict";
    function i(t) {
        t();
    }
    function n(t) {
        var e, i;
        return t.is(s) ? (e = window.innerHeight || s.height(), i = a.height() - e - s.scrollTop()) : (e = t.prop("clientHeight"), 
        i = t.prop("scrollHeight") - e - t.scrollTop()), i / e;
    }
    function o(e) {
        var o = "window" === e ? s : t(e);
        return function() {
            var t, r = n(o);
            for (t in c[e]) r <= Number(t) && c[e][t].wrapped.forEach(i);
        };
    }
    function r(i, n, r) {
        function a() {
            if (!a.blocking) {
                a.blocking = !0;
                var t = n.apply(null, arguments);
                t && "function" == typeof t.then ? t.then(function() {
                    a.blocking = !1, l[r]();
                }, function(t) {
                    t instanceof Error && e.warn(t);
                }) : a.blocking = !1;
            }
        }
        "function" == typeof i && (r = n, n = i, i = 1), r = r || "window", i = Number(i).toString();
        var u, d = "window" === r ? s : t(r);
        c[r] || (c[r] = {}, l[r] = o(r), d.on("scroll", l[r])), u = c[r][i], u || (u = c[r][i] = {
            wrapped: [],
            original: []
        }), u.original.push(n), u.wrapped.push(a), l[r]();
    }
    var s = t(window), a = t(document), l = {}, c = {};
    return r.remove = function(e, i) {
        i = i || "window";
        var n, o, r, a = "window" === i ? s : t(i);
        for (n in c[i]) o = c[i][n], r = o.original.indexOf(e), ~r && (o.original.splice(r, 1), 
        o.wrapped.splice(r, 1), o.original.length || delete c[i][n]);
        Object.keys(c[i]).length || (a.off("scroll", l[i]), delete c[i]);
    }, r.check = function(t) {
        t = t || "window", l[t]();
    }, r;
}), define("lib/gaq", {
    page: function(t) {
        try {
            void 0 !== _gaq && _gaq.push([ "_trackPageview", t || location.href ]);
        } catch (e) {}
    },
    event: function() {
        try {
            if ("undefined" != typeof _gaq) {
                var t = Array.prototype.slice.call(arguments);
                t.unshift("_trackEvent"), _gaq.push(t);
            }
        } catch (e) {}
    },
    customVar: function(t, e, i) {
        if (t && e && void 0 !== i) try {
            if ("undefined" != typeof _gaq) {
                var n = Array.prototype.slice.call(arguments);
                n.unshift("_setCustomVar"), _gaq.push(n);
            }
        } catch (o) {}
    }
}), define("lib/picturefill", [ "jquery" ], function(t) {
    "use strict";
    var e = window.matchMedia || window.msMatchMedia, i = function() {
        var i = t(this), n = i.find("div[data-src]");
        return n.length ? (e && (n = n.first().add(n.filter(function() {
            var i = t(this).data("media");
            return i && e(i).matches;
        })).last()), i.attr("data-rendered", "rendered"), void t("<img>", {
            alt: i.data("alt"),
            src: n.data("src"),
            "class": n.data("class"),
            title: n.data("title"),
            "data-pin-nopin": "pin"
        }).appendTo(i)) : void i.find("img").remove();
    };
    return t.fn.picturefill = function() {
        return this.find("div[data-picture]:not([data-rendered])").each(i), this;
    };
}), define("be/trait/fatclick", [], function() {
    "use strict";
    function t(t) {
        var i = t.data.touch, n = t.originalEvent.changedTouches[0];
        if (!(Math.sqrt(Math.pow(i.pageX - n.pageX, 2) + Math.pow(i.pageY - n.pageY, 2)) > e)) {
            var o = this.$view.find("a:visible").first().get(0);
            o.click ? o.click() : window.location = o.href;
        }
    }
    var e = 30, i = 300;
    return {
        fatclick: function(e) {
            if (e = e || this.$view) {
                var n = t.bind(this);
                e.on("touchstart", function(t) {
                    function o() {
                        e.off({
                            touchend: n,
                            touchcancel: o
                        });
                    }
                    e.one("touchend", {
                        touch: t.originalEvent.changedTouches[0]
                    }, n).on("touchmove", o).on("touchcancel", o), setTimeout(o, i);
                });
            }
        }
    };
}), define("be/View/Cover", [ "jquery", "nbd/View", "lib/picturefill", "be/trait/fatclick" ], function(t, e, i, n) {
    "use strict";
    var o = e.extend({
        init: function(e) {
            this.$view = e instanceof t ? e : t(".project-cover[data-id=" + e + "]");
        },
        rendered: function() {
            this.$view.picturefill(), this.fatclick(), this.$view.on("mouseenter mouseleave", ".cover-name-link, .cover-img, .controls-overlay, .edit-icon", this.toggleHover);
        },
        toggleHover: function(e) {
            t(this).closest(".project-cover").toggleClass("hover", "mouseenter" === e.type);
        },
        destroy: function() {
            this.$view.off("mouseenter mouseleave", ".cover-name-link, .cover-img, .controls-overlay, .edit-icon", this.toggleHover), 
            this._super();
        }
    }).mixin(n);
    return o;
}), define("be/onhistory", [ "vendor/misc/history", "lib/gaq" ], function(t, e) {
    "use strict";
    return function(i, n) {
        if (t.enabled) {
            var o = function(o) {
                var r = "function" == typeof i ? i.call(this) : i;
                e.page(o), t[(n ? "replace" : "push") + "State"](r || {}, document.title, o);
            }, r = function(t) {
                if (!(0 !== t.button || t.altKey || t.ctrlKey || t.metaKey || t.shiftKey)) {
                    var e = t.currentTarget.href;
                    window.location.href !== e && (t.preventDefault(), o.call(this, e));
                }
            };
            return r.submit = o, r;
        }
    };
}), define("be/View/HistoryLink", [ "nbd/Class", "vendor/misc/history", "be/onhistory" ], function(t, e, i) {
    "use strict";
    var n = t.extend({
        init: function(t, n, o) {
            this.hijack = i(function() {
                var t = {};
                return t[n] = {
                    current_data: e.getState().data,
                    current_title: document.title,
                    current_url: window.location.href
                }, t;
            }, o), this.$links = t.on("click", this.hijack);
        },
        redirect: function(t) {
            this.hijack && this.hijack.submit(t);
        },
        destroy: function() {
            this.$links.off("click", this.hijack), this.$links = null;
        }
    });
    return n;
}), define("discover/lib/historical", [ "nbd/util/media", "vendor/misc/history", "be/View/HistoryLink" ], function(t, e, i) {
    "use strict";
    return {
        bindHistory: function() {
            t.is("desktop") && this.makeHistory.apply(this, arguments), Array.prototype.unshift.call(arguments, this), 
            t.on("desktop:enter", Function.prototype.bind.apply(this.makeHistory, arguments), this).on("desktop:exit", function() {
                this._history && (this._history.destroy(), this._history = null);
            }, this);
        },
        unbindHistory: function() {
            this._history && (this._history.destroy(), this._history = null), t.off(null, null, this);
        },
        makeHistory: function(t, n, o) {
            this._history = e.enabled ? new i(t, n, o) : null;
        }
    };
}), define("discover/View/Wip", [ "nbd/View/Element", "be/trait/fatclick", "discover/lib/historical", "lib/picturefill" ], function(t, e, i) {
    "use strict";
    var n = t.extend({
        init: function(t) {
            this._super.apply(this, arguments), this.$view = t;
        },
        rendered: function() {
            this.$view.picturefill(), this.fatclick(), this.bindHistory(this.$view.find(".wip-action"), "wip");
        },
        destroy: function() {
            this.unbindHistory(), this._super();
        },
        deletedRevision: function(t) {
            var e = this.$view.find(".gallery-stats-revision-count"), i = parseFloat(e.text()), n = this.$view.find(".wip-revisions-count"), o = 1 === i ? "Revision" : "Revisions", r = i - 1;
            e.text(r), n.text(r + " " + o), this.$view.find("[data-revision_id=" + t + "]").remove();
        }
    }).mixin(e).mixin(i);
    return n;
}), define("be/Controller/Dialog", [ "nbd/Controller/Responsive" ], function(t) {
    "use strict";
    return t;
}), define("lib/keyboard", [ "jquery", "nbd/Class" ], function(t, e) {
    "use strict";
    var i = new (e.extend({
        listeners: null,
        globals: null,
        ignoredElements: {
            INPUT: !0,
            TEXTAREA: !0
        },
        init: function(e) {
            e = e || {}, this.globals = e.global || {}, this.listeners = [], this.ignoredElements = t.extend({}, this.ignoredElements), 
            this.addListener = this.addListener.bind(this), this.appendListener = this.appendListener.bind(this), 
            this.removeListener = this.removeListener.bind(this), this.addGlobal = this.addGlobal.bind(this), 
            this.keydownHandler = this.keydownHandler.bind(this), t(document.body).on("keydown", this.keydownHandler);
        },
        destroy: function() {
            t(document.body).off("keydown", this.keydownHandler);
        },
        translate: function(e, i) {
            function n(t, e) {
                return function(i) {
                    var n = t.map(function(t) {
                        return t ? t.toLowerCase() + "Key" : null;
                    }).reduce(function(t, e) {
                        return t && (e ? i.originalEvent[e] : !0);
                    }, !0);
                    return n ? e.call(this, i) : void 0;
                };
            }
            var o, r, s, a = /^((?:(?:meta|shift|ctrl|alt)-)*)(.+)$/i;
            i = i || {};
            for (o in e) if (e.hasOwnProperty(o)) {
                if (s = a.exec(o), !s) continue;
                r = this.constructor.keyCodes[s[2].toLowerCase()], r && (i[r] = i[r] || t.Callbacks("unique stopOnFalse"), 
                i[r].add(s[1] ? n(s[1].split("-"), e[o]) : e[o]));
            }
            return i;
        },
        addListener: function(t) {
            this.listeners.push(this.translate(t));
        },
        appendListener: function(t) {
            this.listeners.length || this.listeners.push({}), this.translate(t, this.listeners[this.listeners.length - 1]);
        },
        removeListener: function() {
            this.listeners.pop();
        },
        addGlobal: function(t) {
            this.translate(t, this.globals);
        },
        keydownHandler: function(t) {
            var e = this.listeners.length ? this.listeners[this.listeners.length - 1] : {};
            (e.hasOwnProperty(t.which) || this.globals.hasOwnProperty(t.which)) && (!e[t.which] || !this.constructor.bypassCodes[t.which] && this.ignoredElements[t.target.tagName] || e[t.which].fire(t), 
            this.globals[t.which] && this.globals[t.which].fire(t));
        },
        keyupHandler: function() {}
    }, {
        keyCodes: {
            backspace: 8,
            tab: 9,
            enter: 13,
            shift: 16,
            ctrl: 17,
            alt: 18,
            pause: 19,
            capslock: 20,
            escape: 27,
            pageup: 33,
            pagedown: 34,
            end: 35,
            home: 36,
            left: 37,
            up: 38,
            right: 39,
            down: 40,
            insert: 45,
            "delete": 46,
            "0": 48,
            "1": 49,
            "2": 50,
            "3": 51,
            "4": 52,
            "5": 53,
            "6": 54,
            "7": 55,
            "8": 56,
            "9": 57,
            a: 65,
            b: 66,
            c: 67,
            d: 68,
            e: 69,
            f: 70,
            g: 71,
            h: 72,
            i: 73,
            j: 74,
            k: 75,
            l: 76,
            m: 77,
            n: 78,
            o: 79,
            p: 80,
            q: 81,
            r: 82,
            s: 83,
            t: 84,
            u: 85,
            v: 86,
            w: 87,
            x: 88,
            y: 89,
            z: 90,
            f1: 112,
            f2: 113,
            f3: 114,
            f4: 115,
            f5: 116,
            f6: 117,
            f7: 118,
            f8: 119,
            f9: 120,
            f10: 121,
            f11: 122,
            f12: 123,
            ";": 186,
            "=": 187,
            ",": 188,
            "-": 189,
            ".": 190,
            "/": 191,
            "`": 192,
            "[": 219,
            "\\": 220,
            "]": 221,
            "'": 222
        },
        bypassCodes: {
            "16": !0,
            "17": !0,
            "18": !0,
            "19": !0,
            "20": !0,
            "27": !0,
            "45": !0,
            "112": !0,
            "113": !0,
            "114": !0,
            "115": !0,
            "116": !0,
            "117": !0,
            "118": !0,
            "119": !0,
            "120": !0,
            "121": !0,
            "122": !0,
            "123": !0
        }
    }))();
    return {
        on: i.addListener,
        off: i.removeListener,
        add: i.appendListener,
        global: i.addGlobal
    };
}), define("be/View/Dialog/Popup", [ "nbd/util/extend", "be/View/Dialog", "lib/keyboard" ], function(t, e, i) {
    "use strict";
    var n = e.extend({
        template: function(e) {
            return this._super(t({
                dialogType: "desktop",
                blocking: !0,
                toolbar: !0
            }, e));
        },
        render: function() {
            return n.Z_INDEX += 2, this._zIndex = n.Z_INDEX, this._super.apply(this, arguments);
        },
        rendered: function() {
            this._super(), this.$view.filter(".blocking-div").on("click", this.hide.bind(this));
        },
        position: function() {
            if (this.$view) {
                var t = this.$view.filter(".popup"), e = window.innerHeight || document.documentElement.offsetHeight, i = (e - t.outerHeight()) / 2;
                t.css({
                    "z-index": this._zIndex,
                    "margin-left": -~~(t.width() / 2) + "px",
                    top: Math.max(0, i)
                }).addClass("shown"), this.$view.filter(".blocking-div").css("z-index", this._zIndex - 1);
            }
        },
        show: function() {
            return this.$view ? (i.on({
                escape: this.hide.bind(this)
            }), this.$view.parent().is(document.body) || this.$view.appendTo(document.body), 
            this._super()) : void 0;
        },
        hide: function() {
            return this.$view ? (i.off(), this.$view.detach(), this._super()) : void 0;
        },
        toggle: function() {
            var t = this.$view.parent().is(document.body);
            return this[t ? "hide" : "show"]();
        }
    }, {
        Z_INDEX: 250
    });
    return n;
}), define("require/hgn!templates/html", [ "hogan" ], function(t) {
    var e = new t.Template({
        code: function(t, e, i) {
            var n = this;
            return n.b(i = i || ""), n.b(n.t(n.f("html", t, e, 0))), n.b("\n"), n.fl();
        },
        partials: {},
        subs: {}
    }, "", t), i = function(t, e) {
        for (var i in e) t[i] = e[i];
        return t;
    }, n = {
        "": null
    }, o = function() {
        return e.render.apply(e, arguments);
    };
    return e.ri = function(t, e, o) {
        return this.r(t, i(n, e), o);
    }, o.template = e, o;
}), define("be/Modal", [ "nbd/trait/promise", "nbd/util/extend", "be/Controller/Dialog", "be/View/Dialog/Layover", "be/View/Dialog/Popup", "hgn!templates/html" ], function(t, e, i, n, o, r) {
    "use strict";
    var s = {
        mustache: r,
        templateData: function() {
            return e({
                buttons: [ {
                    label: "Okay",
                    classes: [ "form-button-default", "js-confirm" ]
                }, {
                    label: "Cancel",
                    classes: [ "form-button-cancel", "js-cancel" ]
                } ]
            }, this._model.data());
        },
        rendered: function() {
            this._super(), this.$view.on("click", ".js-confirm", this.trigger.bind(this, "confirm")).on("click", ".js-cancel", this.trigger.bind(this, "cancel"));
        }
    }, a = n.extend(s), l = o.extend(s), c = i.extend({
        init: function() {
            this._super.apply(this, arguments), this._view.on("confirm", function() {
                this.confirm.apply(this, arguments);
            }, this).on("hide", function() {
                this.cancel.apply(this, arguments);
            }, this);
        },
        confirm: function() {
            this.resolve();
        },
        cancel: function() {
            this.reject();
        },
        render: function() {
            this._super(document.body), this._view.position();
        }
    }, {
        VIEW_CLASS: {
            phone: a,
            tablet: l,
            desktop: l
        }
    }).mixin(t);
    return c;
}), define("be/modal/simple", [ "be/Modal" ], function(t) {
    "use strict";
    return function(e, i) {
        var n = new t(e), o = n.destroy.bind(n);
        return "function" == typeof i && (n.confirm = function r() {
            function t() {
                r.blocking = !1;
            }
            if (!r.blocking) {
                r.blocking = !0;
                var e = i();
                e && "function" == typeof e.then ? e.then(n.resolve.bind(n)).then(t, t) : (n.resolve(e), 
                t());
            }
        }), n.render(), n.then(o, o), n;
    };
}), define("be/View/Follow", [ "jquery", "nbd/View", "be/modal/simple" ], function(t, e, i) {
    "use strict";
    var n = e.extend({
        init: function(t, e) {
            this.$view = t, this._model = e, this.rendered();
        },
        destroy: function() {
            this._model.off(null, null, this);
        },
        rendered: function() {
            var e = this;
            this._model.on("following", function(e) {
                this.$view.toggleClass("following", e), this.$view.data("following", e), e && this.$view.addClass("following-hold").one("mouseleave", function() {
                    t(this).removeClass("following-hold");
                });
            }, this), this.$view.on("click", function() {
                var i = t(this).data(), n = {
                    backfill: i.backfill
                };
                e._controller.follow(n);
            });
        },
        updateCount: function(t) {
            var e = this.$view.parent().find(".gallery-stats-followers-count"), i = +e.html() + t;
            e.html(i > 0 ? i : 0);
        }
    }, {
        rateLimitPopup: function(t) {
            var e = t ? t + "<br /><br />" : "";
            i({
                title: "Following Limit",
                html: e + 'Please read about our <a href="https://help.behance.net/entries/48445480-Following-limits-on-Behance">following limits</a>.',
                buttons: []
            });
        }
    });
    return n;
}), define("be/xhr", [ "lib/xhr", "nbd/trait/promise" ], function(t, e) {
    "use strict";
    function i(t) {
        var i = new e();
        return require([ "auth/activatePopup" ], i.resolve.bind(i), function() {}), i.then(function(e) {
            return e(t);
        });
    }
    return function(e) {
        var n, o;
        return o = t(e), n = o.then(null, function(o) {
            return i(o).then(function() {
                var i = t(e);
                return i.then(function() {
                    setTimeout(function() {
                        window.location.reload();
                    }, 500);
                }), n.abort = i.abort, i;
            });
        }), n.abort = o.abort, n;
    };
}), define("be/Controller/Follow", [ "jquery", "nbd/Controller", "nbd/Model", "nbd/trait/pubsub", "be/View/Follow", "lib/gaq", "be/xhr" ], function(t, e, i, n, o, r, s) {
    "use strict";
    var a = e.extend({
        init: function(t, e, n) {
            this.views = [], this.type = n || "user", this._model = new i(t, {
                blocking: !1,
                following: e || !1
            }), this.listenTo(this._model, "all", this.trigger);
        },
        _initView: function(t) {
            var e = new o(t, this._model);
            return e._controller = this, e;
        },
        add: function(t) {
            if (t.data("befollow")) return this;
            var e = this._initView(t);
            return t.data("befollow", e), this.views.push(e), this;
        },
        update: function(t) {
            var e = t ? 1 : -1;
            this.views.forEach(function(t) {
                t.updateCount(e);
            });
        },
        follow: function(t) {
            function e() {
                n.set("blocking", !1);
            }
            if (!this._model.get("blocking")) {
                var i, n = this._model, a = this._model.get("following"), l = this.constructor.url(this.type, this._model.id()), c = a ? "DELETE" : "POST";
                return this._model.set("blocking", !0), i = s({
                    url: l,
                    type: c,
                    data: t
                }).then(function() {
                    n.set("following", !a), r.event("follow", window.location.pathname, window.location.search);
                }, function(t) {
                    var e;
                    429 === t.status && (t.responseJSON && t.responseJSON.messages && (e = t.responseJSON.messages.pop().message), 
                    o.rateLimitPopup(e));
                }), this.trigger("request", i), i.then(e, e), i;
            }
        },
        destroy: function() {
            this.views.forEach(function(t) {
                t.destroy();
            }), this.views = [], this._model.destroy(), this._model = null;
        }
    }, {
        RELATIONS_URL: "/relations",
        url: function(t, e) {
            return this.RELATIONS_URL + "/" + t + "/" + e + window.location.search;
        }
    }).mixin(n);
    return a;
}), define("be/follow", [ "jquery", "nbd/util/extend", "nbd/trait/pubsub", "be/Controller/Follow" ], function(t, e, i, n) {
    "use strict";
    var o = {
        user: {},
        collection: {},
        site: {},
        team: {}
    }, r = function(t, e, i) {
        var o = new n(e, i, t);
        return this.listenTo(o, "following", function(i) {
            this.trigger("following", e, i, t);
        }).listenTo(o, "request", function(i) {
            this.trigger("request", e, i, t);
        }), o;
    }, s = function(t, e, i) {
        var n = t.data(e) || +t.attr(e), s = t.data("following");
        n && (null == s && (s = t.hasClass("following")), o[i][n] = (o[i][n] || r.call(a, i, n, s)).add(t));
    }, a = {
        init: function(t) {
            this.users(t), this.collections(t), this.sites(t), this.teams(t);
        },
        users: function(e) {
            t(".action-follow-user", e).each(function() {
                s(t(this), "followee", "user");
            });
        },
        collections: function(e) {
            t(".js-action-follow-collection", e).each(function() {
                s(t(this), "list_id", "collection");
            });
        },
        sites: function(e) {
            t(".action-follow-site", e).each(function() {
                s(t(this), "site_id", "site");
            });
        },
        teams: function(e) {
            t(".js-action-follow-team", e).each(function() {
                s(t(this), "team_id", "team");
            });
        }
    };
    return e(a, i), a;
}), define("be/trait/form/list", [ "jquery" ], function(t) {
    "use strict";
    function e(e, i) {
        var n = t("<select>", {
            name: e[0].id,
            multiple: i || !1
        }).hide();
        return i || t("<option>", {
            selected: !0,
            disabled: !0
        }).appendTo(n), e.children("li").each(function() {
            t("<option>", {
                value: t(this).data("value")
            }).appendTo(n);
        }), n.insertAfter(e), n;
    }
    function i(i, n) {
        i.each(function() {
            var o = e(t(this).on("click", ">li", function() {
                var e = t(this), r = e.data("value"), s = o.find('[value="' + r + '"]'), a = !s.prop("selected");
                s.prop("selected", a), a = s.prop("selected"), (n ? i.find('[data-value="' + r + '"]') : e.siblings().removeClass("active").end()).toggleClass("active", a);
            }), n);
        });
    }
    return {
        selectList: function(t) {
            i(t || this.$view.find("ul,ol"), !1);
        },
        multiList: function(t) {
            i(t || this.$view.find("ul,ol"), !0);
        }
    };
}), define("lib/form/decompose", [], function() {
    "use strict";
    function t(t) {
        return t.reduce(function(t, e) {
            var i = t[e.name];
            return t[e.name] = i ? [].concat(i, e.value) : e.value, t;
        }, {});
    }
    return t;
}), define("lib/form", [ "nbd/Class", "nbd/trait/pubsub", "nbd/trait/promise", "lib/form/decompose", "lib/xhr" ], function(t, e, i, n, o) {
    "use strict";
    var r = function(t) {
        switch (t.which) {
          case 1:
          case 13:
          case 32:
            this.$form.submit();
        }
    }, s = function(t) {
        t && t.preventDefault();
        var e = new i(), o = {
            url: this.$form.attr("action"),
            type: this.$form.attr("method") || "POST",
            data: n(this.$form.serializeArray())
        };
        return e.resolve(o), this._submit(e);
    }, a = function(t) {
        var e, n = new i(), r = n.thenable();
        return e = this.commit.call(r, t), n.resolve(e === r ? o(t) : e), n;
    }, l = t.extend({
        init: function(t) {
            this.$form = t, this._normalizeSubmitter = r.bind(this), this._initChain = s.bind(this), 
            this._bindSubmission();
        },
        destroy: function() {
            this._unbindSubmission(), this.$form = null;
        },
        commit: function() {
            return this;
        },
        submit: function() {
            return this._initChain();
        },
        _submit: function(t) {
            return this.trigger("before"), t = t.then(a.bind(this)), t.then(this.trigger.bind(this, "success"), this.trigger.bind(this, "error")), 
            t;
        },
        _bindSubmission: function() {
            this.$form.on("click keydown", ".form-submit:not([type=submit])", this._normalizeSubmitter).on("submit", this._initChain);
        },
        _unbindSubmission: function() {
            this.$form.off("click keydown", ".form-submit:not([type=submit])", this._normalizeSubmitter).off("submit", this._initChain);
        }
    }).mixin(e);
    return l;
}), define("lib/showMessages", [ "jquery" ], function(t) {
    "use strict";
    function e(e, i, n) {
        n = t.extend({
            fade: !0,
            floating: !1,
            prepend: !1
        }, n);
        var o = e.find(".messages"), r = [];
        o.length || (o = t('<div class="messages"></div>').hide().addClass(n.classes || ""), 
        n.floating && o.addClass("messages-floating"), n.prepend ? o.prependTo(e) : o.appendTo(e)), 
        i.forEach(function(t) {
            t.type = t.type || "message";
            var e;
            switch (t.type) {
              case "error":
              case "message":
              case "success":
                break;

              default:
                throw '"' + t.type + '" is not a valid message type';
            }
            t.fade === !1 && (n.fade = !1), e = '<div class="' + t.type + '"><span class="icon-status-' + t.type + ' icon sprite-site-elements"></span>' + t.message + "</div>", 
            r.push(e);
        }), o.html(r.join("")).show(), n.fade && o.delay(5e3).fadeOut(1e3);
    }
    return e;
}), define("be/handleResponse", [], function() {
    "use strict";
    function t(t, e, i) {
        return "string" == typeof e && (e.messages = [ {
            type: "success",
            message: e
        } ]), "string" == typeof e.responseText && (e = e.responseJSON), e || (e = {}, i = !0), 
        !e.messages && i && (e.messages = t), e;
    }
    function e(e, i) {
        var n = [ {
            type: "success",
            message: "Success"
        } ];
        return t(n, e, i);
    }
    function i(e, i) {
        var n = [ {
            type: "error",
            message: "Unknown server error"
        } ];
        return t(n, e, i);
    }
    return {
        success: e,
        error: i
    };
}), define("be/form/errors", [ "jquery", "has", "nbd/util/media", "lib/showMessages", "lib/tooltip", "be/handleResponse" ], function(t, e, i, n, o, r) {
    "use strict";
    function s(t) {
        t.find("." + b.join(".")).remove(), t.find(v).removeClass(v);
    }
    function a(t, e) {
        e = e.errors || e;
        var i = l();
        Object.keys(e).forEach(function(n) {
            var o = t.find("[name=" + n + "]");
            o.length && c(o, e[n], i);
        });
    }
    function l() {
        return i.is("desktop") ? b : m;
    }
    function c(t, e, i) {
        o(t, e, i || l());
    }
    function u() {
        return (e("input-event") ? "input" : "keypress") + " change";
    }
    function d(e) {
        return function() {
            e.on(u(), "input, textarea, select", function() {
                h(t(this));
            });
        };
    }
    function p(e) {
        e.one(u(), function() {
            h(t(this));
        });
    }
    function h(t) {
        var e = t.closest(".form-item");
        e.children(".form-error").remove(), e.removeClass("form-item-error");
    }
    function f(e) {
        return function(i) {
            return i instanceof Error ? void console.error(i) : (console.warn(i), i = r.error(i), 
            i.messages && n(e, i.messages), s(e), a(e, i), void t(document.body).animate({
                scrollTop: 0
            }, 500));
        };
    }
    var b = [ "form-error" ], m = [ "form-error", "form-error-right" ], v = ".form-item-error";
    return {
        display: f,
        cleanup: d,
        tooltip: c,
        removeOnInput: p,
        removeErrors: h
    };
}), define("lib/validate", [], function() {
    "use strict";
    function t(t) {
        var e, i, n = !1, o = 0, r = [];
        for (e = 0; e < t.length; ++e) "[" !== t[e] ? "]" !== t[e] ? "," !== t[e] || n || (i = t.substring(o, e), 
        i && r.push(i), o = e + 1) : n = !1 : n = !0;
        return i = t.substring(o), i && r.push(i), r;
    }
    function e(n, o) {
        var r;
        return delete e.message, o = o ? t(o) : [], n = null === n || void 0 === n ? "" : n, 
        r = o.indexOf("optional"), r > -1 ? (o.splice(r, r + 1), !n || o.every(i, n)) : o.every(i, n);
    }
    var i, n = RegExp.prototype.test, o = {
        Generic: {
            test: n.bind(/^[^<>]+$/),
            message: "This field may not contain less than signs (&lt) or greater than signs (&gt;)"
        },
        AlphaNumeric: {
            test: n.bind(/^[0-9A-Za-z\u00C0-\u00FF\u0100-\u0259\u0386\u0388-\u04E9\u05D0-\u06D3\u1E80-\u200F]+$/),
            message: "This field must contain only alphanumeric characters"
        },
        Alpha: {
            test: n.bind(/^[A-Za-z\u00C0-\u00FF\u0100-\u0259\u0386\u0388-\u04E9\u05D0-\u06D3\u1E80-\u200F]+$/),
            message: "This field must contain only alpha characters"
        },
        AlphaDash: {
            test: n.bind(/^[A-Za-z\u00C0-\u00FF\u0100-\u0259\u0386\u0388-\u04E9\u05D0-\u06D3\u1E80-\u200F\-]+$/),
            message: "This field must contain only alpha characters or dashes"
        },
        ANDash: {
            test: n.bind(/^[0-9A-Za-z\u00C0-\u00FF\u0100-\u0259\u0386\u0388-\u04E9\u05D0-\u06D3\u1E80-\u200F\-]+$/),
            message: "This field must contain only alphanumeric characters or dashes"
        },
        ANUnder: {
            test: n.bind(/^[0-9A-Za-z\u00C0-\u00FF\u0100-\u0259\u0386\u0388-\u04E9\u05D0-\u06D3\u1E80-\u200F_]+$/),
            message: "This field must contain only alphanumeric characters with or without underscores"
        },
        ANUSpace: {
            test: n.bind(/^[0-9A-Za-z\u00C0-\u00FF\u0100-\u0259\u0386\u0388-\u04E9\u05D0-\u06D3\u1E80-\u200F_ ]+$/),
            message: "This field must contain only alphanumeric characters with or without underscores and spaces"
        },
        ANEmail: {
            test: n.bind(/^([_\dA-Za-z\u00C0-\u00FF\u0100-\u0259\u0386\u0388-\u04E9\u05D0-\u06D3\u1E80-\u200F\-]+|[\w\.\+\-]+@(([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9\-]*[a-zA-Z0-9])\.)*([A-Za-z0-9]|[A-Za-z0-9][A-Za-z0-9\-]*[A-Za-z0-9]))$/),
            message: "This field must contain a valid username or email"
        },
        Integer: {
            test: n.bind(/^\-?\d+$/),
            message: "This field must only contain numbers, without any spaces"
        },
        CreditCardNumber: {
            test: n.bind(/^\d{13,16}$/),
            message: "This field must only contain numbers, without any spaces or dashes"
        },
        Decimal: {
            test: n.bind(/^\-?\d+(\.\d+)?$/),
            message: "This field must be a valid decimal number"
        },
        Date: {
            test: n.bind(/^\d{1,2}\-\d{1,2}-\d{4}( \d{2}:\d{2}:\d{2})?$/),
            message: "This field must be a valid date"
        },
        SqlDate: {
            test: n.bind(/^\d{4}\-\d{2}\-\d{2}$/),
            message: "This field must be a valid date"
        },
        SqlDateTime: {
            test: n.bind(/^\d{4}\-\d{2}\-\d{2}\s\d{2}\:\d{2}\:\d{2}$/),
            message: "This field must be a valid datetime"
        },
        SlashDate: {
            test: n.bind(/^\d{1,2}\/\d{1,2}\/\d{4}$/),
            message: "This field must be a valid date"
        },
        Email: {
            test: n.bind(/^[\w\.\+\-]+@(([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9\-]*[a-zA-Z0-9])\.)*([A-Za-z0-9]|[A-Za-z0-9][A-Za-z0-9\-]*[A-Za-z0-9])$/),
            message: "This field must be a valid email address"
        },
        Name: {
            test: n.bind(/^[\wA-Za-z\u00C0-\u00FF\u0100-\u0259\u0386\u0388-\u04E9\u05D0-\u06D3\u1E80-\u200F\'. \-]{2,50}$/),
            message: "This field must be a valid name"
        },
        Username: {
            test: n.bind(/^[A-Za-z0-9_\-]+$/),
            message: "This field contains invalid characters. Please use only letters, numbers, dash or underscore characters."
        },
        Password: {
            test: n.bind(/^\S{6,32}$/),
            message: "This field must be between 6 and 32 characters"
        },
        Address: {
            test: n.bind(/^[\w0-9A-Za-z\u00C0-\u00FF\u0100-\u0259\u0386\u0388-\u04E9\u05D0-\u06D3\u1E80-\u200F# \' \.\,\&\-]+$/),
            message: "This field must be a valid address"
        },
        City: {
            test: n.bind(/^[\wA-Za-z\u00C0-\u00FF\u0100-\u0259\u0386\u0388-\u04E9\u05D0-\u06D3\u1E80-\u200F \' \. \-]+$/),
            message: "This field must be a valid city"
        },
        Province: {
            test: n.bind(/^[\wA-Za-z\u00C0-\u00FF\u0100-\u0259\u0386\u0388-\u04E9\u05D0-\u06D3\u1E80-\u200F ]+$/),
            message: "This field must be a valid province"
        },
        IntZip: {
            test: n.bind(/^[A-Za-z0-9#\. \-]+$/),
            message: "This field must be a valid zipcode"
        },
        UsZip: {
            test: n.bind(/^\d{5}(\-\d{4})?$/),
            message: "This field must be a valid US zipcode"
        },
        Country: {
            test: n.bind(/^[\wA-Za-z\u00C0-\u00FF\u0100-\u0259\u0386\u0388-\u04E9\u05D0-\u06D3\u1E80-\u200F\'. \-]{2,50}$/),
            message: "This field must be a valid country"
        },
        IntPhone: {
            test: n.bind(/^[0-9\+ \(\)\#\-]+$/),
            message: "This field must be a valid phone"
        },
        UsPhone: {
            test: n.bind(/^\d{3}\-\d{3}\-\d{4}$/),
            message: "This field must be a valid US phone"
        },
        PicExt: {
            test: n.bind(/^((jpg)|(jpeg)|(png)|(gif)){1}$/),
            message: "This field must be a valid image extension"
        },
        VideoExt: {
            test: n.bind(/^((mpg)|(mpeg)|(mov)|(avi)|(dv)|(qt)|(asf)|(flv)){1}$/),
            message: "This field must be a valid video extension"
        },
        Url: {
            test: n.bind(/^(http(?:s)?:\/\/|www.)[^<>]*$/),
            message: "This field must be a URL starting with http:// or www."
        },
        UrlExt: {
            test: n.bind(/^((?:https?):\/\/)?(?:(?:(?:[\w\.\-\+!$&\'\(\)*\+,;=_]|%[0-9a-f]{2})+:)*(?:[\w\.\-\+%!$&\'\(\)*\+,;=]|%[0-9a-f]{2})+@)?(?:[A-Za-z0-9_\-]+\.)(?:[A-Za-z0-9\-\._])+(?::\d+)?(?:[\/|\?](?:[\w#!:\.\?\+=&@$\'~*,;_\/\(\)\[\]\-]|%[0-9a-f]{2})*)?$/),
            message: "This field must be a valid URL"
        },
        Html: {
            test: function() {
                return !n.apply(/<((?!\/?span|\/?h1|\/?h2|\/?h3|\/?h4|\/?h5|\/?h6|\/?a|\/?b|\/?ol|\/?ul|\/?li|\/?i|\/?em(?!bed)|\/?p|\/?div|\/?br|\/?unb|\/?uni|\/?\s|\/?\>)[^\>]*\>)/i, arguments);
            },
            message: "This field must be properly formed HTML"
        },
        Twitter: {
            test: n.bind(/^[A-Za-z0-9_\-]{1,15}$/),
            message: "This field must be a valid twitter username (without the @ character)"
        },
        required: {
            test: n.bind(/.+/),
            message: "This field is required"
        },
        length: {
            test: function(t, e) {
                var i = /\[(,?\d+(?:,\d+)?)\]/.exec(e);
                return t = String(t).replace(/[\s]+/g, " "), i ? new RegExp("^.{" + i[1] + "}$").test(t) : !1;
            },
            message: function(t, e) {
                var i;
                return (i = /\[(\d+),(\d+)\]/.exec(e)) ? "Must be between " + i[1] + " and " + i[2] + " characters." : (i = /\[,(\d+)\]/.exec(e)) ? "Must be at most " + i[1] + " characters." : (i = /\[(\d+),\]/.exec(e)) ? "Must be at least " + i[1] + " characters." : (i = /\[(\d+)\]/.exec(e), 
                i ? "Must be exactly " + i[1] + " characters." : void 0);
            }
        }
    }, r = /(\w+)(.*)/;
    return i = function(t) {
        var i, n = r.exec(t);
        return n && (t = n[1], i = n[2]), o[t] && o[t].test ? (n = o[t].test(this, i), n || (e.message = "function" == typeof o[t].message ? o[t].message(this, i) : o[t].message), 
        n) : !0;
    }, e;
}), define("be/form/validator", [ "jquery", "lib/validate" ], function(t, e) {
    "use strict";
    function i(t) {
        return function(e) {
            var i = e.data, o = n(t.find("[data-validate]:not(:disabled)").toArray(), i);
            if (Object.keys(o).length) throw o;
            return e;
        };
    }
    function n(i, n) {
        return i.reduce(function(i, o) {
            var r = t(o), s = r.data("validate"), a = r.attr("name") || r.attr("id");
            return e(n[a], s) || (i[a] = e.message), i;
        }, {});
    }
    return i.elements = n, i;
}), define("be/form", [ "jquery", "nbd/trait/promise", "lib/form", "lib/form/decompose", "be/form/errors", "be/form/validator" ], function(t, e, i, n, o, r) {
    "use strict";
    var s = i.extend({
        init: function(t) {
            this.$context = t, this._super(t.is("form") ? t : t.find("form")), this.on("error", function(t) {
                o.display(this.$context)(t), o.cleanup(this.$context)();
            });
        },
        _submit: function(t) {
            return t = t.then(function(t) {
                return t.data && Object.keys(t.data).forEach(function(e) {
                    var i, n = t.data[e];
                    "string" == typeof n && (i = n.trim(), 0 === i.length && (t.data[e] = i));
                }), t;
            }).then(r(this.$context)), this._super(t);
        },
        _bindSubmission: function() {
            this.$context.on("click keydown", ".form-submit:not([type=submit]), .js-submit:not([type=submit])", this._normalizeSubmitter), 
            this.$form.on("submit", this._initChain);
        },
        _unbindSubmission: function() {
            this.$context.off("click keydown", ".form-submit:not([type=submit]), .js-submit:not([type=submit])", this._normalizeSubmitter), 
            this.$form.off("submit", this._initChain);
        }
    });
    return s;
}), define("require/hgn!templates/addToTalentSearch", [ "hogan" ], function(t) {
    var e = new t.Template({
        code: function(t, e, i) {
            var n = this;
            return n.b(i = i || ""), n.b('<form action="'), n.b(n.v(n.f("action", t, e, 0))), 
            n.b('" method="'), n.b(n.v(n.f("method", t, e, 0))), n.b('">'), n.b("\n" + i), n.b('  <ul id="searches" class="divided-list menu-section">'), 
            n.b("\n" + i), n.s(n.f("options", t, e, 1), t, e, 0, 118, 187, "{{ }}") && (n.rs(t, e, function(t, e, n) {
                n.b('    <li class="divided-item" data-value="'), n.b(n.v(n.f("id", t, e, 0))), 
                n.b('">'), n.b(n.v(n.f("title", t, e, 0))), n.b("</li>"), n.b("\n" + i);
            }), t.pop()), n.b("  </ul>"), n.b("\n" + i), n.b("  <div>"), n.b("\n" + i), n.b('    or <a href="/talent/create">Start a New Talent Search</a>'), 
            n.b("\n" + i), n.b("  </div>"), n.b("\n" + i), n.b("</form>"), n.b("\n"), n.fl();
        },
        partials: {},
        subs: {}
    }, "", t), i = function(t, e) {
        for (var i in e) t[i] = e[i];
        return t;
    }, n = {
        "": null
    }, o = function() {
        return e.render.apply(e, arguments);
    };
    return e.ri = function(t, e, o) {
        return this.r(t, i(n, e), o);
    }, o.template = e, o;
}), define("be/View/Dialog/AddToTalentSearch", [ "nbd/util/extend", "be/View/Dialog/Layover", "be/View/Dialog/Menu", "be/View/Dialog/Popup", "be/trait/form/list", "be/form", "hgn!templates/addToTalentSearch" ], function(t, e, i, n, o, r, s) {
    "use strict";
    var a = {
        mustache: s,
        templateData: function() {
            return t({
                title: "Add to Talent Search",
                classes: [ "list-popup" ],
                buttons: [ {
                    label: "Save",
                    classes: [ "form-button-default", "js-submit" ]
                }, {
                    label: "Cancel",
                    classes: [ "form-button-cancel", "js-cancel" ]
                } ]
            }, this._super());
        },
        rendered: function() {
            var t = new r(this.$view);
            t.commit = function(t) {
                var e, i, n = this._model.preselected(), o = Array.isArray(t.data.searches) ? t.data.searches : [ t.data.searches ];
                return o = o.filter(Boolean).map(Number), e = o.filter(function(t) {
                    return !~n.indexOf(+t);
                }), i = n.filter(function(t) {
                    return !~o.indexOf(t);
                }), this._controller.update({
                    add: e,
                    remove: i
                }).then(function(t) {
                    this._model.data().options.forEach(function(e) {
                        ~t.added.indexOf(e.id) ? e.is_discovered = !0 : ~t.removed.indexOf(e.id) && (e.is_discovered = e.is_shortlisted = e.is_recommended = !1);
                    });
                }.bind(this)).then(this.hide.bind(this)).then(function() {
                    var t = this._model.data(), e = t.options, i = [];
                    e.forEach(function(t) {
                        t.is_discovered && i.push(t.title);
                    }), this._controller.trigger("update", i);
                }.bind(this));
            }.bind(this), this._super(), this.multiList(), this._model.preselected().forEach(function(t) {
                this.$view.find("li[data-value=" + t + "]").click();
            }, this);
        }
    };
    return {
        desktop: n.extend(a).mixin(o),
        tablet: i.extend(a).mixin(o),
        phone: e.extend(a).mixin(o)
    };
}), define("be/Controller/Dialog/AddToTalentSearch", [ "lib/xhr", "nbd/Model", "be/Controller/Dialog/Roulette", "be/View/Dialog/AddToTalentSearch" ], function(t, e, i, n) {
    "use strict";
    var o = i.extend({
        endpoint: function() {
            return "/v2/jobs/discovered/" + this._model.id();
        },
        read: function() {
            return t(this.endpoint()).then(function(t) {
                this._model.set("options", t.jobs.sort(function(t, e) {
                    return e.is_discovered + e.is_shortlisted + e.is_recommended - (t.is_discovered + t.is_shortlisted + t.is_recommended);
                }));
            }.bind(this));
        },
        update: function(e) {
            return t({
                url: this.endpoint(),
                type: "PATCH",
                data: e
            });
        },
        render: function(t) {
            var e = this._super.bind(this);
            this.read().then(function() {
                return t;
            }).then(e);
        }
    }, {
        VIEW_CLASS: n,
        MODEL_CLASS: e.extend({
            preselected: function() {
                return this.get("options").map(function(t) {
                    return t.is_discovered || t.is_shortlisted || t.is_recommended ? t.id : void 0;
                }).filter(Boolean);
            }
        })
    });
    return o;
}), define("discover/View/User", [ "page_gates", "nbd/View/Element", "be/follow", "be/Controller/Dialog/AddToTalentSearch" ], function(t, e, i, n) {
    "use strict";
    var o = e.extend({
        init: function(t) {
            this._super.apply(this, arguments), this.$view = t;
        },
        rendered: function() {
            i.init(this.$view), t.talentsearch && this.talent();
        },
        talent: function() {
            var t = this.$view.find(".js-add-talent");
            t.length && (this.talent = new n(t.data("id")), this.talent.setContext(t));
        }
    });
    return o;
}), define("be/content", [ "jquery", "nbd/util/async", "be/View/Cover", "discover/View/Wip", "discover/View/User" ], function(t, e, i, n, o) {
    "use strict";
    function r(e) {
        var i = null;
        e.each(function() {
            var e = t(this), n = new d(e);
            n.rendered(), b.push(n), i = e.data("ordinal") || null;
        }), m.fireWith(e, [ i ]);
    }
    function s(t) {
        p = t, r(g.call(p.children(":not(.ignore-me)")));
    }
    function a() {
        return f = !1, h = b, b = [], e(function() {
            h.forEach(function(t) {
                t.destroy();
            }), h = [];
        }), p.children(":not(.ignore-me)").remove(), v.fire(), p;
    }
    function l(e) {
        var i = t(e);
        f && (a(), g.call(i)), r(i), p.append(i);
    }
    function c(t) {
        switch (t) {
          case "projects":
            return i;

          case "wips":
            return n;

          case "users":
            return o;
        }
    }
    var u, d, p, h, f = !1, b = [], m = new t.Callbacks(), v = new t.Callbacks(), g = function() {
        return this.first().addClass("first"), this;
    };
    return d = i, u = {
        init: s,
        render: l,
        clear: a,
        postview: m,
        postclear: v,
        clearNext: function() {
            f = !0;
        },
        setItem: function(t) {
            d = "string" == typeof t ? c(t) : t;
        },
        getItem: function() {
            return d;
        }
    };
}), define("be/spinner", [ "jquery", "vendor/misc/spin" ], function(t, e) {
    "use strict";
    var i = {
        lines: 30,
        length: 0,
        width: 2,
        radius: 9,
        corners: 0,
        speed: 2,
        trail: 100,
        hwaccel: !0,
        className: "spinner",
        zIndex: 2e9,
        top: "19px",
        left: "20px",
        opacity: "0"
    }, n = {
        init: function(e) {
            var i = t(".js-spin", e);
            return i.length || (i = n._generate()), i.toArray().map(n.create), i;
        },
        show: function() {
            n._$default || n._generate(), n._$default.appendTo(document.body);
        },
        hide: function() {
            n._$default && n._$default.detach();
        },
        _generate: function() {
            return n._$default = t('<div class="js-spin be-spinner">'), n.create(n._$default[0]), 
            n._$default;
        },
        create: function(n, o) {
            var r = new e(t.extend({}, i, o));
            return n && r.spin(n), r;
        }
    };
    return n;
}), define("be/decorator/waitsforimages", [ "jquery", "nbd/Promise" ], function(t, e) {
    "use strict";
    function i(i) {
        var n, o = i.find("img:not(.js-loaded)");
        return n = o.toArray().map(function(i) {
            var n = new Image(), o = new e(), r = function() {
                t(i).addClass("js-loaded"), o.resolve();
            };
            return n.src = i.src, n.addEventListener("load", r), n.addEventListener("error", r), 
            o;
        }), e.all(n);
    }
    return i;
}), function(t) {
    var e = document.documentElement, i = function() {};
    e.addEventListener ? i = function(t, e, i) {
        t.addEventListener(e, i, !1);
    } : e.attachEvent && (i = function(e, i, n) {
        e[i + n] = n.handleEvent ? function() {
            var e = t.event;
            e.target = e.target || e.srcElement, n.handleEvent.call(n, e);
        } : function() {
            var i = t.event;
            i.target = i.target || i.srcElement, n.call(e, i);
        }, e.attachEvent("on" + i, e[i + n]);
    });
    var n = function() {};
    e.removeEventListener ? n = function(t, e, i) {
        t.removeEventListener(e, i, !1);
    } : e.detachEvent && (n = function(t, e, i) {
        t.detachEvent("on" + e, t[e + i]);
        try {
            delete t[e + i];
        } catch (n) {
            t[e + i] = void 0;
        }
    });
    var o = {
        bind: i,
        unbind: n
    };
    "function" == typeof define && define.amd ? define("eventie/eventie", o) : t.eventie = o;
}(this), function(t) {
    function e(t) {
        "function" == typeof t && (e.isReady ? t() : r.push(t));
    }
    function i(t) {
        var i = "readystatechange" === t.type && "complete" !== o.readyState;
        if (!e.isReady && !i) {
            e.isReady = !0;
            for (var n = 0, s = r.length; s > n; n++) {
                var a = r[n];
                a();
            }
        }
    }
    function n(n) {
        return n.bind(o, "DOMContentLoaded", i), n.bind(o, "readystatechange", i), n.bind(t, "load", i), 
        e;
    }
    var o = t.document, r = [];
    e.isReady = !1, "function" == typeof define && define.amd ? (e.isReady = "function" == typeof requirejs, 
    define("doc-ready/doc-ready", [ "eventie/eventie" ], n)) : t.docReady = n(t.eventie);
}(this), function() {
    function t() {}
    function e(t, e) {
        for (var i = t.length; i--; ) if (t[i].listener === e) return i;
        return -1;
    }
    function i(t) {
        return function() {
            return this[t].apply(this, arguments);
        };
    }
    var n = t.prototype;
    n.getListeners = function(t) {
        var e, i, n = this._getEvents();
        if ("object" == typeof t) {
            e = {};
            for (i in n) n.hasOwnProperty(i) && t.test(i) && (e[i] = n[i]);
        } else e = n[t] || (n[t] = []);
        return e;
    }, n.flattenListeners = function(t) {
        var e, i = [];
        for (e = 0; e < t.length; e += 1) i.push(t[e].listener);
        return i;
    }, n.getListenersAsObject = function(t) {
        var e, i = this.getListeners(t);
        return i instanceof Array && (e = {}, e[t] = i), e || i;
    }, n.addListener = function(t, i) {
        var n, o = this.getListenersAsObject(t), r = "object" == typeof i;
        for (n in o) o.hasOwnProperty(n) && -1 === e(o[n], i) && o[n].push(r ? i : {
            listener: i,
            once: !1
        });
        return this;
    }, n.on = i("addListener"), n.addOnceListener = function(t, e) {
        return this.addListener(t, {
            listener: e,
            once: !0
        });
    }, n.once = i("addOnceListener"), n.defineEvent = function(t) {
        return this.getListeners(t), this;
    }, n.defineEvents = function(t) {
        for (var e = 0; e < t.length; e += 1) this.defineEvent(t[e]);
        return this;
    }, n.removeListener = function(t, i) {
        var n, o, r = this.getListenersAsObject(t);
        for (o in r) r.hasOwnProperty(o) && (n = e(r[o], i), -1 !== n && r[o].splice(n, 1));
        return this;
    }, n.off = i("removeListener"), n.addListeners = function(t, e) {
        return this.manipulateListeners(!1, t, e);
    }, n.removeListeners = function(t, e) {
        return this.manipulateListeners(!0, t, e);
    }, n.manipulateListeners = function(t, e, i) {
        var n, o, r = t ? this.removeListener : this.addListener, s = t ? this.removeListeners : this.addListeners;
        if ("object" != typeof e || e instanceof RegExp) for (n = i.length; n--; ) r.call(this, e, i[n]); else for (n in e) e.hasOwnProperty(n) && (o = e[n]) && ("function" == typeof o ? r.call(this, n, o) : s.call(this, n, o));
        return this;
    }, n.removeEvent = function(t) {
        var e, i = typeof t, n = this._getEvents();
        if ("string" === i) delete n[t]; else if ("object" === i) for (e in n) n.hasOwnProperty(e) && t.test(e) && delete n[e]; else delete this._events;
        return this;
    }, n.emitEvent = function(t, e) {
        var i, n, o, r, s = this.getListenersAsObject(t);
        for (o in s) if (s.hasOwnProperty(o)) for (n = s[o].length; n--; ) i = s[o][n], 
        i.once === !0 && this.removeListener(t, i.listener), r = i.listener.apply(this, e || []), 
        r === this._getOnceReturnValue() && this.removeListener(t, i.listener);
        return this;
    }, n.trigger = i("emitEvent"), n.emit = function(t) {
        var e = Array.prototype.slice.call(arguments, 1);
        return this.emitEvent(t, e);
    }, n.setOnceReturnValue = function(t) {
        return this._onceReturnValue = t, this;
    }, n._getOnceReturnValue = function() {
        return this.hasOwnProperty("_onceReturnValue") ? this._onceReturnValue : !0;
    }, n._getEvents = function() {
        return this._events || (this._events = {});
    }, "function" == typeof define && define.amd ? define("eventEmitter/EventEmitter", [], function() {
        return t;
    }) : "object" == typeof module && module.exports ? module.exports = t : this.EventEmitter = t;
}.call(this), function(t) {
    function e(t) {
        if (t) {
            if ("string" == typeof n[t]) return t;
            t = t.charAt(0).toUpperCase() + t.slice(1);
            for (var e, o = 0, r = i.length; r > o; o++) if (e = i[o] + t, "string" == typeof n[e]) return e;
        }
    }
    var i = "Webkit Moz ms Ms O".split(" "), n = document.documentElement.style;
    "function" == typeof define && define.amd ? define("get-style-property/get-style-property", [], function() {
        return e;
    }) : t.getStyleProperty = e;
}(window), function(t) {
    function e(t) {
        var e = parseFloat(t), i = -1 === t.indexOf("%") && !isNaN(e);
        return i && e;
    }
    function i() {
        for (var t = {
            width: 0,
            height: 0,
            innerWidth: 0,
            innerHeight: 0,
            outerWidth: 0,
            outerHeight: 0
        }, e = 0, i = s.length; i > e; e++) {
            var n = s[e];
            t[n] = 0;
        }
        return t;
    }
    function n(t) {
        function n(t) {
            if ("string" == typeof t && (t = document.querySelector(t)), t && "object" == typeof t && t.nodeType) {
                var n = r(t);
                if ("none" === n.display) return i();
                var l = {};
                l.width = t.offsetWidth, l.height = t.offsetHeight;
                for (var c = l.isBorderBox = !(!a || !n[a] || "border-box" !== n[a]), u = 0, d = s.length; d > u; u++) {
                    var p = s[u], h = n[p], f = parseFloat(h);
                    l[p] = isNaN(f) ? 0 : f;
                }
                var b = l.paddingLeft + l.paddingRight, m = l.paddingTop + l.paddingBottom, v = l.marginLeft + l.marginRight, g = l.marginTop + l.marginBottom, w = l.borderLeftWidth + l.borderRightWidth, y = l.borderTopWidth + l.borderBottomWidth, _ = c && o, x = e(n.width);
                x !== !1 && (l.width = x + (_ ? 0 : b + w));
                var S = e(n.height);
                return S !== !1 && (l.height = S + (_ ? 0 : m + y)), l.innerWidth = l.width - (b + w), 
                l.innerHeight = l.height - (m + y), l.outerWidth = l.width + v, l.outerHeight = l.height + g, 
                l;
            }
        }
        var o, a = t("boxSizing");
        return function() {
            if (a) {
                var t = document.createElement("div");
                t.style.width = "200px", t.style.padding = "1px 2px 3px 4px", t.style.borderStyle = "solid", 
                t.style.borderWidth = "1px 2px 3px 4px", t.style[a] = "border-box";
                var i = document.body || document.documentElement;
                i.appendChild(t);
                var n = r(t);
                o = 200 === e(n.width), i.removeChild(t);
            }
        }(), n;
    }
    var o = document.defaultView, r = o && o.getComputedStyle ? function(t) {
        return o.getComputedStyle(t, null);
    } : function(t) {
        return t.currentStyle;
    }, s = [ "paddingLeft", "paddingRight", "paddingTop", "paddingBottom", "marginLeft", "marginRight", "marginTop", "marginBottom", "borderLeftWidth", "borderRightWidth", "borderTopWidth", "borderBottomWidth" ];
    "function" == typeof define && define.amd ? define("get-size/get-size", [ "get-style-property/get-style-property" ], n) : t.getSize = n(t.getStyleProperty);
}(window), function(t, e) {
    function i(t, e) {
        return t[a](e);
    }
    function n(t) {
        if (!t.parentNode) {
            var e = document.createDocumentFragment();
            e.appendChild(t);
        }
    }
    function o(t, e) {
        n(t);
        for (var i = t.parentNode.querySelectorAll(e), o = 0, r = i.length; r > o; o++) if (i[o] === t) return !0;
        return !1;
    }
    function r(t, e) {
        return n(t), i(t, e);
    }
    var s, a = function() {
        if (e.matchesSelector) return "matchesSelector";
        for (var t = [ "webkit", "moz", "ms", "o" ], i = 0, n = t.length; n > i; i++) {
            var o = t[i], r = o + "MatchesSelector";
            if (e[r]) return r;
        }
    }();
    if (a) {
        var l = document.createElement("div"), c = i(l, "div");
        s = c ? i : r;
    } else s = o;
    "function" == typeof define && define.amd ? define("matches-selector/matches-selector", [], function() {
        return s;
    }) : window.matchesSelector = s;
}(this, Element.prototype), function(t) {
    function e(t, e) {
        for (var i in e) t[i] = e[i];
        return t;
    }
    function i(t, i, n) {
        function r(t, e) {
            t && (this.element = t, this.layout = e, this.position = {
                x: 0,
                y: 0
            }, this._create());
        }
        var s = n("transition"), a = n("transform"), l = s && a, c = !!n("perspective"), u = {
            WebkitTransition: "webkitTransitionEnd",
            MozTransition: "transitionend",
            OTransition: "otransitionend",
            transition: "transitionend"
        }[s], d = [ "transform", "transition", "transitionDuration", "transitionProperty" ], p = function() {
            for (var t = {}, e = 0, i = d.length; i > e; e++) {
                var o = d[e], r = n(o);
                r && r !== o && (t[o] = r);
            }
            return t;
        }();
        e(r.prototype, t.prototype), r.prototype._create = function() {
            this.css({
                position: "absolute"
            });
        }, r.prototype.handleEvent = function(t) {
            var e = "on" + t.type;
            this[e] && this[e](t);
        }, r.prototype.getSize = function() {
            this.size = i(this.element);
        }, r.prototype.css = function(t) {
            var e = this.element.style;
            for (var i in t) {
                var n = p[i] || i;
                e[n] = t[i];
            }
        }, r.prototype.getPosition = function() {
            var t = o(this.element), e = this.layout.options, i = e.isOriginLeft, n = e.isOriginTop, r = parseInt(t[i ? "left" : "right"], 10), s = parseInt(t[n ? "top" : "bottom"], 10);
            r = isNaN(r) ? 0 : r, s = isNaN(s) ? 0 : s;
            var a = this.layout.size;
            r -= i ? a.paddingLeft : a.paddingRight, s -= n ? a.paddingTop : a.paddingBottom, 
            this.position.x = r, this.position.y = s;
        }, r.prototype.layoutPosition = function() {
            var t = this.layout.size, e = this.layout.options, i = {};
            e.isOriginLeft ? (i.left = this.position.x + t.paddingLeft + "px", i.right = "") : (i.right = this.position.x + t.paddingRight + "px", 
            i.left = ""), e.isOriginTop ? (i.top = this.position.y + t.paddingTop + "px", i.bottom = "") : (i.bottom = this.position.y + t.paddingBottom + "px", 
            i.top = ""), this.css(i), this.emitEvent("layout", [ this ]);
        };
        var h = c ? function(t, e) {
            return "translate3d(" + t + "px, " + e + "px, 0)";
        } : function(t, e) {
            return "translate(" + t + "px, " + e + "px)";
        };
        r.prototype._transitionTo = function(t, e) {
            this.getPosition();
            var i = this.position.x, n = this.position.y, o = parseInt(t, 10), r = parseInt(e, 10), s = o === this.position.x && r === this.position.y;
            if (this.setPosition(t, e), s && !this.isTransitioning) return void this.layoutPosition();
            var a = t - i, l = e - n, c = {}, u = this.layout.options;
            a = u.isOriginLeft ? a : -a, l = u.isOriginTop ? l : -l, c.transform = h(a, l), 
            this.transition({
                to: c,
                onTransitionEnd: this.layoutPosition,
                isCleaning: !0
            });
        }, r.prototype.goTo = function(t, e) {
            this.setPosition(t, e), this.layoutPosition();
        }, r.prototype.moveTo = l ? r.prototype._transitionTo : r.prototype.goTo, r.prototype.setPosition = function(t, e) {
            this.position.x = parseInt(t, 10), this.position.y = parseInt(e, 10);
        }, r.prototype._nonTransition = function(t) {
            this.css(t.to), t.isCleaning && this._removeStyles(t.to), t.onTransitionEnd && t.onTransitionEnd.call(this);
        }, r.prototype._transition = function(t) {
            var e = this.layout.options.transitionDuration;
            if (!parseFloat(e)) return void this._nonTransition(t);
            var i = t.to, n = [];
            for (var o in i) n.push(o);
            var r = {};
            if (r.transitionProperty = n.join(","), r.transitionDuration = e, this.element.addEventListener(u, this, !1), 
            (t.isCleaning || t.onTransitionEnd) && (this.onTransitionEnd = function() {
                t.isCleaning && this._removeStyles(i), t.onTransitionEnd && t.onTransitionEnd.call(this);
            }), t.from) {
                this.css(t.from);
                var s = this.element.offsetHeight;
                s = null;
            }
            this.css(r), this.css(i), this.isTransitioning = !0;
        }, r.prototype.transition = r.prototype[s ? "_transition" : "_nonTransition"], r.prototype.onwebkitTransitionEnd = function(t) {
            this.ontransitionend(t);
        }, r.prototype.onotransitionend = function(t) {
            this.ontransitionend(t);
        }, r.prototype.ontransitionend = function(t) {
            t.target === this.element && (this.removeTransitionStyles(), this.element.removeEventListener(u, this, !1), 
            this.isTransitioning = !1, this.onTransitionEnd && (this.onTransitionEnd.call(this), 
            delete this.onTransitionEnd), this.emitEvent("transitionEnd", [ this ]));
        }, r.prototype._removeStyles = function(t) {
            var e = {};
            for (var i in t) e[i] = "";
            this.css(e);
        };
        var f = {
            transitionProperty: "",
            transitionDuration: ""
        };
        return r.prototype.removeTransitionStyles = function() {
            this.css(f);
        }, r.prototype.removeElem = function() {
            this.element.parentNode.removeChild(this.element), this.emitEvent("remove", [ this ]);
        }, r.prototype.remove = function() {
            if (!s || !parseFloat(this.layout.options.transitionDuration)) return void this.removeElem();
            var t = this;
            this.on("transitionEnd", function() {
                return t.removeElem(), !0;
            }), this.hide();
        }, r.prototype.reveal = function() {
            delete this.isHidden, this.css({
                display: ""
            });
            var t = this.layout.options;
            this.transition({
                from: t.hiddenStyle,
                to: t.visibleStyle,
                isCleaning: !0
            });
        }, r.prototype.hide = function() {
            this.isHidden = !0, this.css({
                display: ""
            });
            var t = this.layout.options;
            this.transition({
                from: t.visibleStyle,
                to: t.hiddenStyle,
                isCleaning: !0,
                onTransitionEnd: function() {
                    this.css({
                        display: "none"
                    });
                }
            });
        }, r.prototype.destroy = function() {
            this.css({
                position: "",
                left: "",
                right: "",
                top: "",
                bottom: "",
                transition: "",
                transform: ""
            });
        }, r;
    }
    var n = document.defaultView, o = n && n.getComputedStyle ? function(t) {
        return n.getComputedStyle(t, null);
    } : function(t) {
        return t.currentStyle;
    };
    "function" == typeof define && define.amd ? define("outlayer/item", [ "eventEmitter/EventEmitter", "get-size/get-size", "get-style-property/get-style-property" ], i) : (t.Outlayer = {}, 
    t.Outlayer.Item = i(t.EventEmitter, t.getSize, t.getStyleProperty));
}(window), function(t) {
    function e(t, e) {
        for (var i in e) t[i] = e[i];
        return t;
    }
    function i(t) {
        return "[object Array]" === u.call(t);
    }
    function n(t) {
        var e = [];
        if (i(t)) e = t; else if (t && "number" == typeof t.length) for (var n = 0, o = t.length; o > n; n++) e.push(t[n]); else e.push(t);
        return e;
    }
    function o(t) {
        return t.replace(/(.)([A-Z])/g, function(t, e, i) {
            return e + "-" + i;
        }).toLowerCase();
    }
    function r(i, r, u, h, f, b) {
        function m(t, i) {
            if ("string" == typeof t && (t = s.querySelector(t)), !t || !d(t)) return void (a && a.error("Bad " + this.settings.namespace + " element: " + t));
            this.element = t, this.options = e({}, this.options), this.option(i);
            var n = ++g;
            this.element.outlayerGUID = n, w[n] = this, this._create(), this.options.isInitLayout && this.layout();
        }
        function v(t, i) {
            t.prototype[i] = e({}, m.prototype[i]);
        }
        var g = 0, w = {};
        return m.prototype.settings = {
            namespace: "outlayer",
            item: b
        }, m.prototype.options = {
            containerStyle: {
                position: "relative"
            },
            isInitLayout: !0,
            isOriginLeft: !0,
            isOriginTop: !0,
            isResizeBound: !0,
            transitionDuration: "0.4s",
            hiddenStyle: {
                opacity: 0,
                transform: "scale(0.001)"
            },
            visibleStyle: {
                opacity: 1,
                transform: "scale(1)"
            }
        }, e(m.prototype, u.prototype), m.prototype.option = function(t) {
            e(this.options, t);
        }, m.prototype._create = function() {
            this.reloadItems(), this.stamps = [], this.stamp(this.options.stamp), e(this.element.style, this.options.containerStyle), 
            this.options.isResizeBound && this.bindResize();
        }, m.prototype.reloadItems = function() {
            this.items = this._getItems(this.element.children);
        }, m.prototype._getItems = function(t) {
            for (var e = this._filterFindItemElements(t), i = this.settings.item, n = [], o = 0, r = e.length; r > o; o++) {
                var s = e[o], a = new i(s, this, this.options.itemOptions);
                n.push(a);
            }
            return n;
        }, m.prototype._filterFindItemElements = function(t) {
            t = n(t);
            for (var e = this.options.itemSelector, i = [], o = 0, r = t.length; r > o; o++) {
                var s = t[o];
                if (d(s)) if (e) {
                    f(s, e) && i.push(s);
                    for (var a = s.querySelectorAll(e), l = 0, c = a.length; c > l; l++) i.push(a[l]);
                } else i.push(s);
            }
            return i;
        }, m.prototype.getItemElements = function() {
            for (var t = [], e = 0, i = this.items.length; i > e; e++) t.push(this.items[e].element);
            return t;
        }, m.prototype.layout = function() {
            this._resetLayout(), this._manageStamps();
            var t = void 0 !== this.options.isLayoutInstant ? this.options.isLayoutInstant : !this._isLayoutInited;
            this.layoutItems(this.items, t), this._isLayoutInited = !0;
        }, m.prototype._init = m.prototype.layout, m.prototype._resetLayout = function() {
            this.getSize();
        }, m.prototype.getSize = function() {
            this.size = h(this.element);
        }, m.prototype._getMeasurement = function(t, e) {
            var i, n = this.options[t];
            n ? ("string" == typeof n ? i = this.element.querySelector(n) : d(n) && (i = n), 
            this[t] = i ? h(i)[e] : n) : this[t] = 0;
        }, m.prototype.layoutItems = function(t, e) {
            t = this._getItemsForLayout(t), this._layoutItems(t, e), this._postLayout();
        }, m.prototype._getItemsForLayout = function(t) {
            for (var e = [], i = 0, n = t.length; n > i; i++) {
                var o = t[i];
                o.isIgnored || e.push(o);
            }
            return e;
        }, m.prototype._layoutItems = function(t, e) {
            if (!t || !t.length) return void this.emitEvent("layoutComplete", [ this, t ]);
            this._itemsOn(t, "layout", function() {
                this.emitEvent("layoutComplete", [ this, t ]);
            });
            for (var i = [], n = 0, o = t.length; o > n; n++) {
                var r = t[n], s = this._getItemLayoutPosition(r);
                s.item = r, s.isInstant = e, i.push(s);
            }
            this._processLayoutQueue(i);
        }, m.prototype._getItemLayoutPosition = function() {
            return {
                x: 0,
                y: 0
            };
        }, m.prototype._processLayoutQueue = function(t) {
            for (var e = 0, i = t.length; i > e; e++) {
                var n = t[e];
                this._positionItem(n.item, n.x, n.y, n.isInstant);
            }
        }, m.prototype._positionItem = function(t, e, i, n) {
            n ? t.goTo(e, i) : t.moveTo(e, i);
        }, m.prototype._postLayout = function() {
            var t = this._getContainerSize();
            t && (this._setContainerMeasure(t.width, !0), this._setContainerMeasure(t.height, !1));
        }, m.prototype._getContainerSize = c, m.prototype._setContainerMeasure = function(t, e) {
            if (void 0 !== t) {
                var i = this.size;
                i.isBorderBox && (t += e ? i.paddingLeft + i.paddingRight + i.borderLeftWidth + i.borderRightWidth : i.paddingBottom + i.paddingTop + i.borderTopWidth + i.borderBottomWidth), 
                t = Math.max(t, 0), this.element.style[e ? "width" : "height"] = t + "px";
            }
        }, m.prototype._itemsOn = function(t, e, i) {
            function n() {
                return o++, o === r && i.call(s), !0;
            }
            for (var o = 0, r = t.length, s = this, a = 0, l = t.length; l > a; a++) {
                var c = t[a];
                c.on(e, n);
            }
        }, m.prototype.ignore = function(t) {
            var e = this.getItem(t);
            e && (e.isIgnored = !0);
        }, m.prototype.unignore = function(t) {
            var e = this.getItem(t);
            e && delete e.isIgnored;
        }, m.prototype.stamp = function(t) {
            if (t = this._find(t)) {
                this.stamps = this.stamps.concat(t);
                for (var e = 0, i = t.length; i > e; e++) {
                    var n = t[e];
                    this.ignore(n);
                }
            }
        }, m.prototype.unstamp = function(t) {
            if (t = this._find(t)) for (var e = 0, i = t.length; i > e; e++) {
                var n = t[e], o = p(this.stamps, n);
                -1 !== o && this.stamps.splice(o, 1), this.unignore(n);
            }
        }, m.prototype._find = function(t) {
            return t ? ("string" == typeof t && (t = this.element.querySelectorAll(t)), t = n(t)) : void 0;
        }, m.prototype._manageStamps = function() {
            if (this.stamps && this.stamps.length) {
                this._getBoundingRect();
                for (var t = 0, e = this.stamps.length; e > t; t++) {
                    var i = this.stamps[t];
                    this._manageStamp(i);
                }
            }
        }, m.prototype._getBoundingRect = function() {
            var t = this.element.getBoundingClientRect(), e = this.size;
            this._boundingRect = {
                left: t.left + e.paddingLeft + e.borderLeftWidth,
                top: t.top + e.paddingTop + e.borderTopWidth,
                right: t.right - (e.paddingRight + e.borderRightWidth),
                bottom: t.bottom - (e.paddingBottom + e.borderBottomWidth)
            };
        }, m.prototype._manageStamp = c, m.prototype._getElementOffset = function(t) {
            var e = t.getBoundingClientRect(), i = this._boundingRect, n = h(t), o = {
                left: e.left - i.left - n.marginLeft,
                top: e.top - i.top - n.marginTop,
                right: i.right - e.right - n.marginRight,
                bottom: i.bottom - e.bottom - n.marginBottom
            };
            return o;
        }, m.prototype.handleEvent = function(t) {
            var e = "on" + t.type;
            this[e] && this[e](t);
        }, m.prototype.bindResize = function() {
            this.isResizeBound || (i.bind(t, "resize", this), this.isResizeBound = !0);
        }, m.prototype.unbindResize = function() {
            i.unbind(t, "resize", this), this.isResizeBound = !1;
        }, m.prototype.onresize = function() {
            function t() {
                e.resize();
            }
            this.resizeTimeout && clearTimeout(this.resizeTimeout);
            var e = this;
            this.resizeTimeout = setTimeout(t, 100);
        }, m.prototype.resize = function() {
            var t = h(this.element), e = this.size && t;
            e && t.innerWidth === this.size.innerWidth || (this.layout(), delete this.resizeTimeout);
        }, m.prototype.addItems = function(t) {
            var e = this._getItems(t);
            if (e.length) return this.items = this.items.concat(e), e;
        }, m.prototype.appended = function(t) {
            var e = this.addItems(t);
            e.length && (this.layoutItems(e, !0), this.reveal(e));
        }, m.prototype.prepended = function(t) {
            var e = this._getItems(t);
            if (e.length) {
                var i = this.items.slice(0);
                this.items = e.concat(i), this._resetLayout(), this.layoutItems(e, !0), this.reveal(e), 
                this.layoutItems(i);
            }
        }, m.prototype.reveal = function(t) {
            if (t && t.length) for (var e = 0, i = t.length; i > e; e++) {
                var n = t[e];
                n.reveal();
            }
        }, m.prototype.hide = function(t) {
            if (t && t.length) for (var e = 0, i = t.length; i > e; e++) {
                var n = t[e];
                n.hide();
            }
        }, m.prototype.getItem = function(t) {
            for (var e = 0, i = this.items.length; i > e; e++) {
                var n = this.items[e];
                if (n.element === t) return n;
            }
        }, m.prototype.getItems = function(t) {
            if (t && t.length) {
                for (var e = [], i = 0, n = t.length; n > i; i++) {
                    var o = t[i], r = this.getItem(o);
                    r && e.push(r);
                }
                return e;
            }
        }, m.prototype.remove = function(t) {
            t = n(t);
            var e = this.getItems(t);
            if (e && e.length) {
                this._itemsOn(e, "remove", function() {
                    this.emitEvent("removeComplete", [ this, e ]);
                });
                for (var i = 0, o = e.length; o > i; i++) {
                    var r = e[i];
                    r.remove();
                    var s = p(this.items, r);
                    this.items.splice(s, 1);
                }
            }
        }, m.prototype.destroy = function() {
            var t = this.element.style;
            t.height = "", t.position = "", t.width = "";
            for (var e = 0, i = this.items.length; i > e; e++) {
                var n = this.items[e];
                n.destroy();
            }
            this.unbindResize(), delete this.element.outlayerGUID, l && l.removeData(this.element, this.settings.namespace);
        }, m.data = function(t) {
            var e = t && t.outlayerGUID;
            return e && w[e];
        }, m.create = function(t, i) {
            function n() {
                m.apply(this, arguments);
            }
            return e(n.prototype, m.prototype), v(n, "options"), v(n, "settings"), e(n.prototype.options, i), 
            n.prototype.settings.namespace = t, n.data = m.data, n.Item = function() {
                b.apply(this, arguments);
            }, n.Item.prototype = new b(), n.prototype.settings.item = n.Item, r(function() {
                for (var e = o(t), i = s.querySelectorAll(".js-" + e), r = "data-" + e + "-options", c = 0, u = i.length; u > c; c++) {
                    var d, p = i[c], h = p.getAttribute(r);
                    try {
                        d = h && JSON.parse(h);
                    } catch (f) {
                        a && a.error("Error parsing " + r + " on " + p.nodeName.toLowerCase() + (p.id ? "#" + p.id : "") + ": " + f);
                        continue;
                    }
                    var b = new n(p, d);
                    l && l.data(p, t, b);
                }
            }), l && l.bridget && l.bridget(t, n), n;
        }, m.Item = b, m;
    }
    var s = t.document, a = t.console, l = t.jQuery, c = function() {}, u = Object.prototype.toString, d = "object" == typeof HTMLElement ? function(t) {
        return t instanceof HTMLElement;
    } : function(t) {
        return t && "object" == typeof t && 1 === t.nodeType && "string" == typeof t.nodeName;
    }, p = Array.prototype.indexOf ? function(t, e) {
        return t.indexOf(e);
    } : function(t, e) {
        for (var i = 0, n = t.length; n > i; i++) if (t[i] === e) return i;
        return -1;
    };
    "function" == typeof define && define.amd ? define("outlayer/outlayer", [ "eventie/eventie", "doc-ready/doc-ready", "eventEmitter/EventEmitter", "get-size/get-size", "matches-selector/matches-selector", "./item" ], r) : t.Outlayer = r(t.eventie, t.docReady, t.EventEmitter, t.getSize, t.matchesSelector, t.Outlayer.Item);
}(window), function(t) {
    function e(t, e) {
        var n = t.create("masonry");
        return n.prototype._resetLayout = function() {
            this.getSize(), this._getMeasurement("columnWidth", "outerWidth"), this._getMeasurement("gutter", "outerWidth"), 
            this.measureColumns();
            var t = this.cols;
            for (this.colYs = []; t--; ) this.colYs.push(0);
            this.maxY = 0;
        }, n.prototype.measureColumns = function() {
            if (this.getContainerWidth(), !this.columnWidth) {
                var t = this.items[0], i = t && t.element;
                this.columnWidth = i && e(i).outerWidth || this.containerWidth;
            }
            this.columnWidth += this.gutter, this.cols = Math.floor((this.containerWidth + this.gutter) / this.columnWidth), 
            this.cols = Math.max(this.cols, 1);
        }, n.prototype.getContainerWidth = function() {
            var t = this.options.isFitWidth ? this.element.parentNode : this.element, i = e(t);
            this.containerWidth = i && i.innerWidth;
        }, n.prototype._getItemLayoutPosition = function(t) {
            t.getSize();
            var e = Math.ceil(t.size.outerWidth / this.columnWidth);
            e = Math.min(e, this.cols);
            for (var n = this._getColGroup(e), o = Math.min.apply(Math, n), r = i(n, o), s = {
                x: this.columnWidth * r,
                y: o
            }, a = o + t.size.outerHeight, l = this.cols + 1 - n.length, c = 0; l > c; c++) this.colYs[r + c] = a;
            return s;
        }, n.prototype._getColGroup = function(t) {
            if (2 > t) return this.colYs;
            for (var e = [], i = this.cols + 1 - t, n = 0; i > n; n++) {
                var o = this.colYs.slice(n, n + t);
                e[n] = Math.max.apply(Math, o);
            }
            return e;
        }, n.prototype._manageStamp = function(t) {
            var i = e(t), n = this._getElementOffset(t), o = this.options.isOriginLeft ? n.left : n.right, r = o + i.outerWidth, s = Math.floor(o / this.columnWidth);
            s = Math.max(0, s);
            var a = Math.floor(r / this.columnWidth);
            a = Math.min(this.cols - 1, a);
            for (var l = (this.options.isOriginTop ? n.top : n.bottom) + i.outerHeight, c = s; a >= c; c++) this.colYs[c] = Math.max(l, this.colYs[c]);
        }, n.prototype._getContainerSize = function() {
            this.maxY = Math.max.apply(Math, this.colYs);
            var t = {
                height: this.maxY
            };
            return this.options.isFitWidth && (t.width = this._getContainerFitWidth()), t;
        }, n.prototype._getContainerFitWidth = function() {
            for (var t = 0, e = this.cols; --e && 0 === this.colYs[e]; ) t++;
            return (this.cols - t) * this.columnWidth - this.gutter;
        }, n.prototype.resize = function() {
            var t = this.containerWidth;
            this.getContainerWidth(), t !== this.containerWidth && this.layout();
        }, n;
    }
    var i = Array.prototype.indexOf ? function(t, e) {
        return t.indexOf(e);
    } : function(t, e) {
        for (var i = 0, n = t.length; n > i; i++) {
            var o = t[i];
            if (o === e) return i;
        }
        return -1;
    };
    "function" == typeof define && define.amd ? define("vendor/misc/masonry", [ "outlayer/outlayer", "get-size/get-size" ], e) : t.Masonry = e(t.Outlayer, t.getSize);
}(window), define("be/layout/mason", [ "log", "nbd/util/extend", "nbd/util/media", "nbd/trait/promise", "be/decorator/waitsforimages", "vendor/misc/masonry" ], function(t, e, i, n, o, r) {
    "use strict";
    t = t.get("be/layout/mason");
    var s, a = {
        itemSelector: ".js-item",
        hiddenStyle: {
            opacity: 0
        },
        visibleStyle: {
            opacity: 1
        },
        transitionDuration: 0
    };
    return {
        init: function(t, e) {
            var n = e.toggleQuery;
            delete e.toggleQuery, this.$context = t, this.options = e, e.columnWidth && (this.$sizer = $("<div>", {
                "class": e.columnWidth.replace(/\./, "")
            }).css({
                visibility: "hidden",
                position: "absolute",
                top: 0,
                left: 0
            }).appendTo(t)), s || (i("mason-min", n), s = !0), i.on("mason-min", this._toggle, this), 
            this._toggle(i.is("mason-min"));
        },
        destroy: function() {
            i.off(null, null, this), this.$context = null, this.$spinner = null, this.$sizer && (this.$sizer.remove(), 
            this.$sizer = null), this.mason && (this.mason.destroy(), this.mason = null);
        },
        update: function() {
            this.mason && this.mason.layout();
        },
        prepend: function(t) {
            return this._hideAndWait(t).then(function(t) {
                t && (this.mason.prepended(t), this.mason.layout());
            }.bind(this));
        },
        append: function(t) {
            return this._hideAndWait(t).then(function(t) {
                t && this.mason.appended(t);
            }.bind(this));
        },
        ready: function() {
            return !!this.mason;
        },
        _create: function(t) {
            return new r(t[0], e(a, this.options));
        },
        _hideAndWait: function(e) {
            var i, r = new n();
            return this.mason && e && e.length ? (i = e.addClass("js-item").toArray(), e.css({
                visibility: "hidden"
            }), e.hide(), o(this.$context).then(function() {
                e.show(), e.css({
                    visibility: "visible"
                }), t.info("Added " + i.length + " items"), r.resolve(i);
            }.bind(this)), r) : (r.resolve(), r);
        },
        _toggle: function(t) {
            t ? this.mason && (setTimeout(function() {
                this.destroy();
            }.bind(this.mason), 101), this.mason.destroy(), this.mason = null) : this.mason || (this.mason = this._create(this.$context));
        }
    };
}), define("discover/content", [ "jquery", "nbd/util/async", "nbd/util/media", "lib/infinitescroll", "lib/gaq", "be/content", "be/spinner", "be/layout/mason", "discover/coordinator", "discover/lib/filters", "discover/lib/loader", "be/View/Cover", "discover/View/Wip", "discover/View/User", "page_constants" ], function(t, e, i, n, o, r, s, a, l, c, u, d, p, h, f) {
    "use strict";
    function b() {
        $.show();
    }
    function m(t) {
        j.removeClass("loading"), c.timestamp(t.timestamp), r.render(t.html);
    }
    function v() {
        j.removeClass("loading"), $.hide();
    }
    function g() {
        return "projects" === c.get("content") && (c.get("country") || c.get("state") || c.get("city")) ? void (k.children(":not(.ignore-me)").length < O || (E || t.ajax("/templates/discover_location", {
            dataType: "html"
        }).done(function(e) {
            E = t(e).appendTo(k);
        }), k.after(E), c.offset(null))) : E && E.remove();
    }
    function w(t) {
        switch (t) {
          case "projects":
            return d;

          case "wips":
            return p;

          case "users":
            return h;

          case "teams":
            return h;
        }
    }
    function y() {
        var t = c.get("content");
        L.hasClass("viewing-" + t) || L.removeClass("viewing-users viewing-projects viewing-wips viewing-teams").addClass("viewing-" + t), 
        k.hasClass(t) || k.removeClass("projects wips users").addClass(t);
    }
    function _() {
        a.init(k.find(".covers"), {
            columnWidth: ".wip-block",
            toggleQuery: "all and (max-width: 499px)"
        });
    }
    function x() {
        a.destroy();
    }
    function S() {
        var t, i = c.get("content");
        return "wips" === i && (t = this, t && t.length) ? void e(function() {
            a.ready() || _(), a.append(t).then($.hide.bind($)).then(function() {
                n.check();
            });
        }) : ($.hide(), void e(function() {
            n.check();
        }));
    }
    function T(t) {
        "wips" === t ? (require([ "css!styles/networki/wip" ], c.type.bind(c, t)), _()) : c.type(t);
    }
    function C() {
        e(function() {
            window.scrollTo(0, Math.min(I, window.scrollY));
        });
    }
    var k, E, j, $, L, M, I = 1, O = f.UPSELL_LOCATION || 36;
    return u.before(b).then(m, v), c.on("all", function() {
        j.addClass("loading"), r.clearNext();
    }), c.on("content", function(t) {
        r.setItem(w(t));
    }), M = {
        init: function(e) {
            k = e, j = t("#top-panel"), L = t(document.body), $ = k.find(".loading-spinner"), 
            r.postview.add(S).add(o.page).add(c.offset.bind(c)), r.postclear.add(C).add(x), 
            c.on("content", y), L.hasClass("logged-in") || (r.postview.add(g), i.on("desktop", function(e) {
                I = e ? t("#showcase-and-discover").height() || 0 : null;
            }), I = i.is("desktop") ? t("#showcase-and-discover").height() || 0 : null), k.on("click", ".cover-fields a, .site-message a", function() {
                c.reset();
            }), r.setItem(w(c.get("content"))), r.init(k.find(".covers")), s.create($.hide().get(0)), 
            l.on("content.type", T), n(.8, u);
        }
    };
}), define("discover/View/Sidebar/Menu", [ "jquery", "nbd/View/Element", "nbd/util/pipe", "hgn!templates/discover/sidebar-menu" ], function(t, e, i, n) {
    "use strict";
    var o = e.extend({
        $nub: null,
        init: function() {
            this._super.apply(this, arguments), this.dismiss = this.dismiss.bind(this);
        },
        template: i(n, t),
        rendered: function() {
            this.$view.on("click", function(t) {
                t.stopPropagation();
            }), this.$nub = this.$view.find(".search-option-nub");
        },
        position: function() {
            var t = this.$view.outerHeight(), e = this.$nub.outerHeight(), i = parseFloat(this.$nub.css("bottom"));
            this.$view.css("top", e + i - t + "px");
        },
        dismiss: function(t) {
            this.$view && !this.$view.parent().find(t.target).length && this.hide();
        },
        show: function() {
            this.$view.trigger("menu.show"), t("html").on("click", this.dismiss), this.$view.show(), 
            this.position(), this.$view.addClass("shown");
        },
        hide: function(e) {
            this.$view.trigger("menu.hide", [ e ]), t("html").off("click", this.dismiss), this.$view.removeClass("shown");
        },
        toggle: function() {
            return this.$view ? void (this.$view.hasClass("shown") ? this.hide() : this.show()) : (this.render(), 
            void this.show());
        }
    });
    return o;
}), define("discover/View/Sidebar/Menu/Autoselect", [ "jquery", "discover/View/Sidebar/Menu", "discover/lib/filters", "lib/autosource", "nbd/util/async", "page_constants", "hgn!templates/lib/_crumb", "hgn!templates/discover/suggest-item", "jquery/be/autoselect" ], function(t, e, i, n, o, r, s, a) {
    "use strict";
    function l(t) {
        return t.value = t.n, t;
    }
    function c(e) {
        return t.map(e, l);
    }
    function u(t, e) {
        return e.forEach(function(e) {
            e.type = t;
        }), e;
    }
    var d = e.extend({
        rendered: function() {
            this._super();
            var e = this, i = this.$view.find(".search-option-content").addClass("ui-front search-option-" + this.constructor.TYPE).find("input"), n = t("<ul>", {
                "class": "listselector_selections autocomplete_selections"
            }).insertAfter(i.parent());
            n.render = function(i) {
                i.forEach(function(e) {
                    this.append(t(s(e)).data("item", e));
                }, this.empty()), e.position();
            }, this.initAutoselect(i, n), this.bindAutoselect(i, n), this.$view.on("menu.show", function() {
                o(i.focus.bind(i));
            }).on("menu.hide", function() {
                i.val("");
            });
        },
        templateData: function() {
            return {
                title: this.constructor.TITLE,
                confirm: this.constructor.CONFIRM,
                field: "search-input-" + this.constructor.TYPE
            };
        },
        submit: function(t, e) {
            var n = e && e.value || t;
            i.change(this.constructor.TYPE, n.map(function(t) {
                return t.id;
            }).join("|") || void 0);
        },
        initAutoselect: function(e, o) {
            var s = this, l = n({
                maxLocal: 5
            }), d = i.get(s.constructor.TYPE);
            return d && (d = d.split("|").map(function(t) {
                return r[s.constructor.TYPE.toUpperCase()][t];
            }), o.render(u(this.constructor.TYPE, c(d)))), e.autoselect({
                autoFocus: !0,
                source: l,
                itemTemplate: a,
                value: d,
                limit: s.constructor.LIMIT,
                width: e.outerWidth(),
                messages: {
                    placeholder: "Start typing to see list",
                    limited: s.constructor.LIMIT_MESSAGE
                }
            }), t.ajax({
                url: "/tags/getAutoList",
                data: {
                    type: this.constructor.TYPE
                }
            }).then(function(t) {
                return t.json;
            }).then(this.save).then(c).then(u.bind(null, this.constructor.TYPE)).done(l.addLocal.bind(l));
        },
        bindAutoselect: function(e, n) {
            var o = this.position.bind(this), s = this;
            e.on({
                autoselectvalue: function(t, e) {
                    n.render(e.value);
                },
                autoselectopen: o,
                autoselectclose: o
            }).on("autoselectvalue", this.hide.bind(this)).on("autoselectvalue", this.submit.bind(this)), 
            n.on("click", ".js-remove", function() {
                e.autoselect("unselect", t(this).parent().data("item"));
            }), i.on(this.constructor.TYPE, function(t) {
                e.autoselect("empty"), t && e.autoselect("select", t.split("|").map(function(t) {
                    return r[s.constructor.TYPE.toUpperCase()][t];
                }));
            });
        },
        destroy: function() {
            i.off(null, null, this), this._super();
        }
    });
    return d;
}), define("discover/View/Sidebar/Menu/School", [ "discover/View/Sidebar/Menu/Autoselect", "page_constants" ], function(t, e) {
    "use strict";
    var i = t.extend({
        save: function(t) {
            return e.SCHOOLS = t;
        }
    }, {
        TITLE: "Schools",
        TYPE: e.FILTER_KEY_SCHOOLS,
        LIMIT: 3,
        LIMIT_MESSAGE: "You may only choose 3 schools."
    });
    return i;
}), define("discover/View/Sidebar/Menu/Tool", [ "discover/View/Sidebar/Menu/Autoselect", "page_constants" ], function(t, e) {
    "use strict";
    var i = t.extend({
        save: function(t) {
            return e.TOOLS = t;
        }
    }, {
        TITLE: "Tools",
        TYPE: e.FILTER_KEY_TOOLS,
        LIMIT: 3,
        LIMIT_MESSAGE: "You may only choose 3 tools."
    });
    return i;
}), define("require/hgn!templates/discover/color", [ "hogan" ], function(t) {
    var e = new t.Template({
        code: function(t, e, i) {
            var n = this;
            return n.b(i = i || ""), n.b('<ul class="colors cfix">'), n.b("\n" + i), n.b('  <li class="color color-0-0"></li>'), 
            n.b("\n" + i), n.b('  <li class="color color-0-1"></li>'), n.b("\n" + i), n.b('  <li class="color color-0-2"></li>'), 
            n.b("\n" + i), n.b('  <li class="color color-0-3"></li>'), n.b("\n" + i), n.b('  <li class="color color-0-4"></li>'), 
            n.b("\n" + i), n.b('  <li class="color color-0-5"></li>'), n.b("\n" + i), n.b('  <li class="color color-0-6"></li>'), 
            n.b("\n" + i), n.b('  <li class="color color-0-7"></li>'), n.b("\n" + i), n.b('  <li class="color color-0-8"></li>'), 
            n.b("\n" + i), n.b('  <li class="color color-0-9"></li>'), n.b("\n" + i), n.b('  <li class="color color-0-10"></li>'), 
            n.b("\n" + i), n.b('  <li class="color color-0-11"></li>'), n.b("\n" + i), n.b('  <li class="color color-1-0"></li>'), 
            n.b("\n" + i), n.b('  <li class="color color-1-1"></li>'), n.b("\n" + i), n.b('  <li class="color color-1-2"></li>'), 
            n.b("\n" + i), n.b('  <li class="color color-1-3"></li>'), n.b("\n" + i), n.b('  <li class="color color-1-4"></li>'), 
            n.b("\n" + i), n.b('  <li class="color color-1-5"></li>'), n.b("\n" + i), n.b('  <li class="color color-1-6"></li>'), 
            n.b("\n" + i), n.b('  <li class="color color-1-7"></li>'), n.b("\n" + i), n.b('  <li class="color color-1-8"></li>'), 
            n.b("\n" + i), n.b('  <li class="color color-1-9"></li>'), n.b("\n" + i), n.b('  <li class="color color-1-10"></li>'), 
            n.b("\n" + i), n.b('  <li class="color color-1-11"></li>'), n.b("\n" + i), n.b('  <li class="color color-2-0"></li>'), 
            n.b("\n" + i), n.b('  <li class="color color-2-1"></li>'), n.b("\n" + i), n.b('  <li class="color color-2-2"></li>'), 
            n.b("\n" + i), n.b('  <li class="color color-2-3"></li>'), n.b("\n" + i), n.b('  <li class="color color-2-4"></li>'), 
            n.b("\n" + i), n.b('  <li class="color color-2-5"></li>'), n.b("\n" + i), n.b('  <li class="color color-2-6"></li>'), 
            n.b("\n" + i), n.b('  <li class="color color-2-7"></li>'), n.b("\n" + i), n.b('  <li class="color color-2-8"></li>'), 
            n.b("\n" + i), n.b('  <li class="color color-2-9"></li>'), n.b("\n" + i), n.b('  <li class="color color-2-10"></li>'), 
            n.b("\n" + i), n.b('  <li class="color color-2-11"></li>'), n.b("\n" + i), n.b('  <li class="color color-3-0"></li>'), 
            n.b("\n" + i), n.b('  <li class="color color-3-1"></li>'), n.b("\n" + i), n.b('  <li class="color color-3-2"></li>'), 
            n.b("\n" + i), n.b('  <li class="color color-3-3"></li>'), n.b("\n" + i), n.b('  <li class="color color-3-4"></li>'), 
            n.b("\n" + i), n.b('  <li class="color color-3-5"></li>'), n.b("\n" + i), n.b('  <li class="color color-3-6"></li>'), 
            n.b("\n" + i), n.b('  <li class="color color-3-7"></li>'), n.b("\n" + i), n.b('  <li class="color color-3-8"></li>'), 
            n.b("\n" + i), n.b('  <li class="color color-3-9"></li>'), n.b("\n" + i), n.b('  <li class="color color-3-10"></li>'), 
            n.b("\n" + i), n.b('  <li class="color color-3-11"></li>'), n.b("\n" + i), n.b('  <li class="color color-4-0"></li>'), 
            n.b("\n" + i), n.b('  <li class="color color-4-1"></li>'), n.b("\n" + i), n.b('  <li class="color color-4-2"></li>'), 
            n.b("\n" + i), n.b('  <li class="color color-4-3"></li>'), n.b("\n" + i), n.b('  <li class="color color-4-4"></li>'), 
            n.b("\n" + i), n.b('  <li class="color color-4-5"></li>'), n.b("\n" + i), n.b('  <li class="color color-4-6"></li>'), 
            n.b("\n" + i), n.b('  <li class="color color-4-7"></li>'), n.b("\n" + i), n.b('  <li class="color color-4-8"></li>'), 
            n.b("\n" + i), n.b('  <li class="color color-4-9"></li>'), n.b("\n" + i), n.b('  <li class="color color-4-10"></li>'), 
            n.b("\n" + i), n.b('  <li class="color color-4-11"></li>'), n.b("\n" + i), n.b('  <li class="color color-5-0"></li>'), 
            n.b("\n" + i), n.b('  <li class="color color-5-1"></li>'), n.b("\n" + i), n.b('  <li class="color color-5-2"></li>'), 
            n.b("\n" + i), n.b('  <li class="color color-5-3"></li>'), n.b("\n" + i), n.b('  <li class="color color-5-4"></li>'), 
            n.b("\n" + i), n.b('  <li class="color color-5-5"></li>'), n.b("\n" + i), n.b('  <li class="color color-5-6"></li>'), 
            n.b("\n" + i), n.b('  <li class="color color-5-7"></li>'), n.b("\n" + i), n.b('  <li class="color color-5-8"></li>'), 
            n.b("\n" + i), n.b('  <li class="color color-5-9"></li>'), n.b("\n" + i), n.b('  <li class="color color-5-10"></li>'), 
            n.b("\n" + i), n.b('  <li class="color color-5-11"></li>'), n.b("\n" + i), n.b('  <li class="color color-6-0"></li>'), 
            n.b("\n" + i), n.b('  <li class="color color-6-1"></li>'), n.b("\n" + i), n.b('  <li class="color color-6-2"></li>'), 
            n.b("\n" + i), n.b('  <li class="color color-6-3"></li>'), n.b("\n" + i), n.b('  <li class="color color-6-4"></li>'), 
            n.b("\n" + i), n.b('  <li class="color color-6-5"></li>'), n.b("\n" + i), n.b('  <li class="color color-6-6"></li>'), 
            n.b("\n" + i), n.b('  <li class="color color-6-7"></li>'), n.b("\n" + i), n.b('  <li class="color color-6-8"></li>'), 
            n.b("\n" + i), n.b('  <li class="color color-6-9"></li>'), n.b("\n" + i), n.b('  <li class="color color-6-10"></li>'), 
            n.b("\n" + i), n.b('  <li class="color color-6-11"></li>'), n.b("\n" + i), n.b('  <li class="color color-7-0"></li>'), 
            n.b("\n" + i), n.b('  <li class="color color-7-1"></li>'), n.b("\n" + i), n.b('  <li class="color color-7-2"></li>'), 
            n.b("\n" + i), n.b('  <li class="color color-7-3"></li>'), n.b("\n" + i), n.b('  <li class="color color-7-4"></li>'), 
            n.b("\n" + i), n.b('  <li class="color color-7-5"></li>'), n.b("\n" + i), n.b('  <li class="color color-7-6"></li>'), 
            n.b("\n" + i), n.b('  <li class="color color-7-7"></li>'), n.b("\n" + i), n.b('  <li class="color color-7-8"></li>'), 
            n.b("\n" + i), n.b('  <li class="color color-7-9"></li>'), n.b("\n" + i), n.b('  <li class="color color-7-10"></li>'), 
            n.b("\n" + i), n.b('  <li class="color color-7-11"></li>'), n.b("\n" + i), n.b('  <li class="color color-8-0"></li>'), 
            n.b("\n" + i), n.b('  <li class="color color-8-1"></li>'), n.b("\n" + i), n.b('  <li class="color color-8-2"></li>'), 
            n.b("\n" + i), n.b('  <li class="color color-8-3"></li>'), n.b("\n" + i), n.b('  <li class="color color-8-4"></li>'), 
            n.b("\n" + i), n.b('  <li class="color color-8-5"></li>'), n.b("\n" + i), n.b('  <li class="color color-8-6"></li>'), 
            n.b("\n" + i), n.b('  <li class="color color-8-7"></li>'), n.b("\n" + i), n.b('  <li class="color color-8-8"></li>'), 
            n.b("\n" + i), n.b('  <li class="color color-8-9"></li>'), n.b("\n" + i), n.b('  <li class="color color-8-10"></li>'), 
            n.b("\n" + i), n.b('  <li class="color color-8-11"></li>'), n.b("\n" + i), n.b('  <li class="color color-9-0"></li>'), 
            n.b("\n" + i), n.b('  <li class="color color-9-1"></li>'), n.b("\n" + i), n.b('  <li class="color color-9-2"></li>'), 
            n.b("\n" + i), n.b('  <li class="color color-9-3"></li>'), n.b("\n" + i), n.b('  <li class="color color-9-4"></li>'), 
            n.b("\n" + i), n.b('  <li class="color color-9-5"></li>'), n.b("\n" + i), n.b('  <li class="color color-9-6"></li>'), 
            n.b("\n" + i), n.b('  <li class="color color-9-7"></li>'), n.b("\n" + i), n.b('  <li class="color color-9-8"></li>'), 
            n.b("\n" + i), n.b('  <li class="color color-9-9"></li>'), n.b("\n" + i), n.b('  <li class="color color-9-10"></li>'), 
            n.b("\n" + i), n.b('  <li class="color color-9-11"></li>'), n.b("\n" + i), n.b("</ul>"), 
            n.b("\n" + i), n.b('<div class="search-option-confirm hide">'), n.b("\n" + i), n.b('  <div class="segment first-segment">'), 
            n.b("\n" + i), n.b('    <span class="swatch" style="background-color:#ac1d1c"></span>'), 
            n.b("\n" + i), n.b('    <span class="hex">#AC1D1C</span>'), n.b("\n" + i), n.b("  </div>"), 
            n.b("\n" + i), n.b('  <div class="segment ui-slider-bordered">'), n.b("\n" + i), 
            n.b('    <div class="left">Variance</div>'), n.b("\n" + i), n.b('    <div class="variance left"></div>'), 
            n.b("\n" + i), n.b('    <div class="left">'), n.b("\n" + i), n.b('      <input type="text" class="variance-input form-text form-text-slider-value" /> %'), 
            n.b("\n" + i), n.b("    </div>"), n.b("\n" + i), n.b("  </div>"), n.b("\n" + i), 
            n.b("</div>"), n.fl();
        },
        partials: {},
        subs: {}
    }, "", t), i = function(t, e) {
        for (var i in e) t[i] = e[i];
        return t;
    }, n = {
        "": null
    }, o = function() {
        return e.render.apply(e, arguments);
    };
    return e.ri = function(t, e, o) {
        return this.r(t, i(n, e), o);
    }, o.template = e, o;
}), function(t) {
    var e;
    "function" == typeof define && define.amd ? define("utils/colors", [ "jquery" ], function() {
        var e = t.apply(this, arguments);
        return e;
    }) : (e = t.call(this, jQuery), this.Utils = this.Utils || {}, this.Utils.Colors = e);
}(function(t) {
    var e = {
        color_names: {
            black: "000000",
            silver: "C0C0C0",
            gray: "808080",
            white: "FFFFFF",
            maroon: "800000",
            red: "FF0000",
            purple: "800080",
            fuchsia: "FF00FF",
            green: "008000",
            lime: "00FF00",
            olive: "808000",
            yellow: "FFFF00",
            navy: "000080",
            blue: "0000FF",
            teal: "008080",
            aqua: "00FFFF"
        },
        checkHex: function(t, i) {
            return t.match("rgb") && (t = "#" + e.rgbString2hex(t)), i && t.match(/^#/) && (t = t.substr(1)), 
            t;
        },
        hsv2rgb: function(t, e, i) {
            var n, o, r;
            if (0 === e) n = 255 * i, o = 255 * i, r = 255 * i; else {
                var s = 6 * t;
                6 == s && (s = 0);
                var a = Math.floor(s), l = i * (1 - e), c = i * (1 - e * (s - a)), u = i * (1 - e * (1 - (s - a)));
                0 === a ? (var_r = i, var_g = u, var_b = l) : 1 == a ? (var_r = c, var_g = i, var_b = l) : 2 == a ? (var_r = l, 
                var_g = i, var_b = u) : 3 == a ? (var_r = l, var_g = c, var_b = i) : 4 == a ? (var_r = u, 
                var_g = l, var_b = i) : (var_r = i, var_g = l, var_b = c), n = 255 * var_r, o = 255 * var_g, 
                r = 255 * var_b;
            }
            return [ Math.round(n), Math.round(o), Math.round(r) ];
        },
        rgb2hsv: function(t, e, i) {
            t /= 255, e /= 255, i /= 255;
            var n = Math.min(t, e, i), o = Math.max(t, e, i);
            deltaMax = o - n;
            var r, s, a, l, c, u = o;
            return 0 === deltaMax ? (s = 0, r = 0) : (r = deltaMax / o, a = ((o - t) / 6 + deltaMax / 2) / deltaMax, 
            l = ((o - e) / 6 + deltaMax / 2) / deltaMax, c = ((o - i) / 6 + deltaMax / 2) / deltaMax, 
            t == o ? s = c - l : e == o ? s = 1 / 3 + a - c : i == o && (s = 2 / 3 + l - a), 
            0 > s && (s += 1), s > 1 && (s -= 1)), [ s, r, u ];
        },
        rgb2hex: function(t, e, i) {
            return this.toHex(t) + this.toHex(e) + this.toHex(i);
        },
        hexchars: "0123456789ABCDEF",
        toHex: function(t) {
            return t = t || 0, t = parseInt(t, 10), isNaN(t) && (t = 0), t = Math.round(Math.min(Math.max(0, t), 255)), 
            this.hexchars.charAt((t - t % 16) / 16) + this.hexchars.charAt(t % 16);
        },
        toDec: function(t) {
            return this.hexchars.indexOf(t.toUpperCase());
        },
        hex2rgb: function(t) {
            var e = [];
            return e[0] = 16 * this.toDec(t.substr(0, 1)) + this.toDec(t.substr(1, 1)), e[1] = 16 * this.toDec(t.substr(2, 1)) + this.toDec(t.substr(3, 1)), 
            e[2] = 16 * this.toDec(t.substr(4, 1)) + this.toDec(t.substr(5, 1)), e;
        },
        isValidRGB: function(t) {
            return !t[0] && 0 !== t[0] || isNaN(t[0]) || t[0] < 0 || t[0] > 255 ? !1 : !t[1] && 0 !== t[1] || isNaN(t[1]) || t[1] < 0 || t[1] > 255 ? !1 : !t[2] && 0 !== t[2] || isNaN(t[2]) || t[2] < 0 || t[2] > 255 ? !1 : !0;
        },
        rgbString2hex: function(i) {
            if (this.color_names[i]) return this.color_names[i];
            if (i.match("rgb") || i.match("rgba")) {
                var n = i.replace("rgba", "").replace("rgb", "").replace("(", "").replace(")", "").replace(/\s+/g, "").split(",");
                return t.each(n, function(t) {
                    n[t] = parseInt(n[t], 10);
                }), this.isValidRGB(n) ? "undefined" != typeof n[3] && 0 === n[3] ? "transparent" : e.rgb2hex(n[0], n[1], n[2]) : !1;
            }
            return i.replace("#", "");
        },
        hex2rgbstring: function(t) {
            var i = e.hex2rgb(t);
            return "rgba(" + i[0] + "," + i[1] + "," + i[2] + ",1)";
        },
        darkenByPercent: function(t, i) {
            var n = e.hex2rgb(t), o = e.rgb2hsv(n[0], n[1], n[2]), r = o[2], s = r * i, a = [ o[0], o[1], s ], l = this.hsv2rgb(a[0], a[1], a[2]), c = this.rgb2hex(l[0], l[1], l[2]);
            return c;
        }
    };
    return e;
}), define("jquery/plugins/jquery.ui.fancyslider", [ "jquery" ], function(t) {
    t.fn.fancyslider = function(e) {
        function i(t, i) {
            function n() {
                if ("value" === e.input) {
                    if (s > c) return !0;
                } else if (s > 100) return !0;
                return !1;
            }
            function o() {
                if ("value" === e.input) {
                    if (u > s) return !0;
                } else if (0 > s) return !0;
                return !1;
            }
            var r, s = parseInt(this.value, 10), c = a.slider("option", "max"), u = a.slider("option", "min");
            (parseInt(a.slider("value"), 10) !== s || i === !0) && ((+s || 0 === s) && (s = "value" === e.input ? a.slider("value") : e.percent_default), 
            a.trigger("slidestart", {
                value: a.slider("value")
            }), l = !1, r = "value" === e.input ? s : Math.round(a.slider("option", "max") * (s / 100)), 
            n() && (r = c), o() && (r = u), a.slider("value", r), a.trigger("slide", {
                value: r
            }), r = a.slider("value"), a.trigger("slidestop", {
                value: r
            }), this.value = "value" === e.input ? r : r / c * 100);
        }
        function n(e) {
            var i = !1;
            switch (e.keyCode) {
              case t.ui.keyCode.ENTER:
                i = !0;
                break;

              case t.ui.keyCode.UP:
                p.val(parseInt(p.val(), 10) + 1), i = !0;
                break;

              case t.ui.keyCode.DOWN:
                p.val(parseInt(p.val(), 10) - 1), i = !0;
            }
            return i ? (p.trigger("blur").focus(), !1) : void 0;
        }
        function o() {
            l && new Date() - l > 500 && p.val() && (p.trigger("blur").focus(), l = !1);
        }
        function r(e) {
            switch (e.keyCode) {
              case t.ui.keyCode.ENTER:
              case t.ui.keyCode.UP:
              case t.ui.keyCode.DOWN:
                return !1;
            }
            l = new Date(), setTimeout(o, 1e3);
        }
        function s(t) {
            var e = a.slider("option", "min"), i = a.slider("option", "max");
            return 100 * (t - e) / (i - e);
        }
        e = t.extend({
            animate: "fast",
            input: "value",
            value: 0,
            percent_default: 50
        }, e);
        var a = this, l = !1, c = 100 * e.value / e.max, u = t('<div class="ui-progress"/>'), d = "value" === e.input ? e.value : c, p = t("input[type=text]").filter(function() {
            return t(this).data("forslider") === a[0].id;
        });
        return c > 100 && (c = 100), u.css("width", c + "%"), this.slider(e).on("slide", function(t, i) {
            var n = s(i.value), o = "value" === e.input ? i.value : n;
            u.css("width", n + "%"), p.val(o);
        }).prepend(u), p.val(d), p.on("blur", i).on("keydown", n).on("keyup", r), this;
    };
}), define("discover/View/Sidebar/Menu/Color", [ "jquery", "discover/View/Sidebar/Menu", "hgn!templates/discover/color", "discover/lib/filters", "utils/colors", "jquery/plugins/jquery.ui.fancyslider" ], function(t, e, i, n, o) {
    "use strict";
    var r, s = 20;
    return r = e.extend({
        hex: null,
        range: null,
        init: function() {
            this._super.apply(this, arguments), this.hex = n.get("color_hex"), this.range = n.get("color_range") || s;
        },
        search: function() {
            n.change({
                color_hex: this.hex,
                color_range: this.range
            }), this.hide(!0);
        },
        rendered: function() {
            function e() {
                i.removeClass("hide"), c.$view.removeClass("search-option-no-confirm"), c.position();
            }
            var i, n, r, a, l, c = this;
            this._super(), this.$view.addClass("color-popup"), i = this.$view.find(".search-option-confirm"), 
            r = this.$view.find(".hex"), n = this.$view.find(".variance"), a = this.$view.find(".swatch"), 
            l = this.$view.find(".variance-input"), n.attr("id", "sidebar-color-variance"), 
            l.data("forslider", "sidebar-color-variance"), this.$view.on("click", ".color", function() {
                n.slider("value", s).trigger("slide", [ {
                    value: s
                } ]), c.range = s, c.hex = o.checkHex(t(this).css("background-color"), !0), c.search(), 
                r.html("#" + c.hex), a.css("background-color", "#" + c.hex), i.hasClass("hide") && e();
            }), n.fancyslider({
                max: 40,
                min: 0,
                value: this.range,
                step: 2,
                input: "percentage"
            }).on("slidestop", function(t, e) {
                c.range = e.value, c.search();
            }), this.hex && e();
        },
        templateData: function(t) {
            return {
                content: i(t)
            };
        }
    });
}), define("discover/View/Sidebar/Menu/Clients", [ "discover/View/Sidebar/Menu/Autoselect", "page_constants" ], function(t, e) {
    "use strict";
    var i = t.extend({
        save: function(t) {
            return e.CLIENTS = t;
        }
    }, {
        TITLE: "Search Clients",
        TYPE: e.FILTER_KEY_CLIENTS,
        LIMIT: 3,
        LIMIT_MESSAGE: "You may only choose 3 companies."
    });
    return i;
}), define("require/hgn!templates/form/checkbox", [ "hogan" ], function(t) {
    var e = new t.Template({
        code: function(t, e, i) {
            var n = this;
            return n.b(i = i || ""), n.b('<div class="form-item form-item-checkbox'), n.s(n.f("containerClasses", t, e, 1), t, e, 0, 61, 67, "{{ }}") && (n.rs(t, e, function(t, e, i) {
                i.b(" "), i.b(i.v(i.d(".", t, e, 0)));
            }), t.pop()), n.b('" id="'), n.b(n.v(n.f("id", t, e, 0))), n.b('-container">'), 
            n.b("\n" + i), n.b('  <input type="checkbox" id="'), n.b(n.v(n.f("id", t, e, 0))), 
            n.b('" name="'), n.b(n.v(n.f("name", t, e, 0))), n.s(n.f("name", t, e, 1), t, e, 1, 0, 0, "") || n.b(n.v(n.f("id", t, e, 0))), 
            n.b('" class="form-checkbox'), n.s(n.f("classes", t, e, 1), t, e, 0, 222, 228, "{{ }}") && (n.rs(t, e, function(t, e, i) {
                i.b(" "), i.b(i.v(i.d(".", t, e, 0)));
            }), t.pop()), n.s(n.f("validate", t, e, 1), t, e, 0, 253, 276, "{{ }}") && (n.rs(t, e, function(t, e, i) {
                i.b(" validate["), i.b(i.v(i.f("validate", t, e, 0))), i.b("]");
            }), t.pop()), n.b('" value="'), n.b(n.v(n.f("value", t, e, 0))), n.b('" '), n.s(n.f("checked", t, e, 1), t, e, 0, 321, 328, "{{ }}") && (n.rs(t, e, function(t, e, i) {
                i.b("checked");
            }), t.pop()), n.s(n.f("validate", t, e, 1), t, e, 0, 353, 382, "{{ }}") && (n.rs(t, e, function(t, e, i) {
                i.b(' data-validate="'), i.b(i.v(i.f("validate", t, e, 0))), i.b('"');
            }), t.pop()), n.b(">"), n.b("\n" + i), n.b("  "), n.s(n.f("label", t, e, 1), t, e, 0, 409, 467, "{{ }}") && (n.rs(t, e, function(t, e, i) {
                i.b('<label for="'), i.b(i.v(i.f("id", t, e, 0))), i.b('" class="form-label">'), 
                i.b(i.t(i.f("label", t, e, 0))), i.b("</label>");
            }), t.pop()), n.b("\n" + i), n.b("</div>"), n.b("\n"), n.fl();
        },
        partials: {},
        subs: {}
    }, "", t), i = function(t, e) {
        for (var i in e) t[i] = e[i];
        return t;
    }, n = {
        "": null
    }, o = function() {
        return e.render.apply(e, arguments);
    };
    return e.ri = function(t, e, o) {
        return this.r(t, i(n, e), o);
    }, o.template = e, o;
}), define("require/hgn!templates/discover/creative-rank", [ "hogan", "require/hgn!templates/form/checkbox" ], function(t) {
    var e = new t.Template({
        code: function(t, e, i) {
            var n = this;
            return n.b(i = i || ""), n.b('<form class="creative-rank">'), n.b("\n" + i), n.s(n.f("options", t, e, 1), t, e, 0, 41, 60, "{{ }}") && (n.rs(t, e, function(t, e, i) {
                i.b(i.rp("<form/checkbox0", t, e, ""));
            }), t.pop()), n.b("</form>"), n.b("\n"), n.fl();
        },
        partials: {
            "<form/checkbox0": {
                name: "form/checkbox",
                partials: {},
                subs: {}
            }
        },
        subs: {}
    }, "", t), i = function(t, e) {
        for (var i in e) t[i] = e[i];
        return t;
    }, n = {
        "form/checkbox": arguments[1].template,
        "": null
    }, o = function() {
        return e.render.apply(e, arguments);
    };
    return e.ri = function(t, e, o) {
        return this.r(t, i(n, e), o);
    }, o.template = e, o;
}), define("discover/View/Sidebar/Menu/Rank", [ "page_constants", "discover/lib/filters", "discover/View/Sidebar/Menu", "hgn!templates/discover/creative-rank", "jquery/plugins/jquery.custominput" ], function(t, e, i, n) {
    "use strict";
    return i.extend({
        templateData: function() {
            return {
                title: "Filter by Creative Index",
                content: n({
                    options: t.RANKS
                })
            };
        },
        rendered: function() {
            var t = this.$view.find("input").customInput().on("change", function() {
                var i = t.filter(":checked").toArray().map(function(t) {
                    return t.value;
                }).join("|");
                e.change("rank", i);
            }.bind(this));
            this._super();
        },
        position: function() {
            this._super();
        }
    });
}), define("discover/View/Sidebar/Menu/Awards", [ "discover/View/Sidebar/Menu/Autoselect", "page_constants" ], function(t, e) {
    "use strict";
    return t.extend({
        save: function(t) {
            return e.AWARDS = t;
        }
    }, {
        TITLE: "Search Awards",
        TYPE: e.FILTER_KEY_AWARDS,
        LIMIT: 3,
        LIMIT_MESSAGE: "You may only choose 3 awards."
    });
}), define("discover/View/Sidebar/Fields", [ "nbd/View/Element", "discover/lib/filters" ], function(t, e) {
    "use strict";
    var i = t.extend({
        init: function(t) {
            this._super.apply(this, arguments), this.$view = t, e.on("field", function(t) {
                this.$view.toggleClass("menu-mode", !!t);
            }, this), this.rendered();
        },
        destroy: function() {
            e.off(null, null, this), this._super();
        },
        rendered: function() {
            this.$view.toggleClass("menu-mode", !!e.get("field")).on("click", ".list-header", this.toggle.bind(this)), 
            this.hide();
        },
        show: function() {
            return this.$view && this.$view.removeClass("menu-closed");
        },
        hide: function() {
            return this.$view && this.$view.addClass("menu-closed");
        },
        toggle: function() {
            return this.$view && this.$view.toggleClass("menu-closed");
        }
    });
    return i;
}), define("discover/View/Sidebar/Search", [ "jquery", "nbd/View", "nbd/util/async", "lib/autosource", "discover/lib/filters", "hgn!templates/discover/suggest-item", "page_constants", "jquery/be/autosuggest" ], function(t, e, i, n, o, r, s) {
    "use strict";
    var a = t.map(s.FIELDS, function(t, e) {
        return {
            id: e,
            value: t,
            type: "field"
        };
    }), l = e.extend({
        labels: {
            field: "Creative Fields"
        },
        init: function(t) {
            this.$view = t, this.rendered();
        },
        template: r,
        templater: function() {
            var e = null, n = function() {
                e = null;
            }, o = function(o) {
                return null === e && i(n), e !== o.type && (o = t.extend({
                    divider: !0,
                    typelabel: this.labels[o.type]
                }, o), e = o.type), this.template(o);
            };
            return o;
        },
        rendered: function() {
            function e(t) {
                i.autosuggest(t === s.CONTENT_KEY_PROJECTS ? "enable" : "disable");
            }
            this.$view.addClass("ui-front");
            var i = this.$view.find("#search"), r = n({
                maxLocal: 5,
                caseInsensitive: !0
            }).addLocal(a), l = function(e, i) {
                var n = i.item, r = t(this);
                if (n) return o.change(n.type, n.id || n.value), "search" !== n.type ? (r.val(""), 
                !1) : void r.autosuggest("close");
            };
            i.autosuggest({
                source: r,
                position: {
                    at: "left+1 center"
                },
                itemTemplate: this.templater().bind(this),
                width: i.outerWidth() - 2,
                minLength: 2
            }).on({
                autosuggestselect: l,
                keydown: function(e) {
                    return e.isDefaultPrevented() || e.keyCode !== t.ui.keyCode.ENTER && e.keyCode !== t.ui.keyCode.NUMPAD_ENTER ? void 0 : l.call(this, e, {
                        item: {
                            type: "search",
                            value: this.value
                        }
                    });
                }
            }), e(o.get("content")), o.on("content", e);
        }
    });
    return l;
}), $.fn.readMoreBox = function(t) {
    var e = this, i = e.height(), n = e.css("max-height", "").height("auto").height(), o = !1;
    e.height(i), t.hide(), i !== n && (i > n ? e.height(n) : t.show().find(".fake-link").on("click", function() {
        var r = i, s = "remove";
        o || (r = n, s = "add"), e.animate({
            height: r
        }), t[s + "Class"]("viewing-all"), o = !o;
    }));
}, define("jquery/plugins/jquery.readmorebox", function() {}), define("discover/View/Sidebar/Tag", [ "jquery", "nbd/View/Element", "discover/lib/filters", "page_constants", "jquery/plugins/jquery.readmorebox", "Fn" ], function(t, e, i, n) {
    "use strict";
    var o = e.extend({
        init: function() {
            this._super.apply(this, arguments), this.rendered();
        },
        rendered: function() {
            this.$list = this.$parent.find("#object-tags"), this.$list_all = this.$parent.find("#object-tags-see-all"), 
            this.$count = this.$parent.find(".tags-number"), this.$list.on("click", ".object-tag", function() {
                var e, n = i.get("user_tags"), o = n ? n.toString().split("|") : [], r = t(this).attr("value"), s = o.indexOf(r), a = -1 === s;
                a ? o.push(r) : o.splice(s, 1), e = o && o.length ? o.join("|") : void 0, i.set("user_tags", e);
            }), i.on("user_tags", function(t) {
                t = t || "";
                var e = t.toString().split("|");
                this.$list.find(".selected").removeClass("selected"), e.forEach(function(t) {
                    this.$list.find("[value=" + t + "]").addClass("selected");
                }.bind(this));
            }, this);
        },
        destroy: function() {
            i.off(this), this._super();
        },
        empty: function() {
            this.$list.empty(), this.$list_all.hide();
        },
        hide: function() {
            this.$parent.hide(), this.$list_all.hide();
        },
        show: function() {
            this.$parent.show(), this.$list_all.show();
        },
        populate: function(e) {
            var o = Object.keys(e).length, r = i.get("user_tags") ? i.get("user_tags").toString() : "";
            return o ? (this.show(), t.each(e, function(e, i) {
                n.TAGS[e] = i;
                var o = t('<div class="object-tag left" value="' + e + '">' + i.n + "</div>");
                -1 !== r.indexOf(e) && o.addClass("selected"), this.$list.append(o);
            }.bind(this)), this.$count.html(o), this.$list.css({
                maxHeight: "125px",
                height: ""
            }), this.$list_all.find(".fake-link").off("click"), void this.$list.readMoreBox(this.$list_all)) : void this.hide();
        }
    });
    return o;
}), define("discover/View/Sidebar", [ "jquery", "nbd/util/diff", "nbd/View/Element", "discover/View/Sidebar/Menu/School", "discover/View/Sidebar/Menu/Tool", "discover/View/Sidebar/Menu/Color", "discover/View/Sidebar/Menu/Clients", "discover/View/Sidebar/Menu/Rank", "discover/View/Sidebar/Menu/Awards", "discover/View/Sidebar/Fields", "discover/View/Sidebar/Search", "discover/View/Sidebar/Tag", "discover/lib/filters", "page_constants" ], function(t, e, i, n, o, r, s, a, l, c, u, d, p, h) {
    "use strict";
    var f = i.extend({
        template: t,
        lastTags: !1,
        getTags: function() {
            var i = p.get("field"), n = p.get("content"), o = h.TOPTAGS.CATEGORIES[n], r = h.TOPTAGS.ENTITIES[n], s = {
                entity: r,
                category: o
            };
            return this.tags.empty(), i || n === h.CONTENT_KEY_WIPS ? (i && (s.field = i), void ((!this.lastTags || Object.keys(e(s, this.lastTags)).length) && (this.lastTags = t.extend({}, s), 
            t.ajax({
                url: "/tags/getTopTags",
                data: s
            }).then(function(t) {
                return t.json && "object" == typeof t.json ? void this.tags.populate(t.json) : void this.tags.hide();
            }.bind(this))))) : (this.lastTags = {}, void this.tags.hide());
        },
        rendered: function() {
            var t, e, i, h, f, b, m, v, g = this.$parent.find("#sidebar-fields"), w = this.$parent.find(".filter-schools").parent(), y = this.$parent.find(".filter-tools").parent(), _ = this.$parent.find(".filter-color").parent(), x = this.$parent.find(".filter-index").parent(), S = this.$parent.find(".filter-clients").parent(), T = this.$parent.find(".filter-awards").parent(), C = this.$parent.find("#related-tags"), k = this.$parent.find("#search-container");
            i = new n(w), w.on("click", i.toggle.bind(i)), h = new o(y), y.on("click", h.toggle.bind(h)), 
            f = new r(_), _.on("click", f.toggle.bind(f)), b = new a(x), x.on("click", b.toggle.bind(b)), 
            m = new s(S), S.on("click", m.toggle.bind(m)), v = new l(T), T.on("click", v.toggle.bind(v)), 
            t = new c(g), e = new u(k), this.tags = new d(C), p.on("field", this.getTags, this), 
            p.on("content", this.getTags, this), this.getTags();
        },
        destroy: function() {
            p.off(null, null, this), this._super();
        }
    });
    return f;
}), define("discover/sidebar", [ "jquery", "nbd/util/async", "nbd/util/media", "page_constants", "discover/lib/filters", "discover/View/Sidebar" ], function(t, e, i, n, o, r) {
    "use strict";
    var s = {
        init: function(t) {
            var s, a = t.find("#filters"), l = this.sticky.bind(this, t);
            l(), i.on("all", l), o.on([ n.FILTER_KEY_SEARCH, n.FILTER_KEY_USER_TAGS, n.FILTER_KEY_SCHOOLS, n.FILTER_KEY_TOOLS, n.FILTER_KEY_CLIENTS, n.FILTER_KEY_COLOR_HEX ].join(" "), function() {
                e(l);
            }, this), s = new r(a), s.rendered();
        },
        destroy: function() {
            o.off(null, null, this);
        },
        sticky: function(e) {
            var i = e.find("#sidebar-fixed"), n = t(".js-nav-primary").height() + t("#sorts-container").height() + 20;
            return i.data("sticky") ? (i.data("sticky").topSpacing = n, void i.sticky("update")) : void i.sticky({
                wrapperClassName: "sticky",
                topSpacing: n
            }).parent().css("height", "");
        }
    };
    return s;
}), define("discover/lib/url", [ "jquery", "nbd/util/async", "nbd/util/diff", "nbd/util/deparam", "discover/lib/filters", "discover/lib/correction", "vendor/misc/history" ], function(t, e, i, n, o, r, s) {
    "use strict";
    function a() {
        var t, e = i(o.data(), o.DEFAULTS);
        for (t in e) e[t] = e[t][0], void 0 === e[t] && delete e[t];
        return e;
    }
    function l(t) {
        if (t.originalEvent) {
            var e = s.getState(), i = e.data;
            (i && i.filters || !Object.keys(i).length) && (o.rectify(i.filters && i.filters.content), 
            o.DEFAULTS = i.defaults || o.DEFAULTS, o.reset(), r.clear(i.changed), o.change(i.filters));
        }
    }
    function c() {
        c.count = c.count || 0, c.count++ || e(d);
    }
    var u, d, p = new RegExp("(?:" + window.location.pathname + "|search)\\?([^#]*)");
    return u = function(e) {
        var i = p.exec(decodeURIComponent(this.href));
        i && (e.preventDefault(), i = n(i[1]), s.enabled ? o.change(i) : window.location = "/search?" + t.param(t.extend(a(), i)));
    }, d = function() {
        var e, l = s.getState().data.filters || n(window.location.search.replace(/^\?/, "")), u = a();
        Object.keys(i(u, l)).length && (e = decodeURIComponent("/search?" + t.param(u)), 
        s.pushState({
            filters: u,
            changed: r.changed(),
            defaults: o.DEFAULTS
        }, document.title, e)), c.count = 0;
    }, {
        init: function(e) {
            t(window).on("popstate", l), t(document.body).on("click", e || "", u), o.on("all", c);
        },
        destroy: function() {
            t(window).off(l), t(document.body).off(u), o.off(null, c);
        }
    };
}), define("be/trait/popupSession", [ "jquery", "has", "log", "nbd/trait/pubsub", "nbd/util/media", "be/responsive", "be/onhistory", "be/spinner", "vendor/misc/history" ], function(t, e, i, n, o, r, s, a, l) {
    "use strict";
    i = i.get("popupSession");
    var c = function(t) {
        if (!this.singleton || !this.singleton._view) return void (this.entrance = l.getStateId());
        var e = l.getState(), i = e.data;
        i && i[t] ? o.is("desktop") ? this.show(e) : location.replace(e.url) : (this.singleton.reset(), 
        this.entrance = l.getCurrentIndex());
    }, u = function(t) {
        var e = {};
        return e[t] = {
            current_title: document.title,
            current_url: window.location.href
        }, e;
    }, d = t('<div class="blocking-div">'), p = {
        init: function(i) {
            if (this.singleton) return this.onhist;
            var n = s(u.bind(this, this.entity));
            return r.init(), this.onhist = function() {
                o.is("desktop") && !e("touch") && n.apply(this, arguments);
            }, this.singleton = new this.Dialog("object" == typeof i ? i : void 0), this.singleton.on("preload", function() {
                d.appendTo(document.body), a.show(), a._$default.css("z-index", d.css("z-index") + 1);
            }).on("postload", function() {
                a.hide(), d.remove();
            }).on("exit", function() {
                var t = l.getStateByIndex(this.entrance);
                l.pushState(t.data, t.title, t.url);
            }, this), this.entrance = l.getCurrentIndex(), this.stateChange = c.bind(this, this.entity), 
            t(window).on("statechange", this.stateChange), t(document.body).on("click", this.selector, this.onhist), 
            this.onhist;
        },
        show: function(t) {
            var e = this;
            this.trigger("prerender"), this.singleton.close(), this.singleton.open(t.url).then(function(t) {
                e.trigger("postrender", t);
            }, function(t) {
                "readyState" in t && 0 === t.readyState || i.error(t);
            });
        },
        destroy: function() {
            this.singleton && this.singleton.destroy(), this.off(), t(window).off("statechange", this.stateChange), 
            t(document.body).off("click", this.onhist);
        }
    };
    return t.extend(p, n);
}), define("be/Controller/Dialog/EntityPopup", [ "nbd/trait/promise", "nbd/trait/pubsub", "lib/xhr", "be/Controller/Dialog" ], function(t, e, i, n) {
    "use strict";
    function o(e) {
        if (!e.styles) return e;
        var i = e.styles.local || [], n = new t();
        return i = i.filter(function(t) {
            return t;
        }), require(i.map(function(t) {
            return "css!styles/" + t;
        }), n.resolve.bind(null, e), n.reject), n.thenable();
    }
    var r = n.extend({
        prefilter: function(t) {
            return t;
        },
        _initView: function() {
            this._super.apply(this, arguments), this._view && this.listenTo(this._view, "exit", function() {
                this.trigger("exit");
            });
        },
        open: function(t) {
            this.trigger("preload", t);
            var e = i(t).then(this.prefilter).then(o).then(function(t) {
                this._model._data = {}, this._model.set(t);
            }.bind(this)).then(this.render.bind(this)), n = this.trigger.bind(this, "postload");
            return e.then(n, n), e;
        },
        close: function() {
            return this.visible() && this._view.hide(!0), this;
        },
        render: function() {
            var t, e;
            return this._view.$view || (t = document.body), e = this._view.render(t), this._view.show(), 
            e;
        },
        reset: function() {
            this.visible() && (this._view.hide(!0), this._view.destroy());
        },
        visible: function() {
            return this._view.$view && this._view.$view.hasClass("shown");
        }
    }).mixin(e);
    return r;
}), define("be/style", [ "jquery" ], function(t) {
    "use strict";
    function e(e, i) {
        "undefined" != typeof e.styleSheet ? e.styleSheet.cssText = (e.styleSheet.cssText || "") + i : t(e).append(i);
    }
    function i(t, e) {
        "string" == typeof e && e.length && (t.styleSheet && "undefined" != typeof t.styleSheet.cssText ? t.styleSheet.cssText = e : t.innerHTML = e);
    }
    function n(t) {
        return t.styleSheet && "undefined" != typeof t.styleSheet.cssText ? t.styleSheet.cssText : t.innerHTML;
    }
    return {
        add: e,
        set: i,
        get: n
    };
}), define("lib/adobeanalytics", [ "log" ], function(t) {
    "use strict";
    return t = t.get("adobeanalytics"), {
        page: function() {
            if ("undefined" != typeof s_adobe) try {
                s_adobe.pageName = (window.location.hostname + window.location.pathname).replace(/\//g, ":").replace(/^www\./, ""), 
                s_adobe.t();
            } catch (e) {
                t.error(e);
            }
        }
    };
}), define("nbd/event", [ "./util/extend", "./trait/pubsub" ], function(t, e) {
    "use strict";
    var i = t({}, e);
    return i.bind = i.on, i.unbind = i.off, i.fire = i.trigger, i;
}), define("be/moreToggle", [ "jquery" ], function(t) {
    "use strict";
    function e(e, i) {
        i = i || {}, e.each(function() {
            function e() {
                return o.css("height", "auto").removeClass("hide"), {
                    extended: o.height(),
                    "short": n.height()
                };
            }
            var n = t(this), o = n.next(), r = i.$more || n.find(".variable-text-link"), s = i.$less || o.find(".variable-text-link"), a = "speed" in i ? i.speed : 250;
            o.css({
                overflow: "hidden"
            }), r.on("click", function() {
                var t = e();
                n.addClass("hide"), o.css("height", t.short + "px").animate({
                    height: t.extended + "px"
                }, a);
            }), s.on("click", function() {
                o.animate({
                    height: e().short + "px"
                }, a, function() {
                    n.removeClass("hide"), o.addClass("hide");
                });
            });
        });
    }
    return e.off = function(e, i) {
        i = i || {}, e.each(function() {
            var e = t(this), n = e.next(), o = i.$more || e.find(".variable-text-link"), r = i.$less || n.find(".variable-text-link");
            o.off("click"), r.off("click");
        });
    }, e;
}), define("be/spam", [ "lib/xhr", "be/modal/simple" ], function(t, e) {
    "use strict";
    function i(i, r, s) {
        e({
            title: "Mark as Spam",
            html: "Are you sure you want to mark this " + o[i] + " as spam?"
        }).then(function() {
            t({
                type: "POST",
                url: n + i + "/" + r
            }).then(function() {
                s && s.text("Marked as Spam");
            });
        });
    }
    var n = "/v2/report/spam/", o = {
        user: "person",
        project: "project",
        wip: "work in progress",
        projectcomment: "comment",
        wip_revisioncomment: "comment",
        message: "message",
        team: "team"
    };
    return {
        report: i
    };
}), define("require/hgn!templates/message", [ "hogan" ], function(t) {
    var e = new t.Template({
        code: function(t, e, i) {
            var n = this;
            return n.b(i = i || ""), n.b('<form class="send-message">'), n.b("\n" + i), n.s(n.f("body", t, e, 1), t, e, 0, 39, 53, "{{ }}") && (n.rs(t, e, function(t, e, i) {
                i.b(i.rp("<textarea0", t, e, ""));
            }), t.pop()), n.b("</form>"), n.b("\n"), n.fl();
        },
        partials: {
            "<textarea0": {
                name: "textarea",
                partials: {},
                subs: {}
            }
        },
        subs: {}
    }, "", t), i = function(t, e) {
        for (var i in e) t[i] = e[i];
        return t;
    }, n = {
        "": null
    }, o = function() {
        return e.render.apply(e, arguments);
    };
    return e.ri = function(t, e, o) {
        return this.r(t, i(n, e), o);
    }, o.template = e, o;
}), define("require/hgn!templates/form/textarea", [ "hogan" ], function(t) {
    var e = new t.Template({
        code: function(t, e, i) {
            var n = this;
            return n.b(i = i || ""), n.b('<div class="form-item form-item-textarea'), n.s(n.f("containerClasses", t, e, 1), t, e, 0, 61, 67, "{{ }}") && (n.rs(t, e, function(t, e, i) {
                i.b(" "), i.b(i.v(i.d(".", t, e, 0)));
            }), t.pop()), n.b('">'), n.b("\n" + i), n.b("  "), n.s(n.f("label", t, e, 1), t, e, 0, 103, 142, "{{ }}") && (n.rs(t, e, function(t, e, i) {
                i.b('<label for="'), i.b(i.v(i.f("id", t, e, 0))), i.b('">'), i.b(i.t(i.f("label", t, e, 0))), 
                i.b("</label>");
            }), t.pop()), n.b("\n" + i), n.b('  <textarea id="'), n.b(n.v(n.f("id", t, e, 0))), 
            n.b('" name="'), n.b(n.v(n.f("id", t, e, 0))), n.b('" class="form-textarea'), n.s(n.f("classes", t, e, 1), t, e, 0, 223, 229, "{{ }}") && (n.rs(t, e, function(t, e, i) {
                i.b(" "), i.b(i.v(i.d(".", t, e, 0)));
            }), t.pop()), n.b('"'), n.b("\n" + i), n.b("    "), n.s(n.f("maxlength", t, e, 1), t, e, 0, 261, 287, "{{ }}") && (n.rs(t, e, function(t, e, i) {
                i.b(' maxlength="'), i.b(i.v(i.f("maxlength", t, e, 0))), i.b('"');
            }), t.pop()), n.b("\n" + i), n.b("    "), n.s(n.f("placeholder", t, e, 1), t, e, 0, 322, 352, "{{ }}") && (n.rs(t, e, function(t, e, i) {
                i.b(' placeholder="'), i.b(i.v(i.f("placeholder", t, e, 0))), i.b('"');
            }), t.pop()), n.b("\n" + i), n.b("    "), n.s(n.f("autocomplete", t, e, 1), t, e, 0, 390, 422, "{{ }}") && (n.rs(t, e, function(t, e, i) {
                i.b(' autocomplete="'), i.b(i.v(i.f("autocomplete", t, e, 0))), i.b('"');
            }), t.pop()), n.b("\n" + i), n.b('    data-validate="'), n.b(n.v(n.f("validate", t, e, 0))), 
            n.b('">'), n.b(n.v(n.f("value", t, e, 0))), n.b("</textarea>"), n.b("\n" + i), n.b("</div>"), 
            n.b("\n"), n.fl();
        },
        partials: {},
        subs: {}
    }, "", t), i = function(t, e) {
        for (var i in e) t[i] = e[i];
        return t;
    }, n = {
        "": null
    }, o = function() {
        return e.render.apply(e, arguments);
    };
    return e.ri = function(t, e, o) {
        return this.r(t, i(n, e), o);
    }, o.template = e, o;
}), define("be/trait/message", [ "be/form", "hgn!templates/message", "hgn!templates/form/textarea" ], function(t, e, i) {
    "use strict";
    return {
        mustache: e,
        partials: {
            textarea: i.template
        },
        templateData: function() {
            return {
                classes: [ "message" ],
                title: "Message",
                buttons: [ {
                    label: "Send",
                    classes: [ "form-button-default", "form-submit" ]
                }, {
                    label: "Cancel",
                    classes: [ "form-button-cancel" ]
                } ],
                contactName: this._model.get("name"),
                body: {
                    id: "message",
                    placeholder: "Message",
                    containerClasses: [ "message-body" ],
                    validate: "required,Generic",
                    classes: [ "form-text-normal" ]
                }
            };
        },
        rendered: function() {
            var e = this;
            this._form = new t(this.$view), this._form.commit = function(t) {
                return this.then(function() {
                    e.hide();
                }), e._controller.create(t.data.message).then(function() {
                    e.$view.find(".form-textarea").val(""), e.hide();
                });
            }, this.$view.on("click", ".form-button-cancel", function() {
                this.$view.find(".form-textarea").val("");
            }.bind(this)).find("textarea").focus(), this._super();
        }
    };
}), define("be/Controller/Dialog/Message", [ "jquery", "be/Controller/Dialog/Roulette", "be/View/Dialog/Layover", "be/View/Dialog/Menu", "be/View/Dialog/Popup", "be/trait/message" ], function(t, e, i, n, o, r) {
    "use strict";
    var s, a = "/v2/inbox/threads";
    return s = e.extend({
        create: function(e) {
            return t.ajax({
                url: a,
                type: "POST",
                data: {
                    recipients: this._model.get("id"),
                    message: e
                }
            });
        },
        render: function(e) {
            t(document.body).hasClass("logged-in") && (this.$source = t(e), this._model.set({
                id: this.$source.data("contact_id") || this.$source.attr("contact_id"),
                name: this.$source.data("contact_name")
            }), this._super(e));
        }
    }, {
        VIEW_CLASS: {
            phone: i.extend(r),
            tablet: n.extend(r),
            desktop: o.extend(r).extend({
                templateData: function() {
                    var t = this._super();
                    return t.title = "Send Message to " + t.contactName, t;
                }
            })
        }
    });
}), define("be/trait/form/toggle", [ "jquery" ], function(t) {
    "use strict";
    function e(e) {
        var i = t("<input>", {
            type: "checkbox",
            name: e[0].id,
            value: "1",
            checked: e.hasClass("active")
        }).hide();
        return i.insertAfter(e), i;
    }
    return {
        toggleElement: function(i) {
            i.each(function(i) {
                var n = e(i = t(this).on("click", function() {
                    var t = !n.prop("checked");
                    n.prop("checked", t).change(), i.toggleClass("active", t);
                }));
            });
        }
    };
}), define("be/trait/form/submit", [ "jquery", "nbd/trait/promise", "nbd/util/media", "lib/validate", "lib/tooltip", "lib/showMessages" ], function(t, e, i, n, o, r) {
    "use strict";
    function s(t, e) {
        var i = t[e.name];
        return t[e.name] = i ? [].concat(i, e.value) : e.value, t;
    }
    var a = function(t) {
        var e = {};
        if (Object.keys(t).forEach(function(i) {
            var o = this.find('[name="' + i + '"]').data("validate");
            n(t[i], o) || (e[i] = n.message);
        }, this), Object.keys(e).length) throw e;
        return t;
    };
    return {
        continuousValidation: function() {
            var e = this.$view.find("input, textarea");
            e.each(function() {
                var e = t(this), i = e.data("validate");
                e.on("blur", function() {
                    e.parent().find(".form-error").remove(), n(e.val(), i) || o(e, n.message);
                });
            });
        },
        onSubmit: function(n, l, c) {
            l = l || this.$view;
            var u = l.is("form") ? l : l.find("form");
            l.on("click keydown", ".form-submit:not([type=submit])", function(t) {
                switch (t.which) {
                  case 1:
                  case 13:
                  case 32:
                    u.submit();
                }
            }), u.on("submit", function(l) {
                var d = new e(), p = u.serializeArray().reduce(s, {}), h = {
                    url: u.attr("action"),
                    type: u.attr("method") || "POST"
                };
                return l.originalEvent = l.originalEvent || {}, u.find(".form-error").remove(), 
                u.find(".form-item-error").removeClass("form-item-error"), l.originalEvent.promise = (l.isDefaultPrevented() && !u.attr("onsubmit") ? d : d.then(a.bind(u))).then(function(i) {
                    if (h.data = i, "function" != typeof n) return t.ajax(h);
                    var o = new e(), r = o.thenable(), s = n.call(r, i);
                    return o.resolve(s === r ? t.ajax(h) : s), o;
                }).then(function() {
                    c || u.find(":input").val("").removeAttr("checked selected");
                }, function(t) {
                    var e, n;
                    if (t instanceof Error) return void console.error(t);
                    throw t.responseJSON && (t = t.responseJSON), t.messages && r(u, t.messages), console.warn(t), 
                    e = t.errors || t, n = i.is("desktop") ? [ "form-error" ] : [ "form-error", "form-error-right" ], 
                    Object.keys(e).forEach(function(t) {
                        o(u.find("[name=" + t + "]"), e[t], n);
                    }), t;
                }), d.resolve(p), !1;
            });
        },
        onCancel: function(t) {
            this.$view.on("click", ".form-button-cancel", function() {
                this.$view.find(".form-text, .form-textarea").val(""), "function" == typeof t && t();
            }.bind(this));
        }
    };
}), define("be/trait/form", [ "nbd/util/extend", "be/trait/form/list", "be/trait/form/toggle", "be/trait/form/submit" ], function(t, e, i, n) {
    "use strict";
    return t({}, n, e, i);
}), define("lib/recaptcha", [ "nbd/trait/promise" ], function(t) {
    "use strict";
    return function(e, i, n, o) {
        var r = new t();
        return "object" != typeof n && (o = n, n = {}), o = o || "//www.google.com/recaptcha/api/js/recaptcha_ajax.js", 
        require([ o ], function() {
            Recaptcha.create(e, i, n), r.resolve(Recaptcha);
        }, r.reject), r.thenable();
    };
}), define("require/hgn!templates/form/text", [ "hogan" ], function(t) {
    var e = new t.Template({
        code: function(t, e, i) {
            var n = this;
            return n.b(i = i || ""), n.b('<div class="'), n.s(n.f("unstyled", t, e, 1), t, e, 1, 0, 0, "") || n.b("form-item form-item-text"), 
            n.b(" be-placeholder"), n.s(n.f("containerClasses", t, e, 1), t, e, 0, 98, 104, "{{ }}") && (n.rs(t, e, function(t, e, i) {
                i.b(" "), i.b(i.v(i.d(".", t, e, 0)));
            }), t.pop()), n.b('" id="'), n.b(n.v(n.f("id", t, e, 0))), n.b('-container">'), 
            n.b("\n" + i), n.b("  "), n.s(n.f("label", t, e, 1), t, e, 0, 162, 201, "{{ }}") && (n.rs(t, e, function(t, e, i) {
                i.b('<label for="'), i.b(i.v(i.f("id", t, e, 0))), i.b('">'), i.b(i.t(i.f("label", t, e, 0))), 
                i.b("</label>");
            }), t.pop()), n.b("\n" + i), n.b('  <input name="'), n.b(n.v(n.f("name", t, e, 0))), 
            n.s(n.f("name", t, e, 1), t, e, 1, 0, 0, "") || n.b(n.v(n.f("id", t, e, 0))), n.b('" type="text" class="'), 
            n.s(n.f("unstyled", t, e, 1), t, e, 1, 0, 0, "") || n.b("form-text"), n.s(n.f("classes", t, e, 1), t, e, 0, 327, 333, "{{ }}") && (n.rs(t, e, function(t, e, i) {
                i.b(" "), i.b(i.v(i.d(".", t, e, 0)));
            }), t.pop()), n.b(" validate["), n.b(n.v(n.f("validate", t, e, 0))), n.b(']" id="'), 
            n.b(n.v(n.f("id", t, e, 0))), n.b('"'), n.b("\n" + i), n.b("  "), n.s(n.f("disabled", t, e, 1), t, e, 0, 397, 417, "{{ }}") && (n.rs(t, e, function(t, e, i) {
                i.b(' disabled="disabled"');
            }), t.pop()), n.b("\n" + i), n.b("  "), n.s(n.f("placeholder", t, e, 1), t, e, 0, 449, 481, "{{ }}") && (n.rs(t, e, function(t, e, i) {
                i.b(' placeholder="'), i.b(i.t(i.f("placeholder", t, e, 0))), i.b('"');
            }), t.pop()), n.b("\n" + i), n.b("  "), n.s(n.f("autocomplete", t, e, 1), t, e, 0, 517, 549, "{{ }}") && (n.rs(t, e, function(t, e, i) {
                i.b(' autocomplete="'), i.b(i.v(i.f("autocomplete", t, e, 0))), i.b('"');
            }), t.pop()), n.b("\n" + i), n.b("  "), n.s(n.f("autocapitalize", t, e, 1), t, e, 0, 588, 624, "{{ }}") && (n.rs(t, e, function(t, e, i) {
                i.b(' autocapitalize="'), i.b(i.v(i.f("autocapitalize", t, e, 0))), i.b('"');
            }), t.pop()), n.b("\n" + i), n.b("  "), n.s(n.f("autocorrect", t, e, 1), t, e, 0, 662, 692, "{{ }}") && (n.rs(t, e, function(t, e, i) {
                i.b(' autocorrect="'), i.b(i.v(i.f("autocorrect", t, e, 0))), i.b('"');
            }), t.pop()), n.b("\n" + i), n.b("  "), n.s(n.f("value", t, e, 1), t, e, 0, 721, 739, "{{ }}") && (n.rs(t, e, function(t, e, i) {
                i.b(' value="'), i.b(i.v(i.f("value", t, e, 0))), i.b('"');
            }), t.pop()), n.b("\n" + i), n.b('  data-validate="'), n.b(n.v(n.f("validate", t, e, 0))), 
            n.b('">'), n.b("\n" + i), n.b("</div>"), n.b("\n"), n.fl();
        },
        partials: {},
        subs: {}
    }, "", t), i = function(t, e) {
        for (var i in e) t[i] = e[i];
        return t;
    }, n = {
        "": null
    }, o = function() {
        return e.render.apply(e, arguments);
    };
    return e.ri = function(t, e, o) {
        return this.r(t, i(n, e), o);
    }, o.template = e, o;
}), define("require/hgn!templates/lib/_report", [ "hogan", "require/hgn!templates/form/textarea", "require/hgn!templates/form/text" ], function(t) {
    var e = new t.Template({
        code: function(t, e, i) {
            var n = this;
            return n.b(i = i || ""), n.b('<div class="entity-report">'), n.b("\n" + i), n.b('  <div class="header-text">Report</div>'), 
            n.b("\n" + i), n.b("  <form>"), n.b("\n" + i), n.s(n.f("disclaimer", t, e, 1), t, e, 0, 96, 159, "{{ }}") && (n.rs(t, e, function(t, e, n) {
                n.b('    <span class="disclaimer-wrap">'), n.b(n.t(n.f("disclaimer", t, e, 0))), 
                n.b("</span>"), n.b("\n" + i);
            }), t.pop()), n.b("\n" + i), n.s(n.d("options.0", t, e, 1), t, e, 0, 194, 376, "{{ }}") && (n.rs(t, e, function(t, e, n) {
                n.b('    <ul id="reason" class="divided-list menu-section">'), n.b("\n" + i), n.s(n.f("options", t, e, 1), t, e, 0, 268, 349, "{{ }}") && (n.rs(t, e, function(t, e, n) {
                    n.b('      <li class="divided-item reason" data-value="'), n.b(n.v(n.f("id", t, e, 0))), 
                    n.b('">'), n.b(n.v(n.f("reason", t, e, 0))), n.b("</li>"), n.b("\n" + i);
                }), t.pop()), n.b("    </ul>"), n.b("\n" + i);
            }), t.pop()), n.b("\n" + i), n.b('    <div class="menu-section">'), n.b("\n" + i), 
            n.s(n.f("comments", t, e, 1), t, e, 0, 442, 461, "{{ }}") && (n.rs(t, e, function(t, e, i) {
                i.b(i.rp("<form/textarea0", t, e, ""));
            }), t.pop()), n.b("    </div>"), n.b("\n"), n.b("\n" + i), n.b('    <div class="menu-section">'), 
            n.b("\n" + i), n.s(n.f("email", t, e, 1), t, e, 0, 534, 549, "{{ }}") && (n.rs(t, e, function(t, e, i) {
                i.b(i.rp("<form/text1", t, e, ""));
            }), t.pop()), n.b("    </div>"), n.b("\n"), n.b("\n" + i), n.s(n.f("captcha", t, e, 1), t, e, 0, 588, 970, "{{ }}") && (n.rs(t, e, function(t, e, n) {
                n.b('    <div id="becaptcha" class="menu-section">'), n.b("\n" + i), n.b('      <div id="recaptcha_image"></div>'), 
                n.b("\n" + i), n.b('      <div class="form-item form-item-text">'), n.b("\n" + i), 
                n.b('        <input id="recaptcha_response_field" name="recaptcha_response_field" class="form-text form-text-normal" type="text" placeholder="Enter the code shown above">'), 
                n.b("\n" + i), n.b("      </div>"), n.b("\n" + i), n.b('      <div class="recaptcha-generate">Generate new</div>'), 
                n.b("\n" + i), n.b("    </div>"), n.b("\n" + i);
            }), t.pop()), n.b("  </form>"), n.b("\n"), n.b("\n" + i), n.b("</div>"), n.b("\n"), 
            n.fl();
        },
        partials: {
            "<form/textarea0": {
                name: "form/textarea",
                partials: {},
                subs: {}
            },
            "<form/text1": {
                name: "form/text",
                partials: {},
                subs: {}
            }
        },
        subs: {}
    }, "", t), i = function(t, e) {
        for (var i in e) t[i] = e[i];
        return t;
    }, n = {
        "form/textarea": arguments[1].template,
        "form/text": arguments[2].template,
        "": null
    }, o = function() {
        return e.render.apply(e, arguments);
    };
    return e.ri = function(t, e, o) {
        return this.r(t, i(n, e), o);
    }, o.template = e, o;
}), define("be/trait/report", [ "jquery", "nbd/util/extend", "lib/recaptcha", "hgn!templates/lib/_report" ], function(t, e, i, n) {
    "use strict";
    return {
        mustache: n,
        templateData: function() {
            return e({
                title: "Report",
                classes: [ "report" ],
                buttons: [ {
                    label: "Send",
                    classes: [ "left", "form-button-default", "form-submit" ]
                }, {
                    label: "Cancel",
                    classes: [ "left", "form-button-cancel" ]
                } ],
                comments: {
                    id: "message",
                    placeholder: "Comments",
                    classes: [ "form-text-normal" ]
                }
            }, this._model.data(), t(document.body).hasClass("logged-out") ? {
                email: {
                    id: "email",
                    placeholder: "Email Address",
                    classes: [ "form-text-normal" ]
                }
            } : {});
        },
        captcha: function() {
            var t = this._model.get("captcha"), e = this.$view.find("#becaptcha");
            t && i(t.api_key, e[0], {
                theme: "custom",
                custom_theme_widget: "becaptcha"
            }, t.script_url).then(function(t) {
                e.on("click", ".recaptcha-generate", function() {
                    t.reload();
                });
            });
        },
        rendered: function() {
            this.selectList(), this.captcha(), this.onSubmit(function(t) {
                this._controller.create(t).then(this.hide.bind(this));
            }.bind(this)), this.onCancel(), this._super();
        },
        hide: function() {
            this._super.apply(this, arguments), this.$view = null;
        }
    };
}), define("be/Controller/Report", [ "lib/xhr", "be/Controller/Dialog/Roulette", "be/View/Dialog/Layover", "be/View/Dialog/Menu", "be/View/Dialog/Popup", "be/trait/form", "be/trait/report" ], function(t, e, i, n, o, r, s) {
    "use strict";
    var a = e.extend({
        init: function() {
            this._super.apply(this, arguments), this.path = this._model.get("CONSTANTS").REPORT_URL + this._model.id();
        },
        create: function(e) {
            return t({
                url: this.path,
                type: "POST",
                data: e
            });
        },
        read: function() {
            var e = t({
                url: this.path
            });
            return e.then(this._model.set.bind(this._model)), e;
        },
        render: function() {
            var t = this, e = this._super, i = arguments;
            this.read().then(function() {
                e.apply(t, i);
            }).then(this._view.show.bind(this._view));
        }
    }, {
        VIEW_CLASS: {
            phone: i.extend(s).mixin(r),
            tablet: n.extend(s).mixin(r),
            desktop: o.extend(s).mixin(r)
        }
    });
    return a;
}), define("require/hgn!templates/project/collection", [ "hogan" ], function(t) {
    var e = new t.Template({
        code: function(t, e, i) {
            var n = this;
            return n.b(i = i || ""), n.b("<form>"), n.b("\n" + i), n.b('  <div class="form-item form-item-text form-item-siamese left">'), 
            n.b("\n" + i), n.b('    <input type="text" placeholder="Create a New Collection"'), 
            n.b("\n" + i), n.b('    name="collection" class="form-text">'), n.b("\n" + i), n.b("  </div>"), 
            n.b("\n" + i), n.b('  <div class="form-item form-item-a form-item-siamese left">'), 
            n.b("\n" + i), n.b('    <a class="form-button form-submit form-button-light-and-grey">Add</a>'), 
            n.b("\n" + i), n.b("  </div>"), n.b("\n"), n.b("\n" + i), n.b('  <ul id="collection_ids" class="divided-list'), 
            n.s(n.f("collections", t, e, 1), t, e, 1, 0, 0, "") || n.b(" empty"), n.b('">'), 
            n.b("\n" + i), n.s(n.f("collections", t, e, 1), t, e, 0, 433, 511, "{{ }}") && (n.rs(t, e, function(t, e, n) {
                n.b('    <li class="divided-item collection" data-key="'), n.b(n.v(n.f("id", t, e, 0))), 
                n.b('">'), n.b(n.v(n.f("title", t, e, 0))), n.b("</li>"), n.b("\n" + i);
            }), t.pop()), n.b("  </ul>"), n.b("\n" + i), n.b("</form>"), n.b("\n"), n.fl();
        },
        partials: {},
        subs: {}
    }, "", t), i = function(t, e) {
        for (var i in e) t[i] = e[i];
        return t;
    }, n = {
        "": null
    }, o = function() {
        return e.render.apply(e, arguments);
    };
    return e.ri = function(t, e, o) {
        return this.r(t, i(n, e), o);
    }, o.template = e, o;
}), define("project/trait/collection", [ "jquery", "hgn!templates/project/collection" ], function(t, e) {
    "use strict";
    return {
        mustache: e,
        title: "Collections",
        templateData: function() {
            return t.extend({
                classes: [ "list-popup" ],
                title: this.title,
                button: {
                    label: "Save",
                    containerClasses: [ "left" ],
                    classes: [ "form-button-default", "collections-save", "form-button-small" ]
                },
                buttons: [ {
                    label: "Save",
                    classes: [ "form-button-default", "collections-save" ]
                } ]
            }, this._model.data());
        },
        rendered: function() {
            this._super(), this.bindSelections(), this.newCollection(), this.saveCollections();
        },
        saveCollections: function() {
            this.$view.on("click", ".collections-save", function() {
                this._controller.update(), this.hide();
            }.bind(this));
        },
        newCollection: function() {
            var t = this.$view.find("form");
            t.on("submit", function() {
                var e = t.serializeArray(), i = e[0].value;
                return this._controller.create(i).then(function() {
                    this.$view.remove(), this.$view = null, this.render(), this.show(), this.position();
                }.bind(this)), !1;
            }.bind(this)).on("click", ".form-submit", function() {
                t.submit();
            });
        },
        bindSelections: function() {
            var e = this;
            this.select(this._model.get("project_collection_ids")), this.listenTo(this._model, "project_collection_ids", this.select), 
            this.$view.on("click", ".collection", function() {
                var i, n = t(this).data("key"), o = e._model.get("project_collection_ids");
                ~(i = o.indexOf(n)) ? o.splice(i, 1) : o.push(n), e._model.trigger("project_collection_ids", o);
            });
        },
        select: function(t) {
            return this.$view.find(".collection").removeClass("active"), t && t.forEach(function(t) {
                this.$view.find(".collection[data-key=" + t + "]").addClass("active");
            }, this);
        }
    };
}), define("project/Controller/Collection", [ "log", "moment", "be/xhr", "be/Controller/Dialog/Roulette", "be/View/Dialog/Layover", "be/View/Dialog/Menu", "be/View/Dialog/Popup", "project/trait/collection" ], function(t, e, i, n, o, r, s, a) {
    "use strict";
    var l, c;
    return t = t.get("Project Collection"), c = function(e) {
        "readyState" in e && 0 === e.readyState || t.error(e);
    }, l = n.extend({
        create: function(t) {
            return i({
                url: "/collection/create",
                type: "POST",
                data: {
                    collection_name: t
                }
            }).then(function(i) {
                var n = i.id, o = +e().format("X");
                if (!n) throw i;
                return {
                    id: n,
                    title: t,
                    owners: [],
                    url: "/collection/" + encodeURIComponent(t) + "/" + n,
                    created_on: o,
                    modified_on: o
                };
            }).then(function(t) {
                return this._model.get("collections").unshift(t), this._model.get("project_collection_ids").unshift(t.id), 
                this.update(), t;
            }.bind(this));
        },
        read: function() {
            var t = i({
                url: "/gallery/collections/" + this._model.id()
            }).then(function(t) {
                if (!t.project_collection_ids) throw t;
                return t.collections.sort(function(e, i) {
                    return t.project_collection_ids.indexOf(+i.id) - t.project_collection_ids.indexOf(+e.id);
                }), t;
            });
            return t.then(this._model.set.bind(this._model), c), t;
        },
        update: function() {
            return i({
                url: "/collection/project/" + this._model.id(),
                type: "POST",
                data: {
                    collection_ids: this._model.get("project_collection_ids").join("|")
                }
            }).then(null, c);
        },
        render: function() {
            var t = this, e = this._super, i = arguments;
            this.read().then(function() {
                e.apply(t, i);
            }).then(this._view.show.bind(this._view));
        }
    }, {
        VIEW_CLASS: {
            phone: o.extend(a),
            tablet: r.extend(a),
            desktop: s.extend(a).mixin({
                title: "Add to Collections"
            })
        }
    });
}), define("require/hgn!templates/project/viralIcons", [ "hogan" ], function(t) {
    var e = new t.Template({
        code: function(t, e, i) {
            var n = this;
            return n.b(i = i || ""), n.b('<a href="https://twitter.com/share" class="twitter-share-button viral-button-twitter" data-url="'), 
            n.b(n.v(n.f("url", t, e, 0))), n.b('" data-text="'), n.b(n.v(n.f("title", t, e, 0))), 
            n.b('" data-via="Behance" data-count="none">Tweet</a>'), n.b("\n" + i), n.b('<span class="viral-button-linkedin"><script type="IN/Share" data-url="'), 
            n.b(n.v(n.f("url", t, e, 0))), n.b('"></script></span>'), n.b("\n" + i), n.s(n.f("no_pinterest", t, e, 1), t, e, 1, 0, 0, "") || (n.b('<div class="viral-button viral-button-pinterest"></div>'), 
            n.b("\n" + i)), n.b('<span class="viral-button-stumble"><su:badge layout="4" location="'), 
            n.b(n.v(n.f("url", t, e, 0))), n.b('"></su:badge></span>'), n.b("\n" + i), n.b('<div class="fb-like" data-send="false" data-layout="button_count" data-width="90" data-show-faces="false"></div>'), 
            n.b("\n"), n.fl();
        },
        partials: {},
        subs: {}
    }, "", t), i = function(t, e) {
        for (var i in e) t[i] = e[i];
        return t;
    }, n = {
        "": null
    }, o = function() {
        return e.render.apply(e, arguments);
    };
    return e.ri = function(t, e, o) {
        return this.r(t, i(n, e), o);
    }, o.template = e, o;
}), define("project/lib/stickyBar", [ "jquery", "lib/scrollpoint", "lib/social", "be/follow", "be/Controller/Dialog/Message", "project/Controller/Collection", "hgn!templates/project/viralIcons", "jquery/plugins/jquery.sticky" ], function(t, e, i, n, o, r, s) {
    "use strict";
    return {
        init: function(a, l, c) {
            var u = l.is(t(document.body)), d = u ? a.height() + a.offset().top : a.height(), p = u ? t(".js-nav-primary").outerHeight() : 0, h = t('<div id="sticky-sidebar"></div>)').append(t(".sidebar-owner", a).clone()).append(t(".sidebar-actions", a).clone()).append(t(".talent-search-block", a).clone());
            n.init(h), this.message = new o(), this.message.setContext(h.find(".send-message")), 
            this.collection = new r(c.id), this.collection.setContext(h.find(".add-to-collection")), 
            h.find(".viral-icons").html(s({
                url: document.location.href,
                title: document.title,
                no_pinterest: "no-use" === c.copyright.license
            })), e(d, function(e) {
                e && a.find("#sticky-sidebar").length < 1 && (a.append(h), i.init(h), h.sticky({
                    topSpacing: p,
                    bottomSpacing: t("#site-footer").height() + parseInt(t("#content-container").css("margin-bottom"), 10)
                }, t(u ? window : "#project-popup")));
            }, u ? "window" : "#project-popup");
        },
        destroy: function(t) {
            e.off(null, null, t);
        }
    };
}), define("project/lib/info", [ "jquery", "nbd/util/async", "nbd/util/media", "nbd/event", "be/follow", "be/moreToggle", "be/spam", "be/Controller/Dialog/Message", "be/Controller/Dialog/AddToTalentSearch", "be/Controller/Report", "project/Controller/Collection", "project/lib/stickyBar", "lib/picturefill" ], function(t, e, i, n, o, r, s, a, l, c, u, d) {
    "use strict";
    return {
        init: function(d, p, h) {
            r(d.find(".variable-text-short"), {
                speed: 0
            }), this._initStickyBar(d, p), e(function() {
                d.find("#project-header-main").picturefill();
            }), o.init(d), this.message = new a(), this.message.setContext(d.find(".send-message")), 
            this.collection = new u(p.id), this.collection.setContext(d.find(".add-to-collection"));
            var f = d.find(".js-add-talent");
            f.length && (this.talent = new l(f.data("id")), this.talent.setContext(f));
            var b = function(t, e) {
                return function() {
                    v[t]("viewing-all"), m.height(e);
                };
            }, m = d.find("#object-tags"), v = d.find("#object-tags-see-all");
            m.length && (m.prop("scrollHeight") > m.height() ? (v.find(".viewing-less-copy").on("click", b("addClass", m[0].scrollHeight)), 
            v.find(".viewing-more-copy").on("click", b("removeClass", m.height())), v.show()) : m.height("auto")), 
            this.report = new c(p.id, {
                CONSTANTS: h
            }), this.report.setContext(d.find(".js-report")), n.on("report:open", this.report.toggle, this.report), 
            e(function() {
                var t = i.is("desktop");
                p.open_message && t && this.message.toggle(), p.open_collection && t && this.collection.toggle();
            }.bind(this)), d.on("click", ".js-spam-project", function(e) {
                s.report("project", p.id, t(this)), e.preventDefault();
            });
        },
        _initStickyBar: function(n, o) {
            return n.is(t(document.body)) && !i.is("desktop") ? void i.on("desktop:enter", function() {
                d.init(n.find("#project-sidebar"), n, o);
            }) : void e(function() {
                d.init(n.find("#project-sidebar"), n, o);
            });
        },
        destroy: function() {
            d.destroy("#project-popup"), this.message && this.message.destroy(), this.collection && this.collection.destroy(), 
            this.talent && this.talent.destroy(), this.report && (this.report.destroy(), n.off(null, null, this.report));
        }
    };
}), define("beff/util/xhr", [ "jquery", "nbd/Promise" ], function(t, e) {
    "use strict";
    return function() {
        var i, n = new e(), o = t.ajax.apply(t, arguments);
        return n.resolve(o), i = n.thenable(), i.abort = o.abort, i;
    };
}), define("be/stats", [ "jquery", "beff/util/xhr" ], function(t, e) {
    "use strict";
    function i(i, n) {
        var o = t.isFunction(n.back) ? n.back : t.noop, r = n.a;
        if (delete n.a, delete n.back, "s" === r && !n.ids) throw new Error("be/stats called without ids");
        e({
            url: i + "/" + r,
            data: n
        }).then(o);
    }
    function n(t) {
        var e, i = {};
        document.referrer && (t.referrer = document.referrer), window.Config && void 0 !== window.Config.SITE_ID && (t.source = window.Config.SITE_ID);
        for (e in t) t.hasOwnProperty(e) && l.hasOwnProperty(e) && (i[l[e]] = t[e]);
        return i;
    }
    var o, r, s, a = window.Config && window.Config.STAT_URL || "/c", l = {
        action: "a",
        callback: "back",
        entity: "e",
        ids: "ids",
        id: "id",
        type: "t",
        time: "ti",
        contest: "c",
        source: "s",
        referrer: "r"
    };
    return o = function(t) {
        return i(a, n(t));
    }, r = function(t, e, i, n) {
        return o({
            action: t,
            entity: e,
            id: i,
            callback: n
        }), this;
    }, s = {
        get: o,
        view: r.bind(s, "v"),
        appreciate: r.bind(s, "a")
    };
}), define("require/hgn!templates/appreciate", [ "hogan" ], function(t) {
    var e = new t.Template({
        code: function(t, e, i) {
            var n = this;
            return n.b(i = i || ""), n.b('<div id="appreciated-on-content">'), n.b("\n" + i), 
            n.b('  <div class="app-content app-img-container left"></div>'), n.b("\n" + i), 
            n.b('  <div class="app-content app-date">Appreciated on '), n.b(n.v(n.f("date", t, e, 0))), 
            n.b("</div>"), n.b("\n" + i), n.b("</div>"), n.b("\n"), n.fl();
        },
        partials: {},
        subs: {}
    }, "", t), i = function(t, e) {
        for (var i in e) t[i] = e[i];
        return t;
    }, n = {
        "": null
    }, o = function() {
        return e.render.apply(e, arguments);
    };
    return e.ri = function(t, e, o) {
        return this.r(t, i(n, e), o);
    }, o.template = e, o;
}), define("project/View/Appreciation", [ "jquery", "moment", "nbd/View", "be/stats", "hgn!templates/appreciate" ], function(t, e, i, n, o) {
    "use strict";
    var r = i.extend({
        id: 0,
        init: function(t) {
            this.id = t;
        },
        render: function(t) {
            t && (this.$view = t, this.$sticker = this.$view.find("#appreciation-sticker"), 
            this.$tooltip = this.$view.find(".tooltipi"), this.$view.find(".following").hide(), 
            n.view("project", this.id, function(t) {
                this.$view && (t.t > 0 ? this.hide(t.t) : this.show());
            }.bind(this)));
        },
        show: function() {
            var e = this.$view.offset();
            this.$view.find("#appreciate-it").show().on("click", function() {
                e && t("html").animate({
                    scrollTop: e.top - 200
                }, 600), this.$sticker.click();
            }.bind(this)), this.$sticker.addClass("icon-project-appreciate sprite-site-elements ccn-appreciation-sprite").one("click", this.appreciate.bind(this));
        },
        hide: function(t) {
            this.$sticker.after(o({
                date: e.unix(t).format("MMMM Do, YYYY")
            })), this.$tooltip.addClass("tooltipi-project-appreciate-show tooltipi-project-appreciated").show();
        },
        appreciate: function() {
            n.appreciate("project", this.id), this.$sticker.removeClass("icon-project-appreciate").addClass("icon-project-appreciate-thanks"), 
            this.$tooltip.addClass("tooltipi-project-appreciate-show"), (0 !== this.$view.find(".following").length || 0 === this.$view.find(".action-follow-user").length) && this.$tooltip.addClass("tooltipi-no-follow-button"), 
            this.$view.find("#appreciate-it").hide(), t("#appreNum").text(+t("#appreNum").text() + 1);
        }
    });
    return r;
}), define("require/css!styles/jquery/plugins/jquery.fancybox", [], function() {}), 
define("require/css!styles/jquery/plugins/jquery.fancybox-network", [], function() {}), 
function(t, e, i) {
    var n = i(t), o = i(e), r = i.fancybox = function() {
        r.open.apply(this, arguments);
    }, s = !1, a = navigator.userAgent.match(/msie/i), l = null;
    i.extend(r, {
        version: "2.0.4",
        defaults: {
            padding: 15,
            margin: 20,
            width: 800,
            height: 600,
            minWidth: 200,
            minHeight: 200,
            maxWidth: 9999,
            maxHeight: 9999,
            autoSize: !0,
            fitToView: !0,
            aspectRatio: !1,
            topRatio: .5,
            fixed: !1 in e.documentElement || e,
            scrolling: "auto",
            wrapCSS: "fancybox-default",
            arrows: !0,
            closeBtn: !0,
            closeClick: !1,
            nextClick: !1,
            mouseWheel: !0,
            autoPlay: !1,
            playSpeed: 3e3,
            modal: !1,
            loop: !0,
            ajax: {},
            keys: {
                next: [ 13, 32, 34, 39, 40 ],
                prev: [ 8, 33, 37, 38 ],
                close: [ 27 ]
            },
            index: 0,
            type: null,
            href: null,
            content: null,
            title: null,
            tpl: {
                wrap: '<div class="fancybox-wrap"><div class="fancybox-outer"><div class="fancybox-inner"></div></div></div>',
                image: '<img class="fancybox-image" src="{href}" alt="" />',
                iframe: '<iframe class="fancybox-iframe" name="fancybox-frame{rnd}" frameborder="0" hspace="0" ' + (a ? 'allowtransparency="true""' : "") + ' scrolling="{scrolling}" src="{href}"></iframe>',
                swf: '<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="100%" height="100%"><param name="wmode" value="transparent" /><param name="allowfullscreen" value="true" /><param name="allowscriptaccess" value="always" /><param name="movie" value="{href}" /><embed src="{href}" type="application/x-shockwave-flash" allowfullscreen="true" allowscriptaccess="always" width="100%" height="100%" wmode="transparent"></embed></object>',
                error: '<p class="fancybox-error">The requested content cannot be loaded.<br/>Please try again later.</p>',
                closeBtn: '<div title="Close" class="fancybox-item fancybox-close"></div>',
                next: '<a title="Next" class="fancybox-item fancybox-next"><span></span></a>',
                prev: '<a title="Previous" class="fancybox-item fancybox-prev"><span></span></a>'
            },
            openEffect: "fade",
            openSpeed: 250,
            openEasing: "swing",
            openOpacity: !0,
            openMethod: "zoomIn",
            closeEffect: "fade",
            closeSpeed: 250,
            closeEasing: "swing",
            closeOpacity: !0,
            closeMethod: "zoomOut",
            nextEffect: "elastic",
            nextSpeed: 300,
            nextEasing: "swing",
            nextMethod: "changeIn",
            prevEffect: "elastic",
            prevSpeed: 300,
            prevEasing: "swing",
            prevMethod: "changeOut",
            helpers: {
                overlay: {
                    speedIn: 0,
                    speedOut: 300,
                    opacity: .8,
                    css: {
                        cursor: "pointer"
                    },
                    closeClick: !0
                },
                title: {
                    type: "float"
                }
            },
            onCancel: i.noop,
            beforeLoad: i.noop,
            afterLoad: i.noop,
            beforeShow: i.noop,
            afterShow: i.noop,
            beforeClose: i.noop,
            afterClose: i.noop
        },
        group: {},
        opts: {},
        coming: null,
        current: null,
        isOpen: !1,
        isOpened: !1,
        wrap: null,
        outer: null,
        inner: null,
        player: {
            timer: null,
            isActive: !1
        },
        ajaxLoad: null,
        imgPreload: null,
        transitions: {},
        helpers: {},
        open: function(t, e) {
            i.isArray(t) || (t = [ t ]), t.length && (r.close(!0), r.opts = i.extend(!0, {}, r.defaults, e), 
            r.group = t, r._start(r.opts.index || 0));
        },
        cancel: function() {
            r.coming && !1 === r.trigger("onCancel") || (r.coming = null, r.hideLoading(), r.ajaxLoad && r.ajaxLoad.abort(), 
            r.ajaxLoad = null, r.imgPreload && (r.imgPreload.onload = r.imgPreload.onabort = r.imgPreload.onerror = null));
        },
        close: function(t) {
            r.cancel(), r.current && !1 !== r.trigger("beforeClose") && (r.unbindEvents(), !r.isOpen || t && t[0] === !0 ? (i(".fancybox-wrap").stop().trigger("onReset").remove(), 
            r._afterZoomOut()) : (r.isOpen = r.isOpened = !1, i(".fancybox-item").remove(), 
            r.wrap.stop(!0).removeClass("fancybox-opened"), r.inner.css("overflow", "hidden"), 
            r.transitions[r.current.closeMethod]()));
        },
        play: function(t) {
            var e = function() {
                clearTimeout(r.player.timer);
            }, n = function() {
                e(), r.current && r.player.isActive && (r.player.timer = setTimeout(r.next, r.current.playSpeed));
            }, o = function() {
                e(), i("body").unbind(".player"), r.player.isActive = !1, r.trigger("onPlayEnd");
            }, s = function() {
                r.current && (r.current.loop || r.current.index < r.group.length - 1) && (r.player.isActive = !0, 
                i("body").bind({
                    "afterShow.player onUpdate.player": n,
                    "onCancel.player beforeClose.player": o,
                    "beforeLoad.player": e
                }), n(), r.trigger("onPlayStart"));
            };
            r.player.isActive || t && t[0] === !1 ? o() : s();
        },
        next: function() {
            r.current && r.jumpto(r.current.index + 1);
        },
        prev: function() {
            r.current && r.jumpto(r.current.index - 1);
        },
        jumpto: function(t) {
            r.current && (t = parseInt(t, 10), r.group.length > 1 && r.current.loop && (t >= r.group.length ? t = 0 : 0 > t && (t = r.group.length - 1)), 
            "undefined" != typeof r.group[t] && (r.cancel(), r._start(t)));
        },
        reposition: function(t) {
            r.isOpen && r.wrap.css(r._getPosition(t));
        },
        update: function() {
            r.isOpen && (s || (l = setInterval(function() {
                s && (s = !1, clearTimeout(l), r.current && (r.current.autoSize && (r.inner.height("auto"), 
                r.current.height = r.inner.height()), r._setDimension(), r.current.canGrow && r.inner.height("auto"), 
                r.reposition(), r.trigger("onUpdate")));
            }, 100)), s = !0);
        },
        toggle: function() {
            r.isOpen && (r.current.fitToView = !r.current.fitToView, r.update());
        },
        hideLoading: function() {
            i("#fancybox-loading").remove();
        },
        showLoading: function() {
            r.hideLoading(), i('<div id="fancybox-loading"></div>').click(r.cancel).appendTo("body");
        },
        getViewport: function() {
            return {
                x: n.scrollLeft(),
                y: n.scrollTop(),
                w: n.width(),
                h: n.height()
            };
        },
        unbindEvents: function() {
            r.wrap && r.wrap.unbind(".fb"), o.unbind(".fb"), n.unbind(".fb");
        },
        bindEvents: function() {
            var t = r.current, e = t.keys;
            t && (n.bind("resize.fb, orientationchange.fb", r.update), e && o.bind("keydown.fb", function(t) {
                var n;
                t.ctrlKey || t.altKey || t.shiftKey || t.metaKey || !(i.inArray(t.target.tagName.toLowerCase(), [ "input", "textarea", "select", "button" ]) < 0) || (n = t.keyCode, 
                i.inArray(n, e.close) > -1 ? (r.close(), t.preventDefault()) : i.inArray(n, e.next) > -1 ? (r.next(), 
                t.preventDefault()) : i.inArray(n, e.prev) > -1 && (r.prev(), t.preventDefault()));
            }), i.fn.mousewheel && t.mouseWheel && r.group.length > 1 && r.wrap.bind("mousewheel.fb", function(t, e) {
                var n = i(t.target).get(0);
                (0 === n.clientHeight || n.scrollHeight === n.clientHeight) && (t.preventDefault(), 
                r[e > 0 ? "prev" : "next"]());
            }));
        },
        trigger: function(t) {
            var e, n = r[i.inArray(t, [ "onCancel", "beforeLoad", "afterLoad" ]) > -1 ? "coming" : "current"];
            if (n) {
                if (i.isFunction(n[t]) && (e = n[t].apply(n, Array.prototype.slice.call(arguments, 1))), 
                e === !1) return !1;
                n.helpers && i.each(n.helpers, function(e, o) {
                    o && "undefined" != typeof r.helpers[e] && i.isFunction(r.helpers[e][t]) && r.helpers[e][t](o, n);
                }), i.event.trigger(t + ".fb");
            }
        },
        isImage: function(t) {
            return t && t.match(/\.(jpg|gif|png|bmp|jpeg)(.*)?$/i);
        },
        isSWF: function(t) {
            return t && t.match(/\.(swf)(.*)?$/i);
        },
        _start: function(t) {
            var e, n, o, s, a = {}, l = r.group[t] || null;
            return "object" == typeof l && (l.nodeType || l instanceof i) && (e = !0, i.metadata && (a = i(l).metadata())), 
            a = i.extend(!0, {}, r.opts, {
                index: t,
                element: l
            }, i.isPlainObject(l) ? l : a), i.each([ "href", "title", "content", "type" ], function(t, n) {
                a[n] = r.opts[n] || e && i(l).attr(n) || a[n] || null;
            }), "number" == typeof a.margin && (a.margin = [ a.margin, a.margin, a.margin, a.margin ]), 
            a.modal && i.extend(!0, a, {
                closeBtn: !1,
                closeClick: !1,
                nextClick: !1,
                arrows: !1,
                mouseWheel: !1,
                keys: null,
                helpers: {
                    overlay: {
                        css: {
                            cursor: "auto"
                        },
                        closeClick: !1
                    }
                }
            }), r.coming = a, !1 === r.trigger("beforeLoad") ? void (r.coming = null) : (o = a.type, 
            n = a.href, o || (e && (s = i(l).data("fancybox-type"), !s && l.className && (s = l.className.match(/fancybox\.(\w+)/), 
            o = s ? s[1] : null)), !o && n && (r.isImage(n) ? o = "image" : r.isSWF(n) ? o = "swf" : n.match(/^#/) && (o = "inline")), 
            o || (o = e ? "inline" : "html"), a.type = o), "inline" === o || "html" === o ? (a.content = a.content || ("inline" === o && n ? i(n) : l), 
            a.content.length || (o = null)) : (a.href = n || l, a.href || (o = null)), a.group = r.group, 
            void ("image" === o ? r._loadImage() : "ajax" === o ? r._loadAjax() : o ? r._afterLoad() : r._error("type")));
        },
        _error: function(t) {
            i.extend(r.coming, {
                type: "html",
                autoSize: !0,
                minHeight: "0",
                hasError: t,
                content: r.coming.tpl.error
            }), r._afterLoad();
        },
        _loadImage: function() {
            r.imgPreload = new Image(), r.imgPreload.onload = function() {
                this.onload = this.onerror = null, r.coming.width = this.width, r.coming.height = this.height, 
                r._afterLoad();
            }, r.imgPreload.onerror = function() {
                this.onload = this.onerror = null, r._error("image");
            }, r.imgPreload.src = r.coming.href, r.imgPreload.complete || r.showLoading();
        },
        _loadAjax: function() {
            r.showLoading(), r.ajaxLoad = i.ajax(i.extend({}, r.coming.ajax, {
                url: r.coming.href,
                error: function(t, e) {
                    "abort" !== e ? r._error("ajax", t) : r.hideLoading();
                },
                success: function(t, e) {
                    "success" === e && (r.coming.content = t, r._afterLoad());
                }
            }));
        },
        _preload: function() {
            var t = r.group, e = r.current.index, n = function(t) {
                t && r.isImage(t) && (new Image().src = t);
            };
            t.length > 1 && (n(i(t[e + 1] || t[0]).attr("href")), n(i(t[e - 1] || t[t.length - 1]).attr("href")));
        },
        _afterLoad: function() {
            return r.hideLoading(), r.coming && !1 !== r.trigger("afterLoad", r.current) ? (r.isOpened ? (i(".fancybox-item").remove(), 
            r.wrap.stop(!0).removeClass("fancybox-opened"), r.inner.css("overflow", "hidden"), 
            r.transitions[r.current.prevMethod]()) : (i(".fancybox-wrap").stop().trigger("onReset").remove(), 
            r.trigger("afterClose")), r.unbindEvents(), r.isOpen = !1, r.current = r.coming, 
            r.coming = !1, r.wrap = i(r.current.tpl.wrap).addClass("fancybox-tmp " + r.current.wrapCSS).appendTo("body"), 
            r.outer = i(".fancybox-outer", r.wrap).css("padding", r.current.padding + "px"), 
            r.inner = i(".fancybox-inner", r.wrap), r._setContent(), r.trigger("beforeShow"), 
            r._setDimension(), r.wrap.hide().removeClass("fancybox-tmp"), r.bindEvents(), r._preload(), 
            void r.transitions[r.isOpened ? r.current.nextMethod : r.current.openMethod]()) : void (r.coming = !1);
        },
        _setContent: function() {
            var t, e, n = r.current, o = n.type;
            switch (o) {
              case "inline":
              case "ajax":
              case "html":
                t = n.content, "inline" === o && t instanceof i && (t = t.show().detach(), t.parent().hasClass("fancybox-inner") && t.parents(".fancybox-wrap").trigger("onReset").remove(), 
                i(r.wrap).bind("onReset", function() {
                    t.appendTo("body").hide();
                })), n.autoSize && (e = i('<div class="fancybox-tmp"></div>').appendTo(i("body")).append(t), 
                n.width = e.outerWidth(), n.height = e.outerHeight(!0), t = e.contents().detach(), 
                e.remove());
                break;

              case "image":
                t = n.tpl.image.replace("{href}", n.href), n.aspectRatio = !0;
                break;

              case "swf":
                t = n.tpl.swf.replace(/\{width\}/g, n.width).replace(/\{height\}/g, n.height).replace(/\{href\}/g, n.href);
                break;

              case "iframe":
                t = n.tpl.iframe.replace("{href}", n.href).replace("{scrolling}", n.scrolling).replace("{rnd}", new Date().getTime());
            }
            i.inArray(o, [ "image", "swf", "iframe" ]) > -1 && (n.autoSize = !1, n.scrolling = !1), 
            r.inner.append(t);
        },
        _setDimension: function() {
            var t, e, n = r.wrap, o = r.outer, s = r.inner, a = r.current, l = r.getViewport(), c = a.margin, u = 2 * a.padding, d = a.width + u, p = a.height + u, h = a.width / a.height, f = a.maxWidth, b = a.maxHeight, m = a.minWidth, v = a.minHeight;
            if (l.w -= c[1] + c[3], l.h -= c[0] + c[2], d.toString().indexOf("%") > -1 && (d = l.w * parseFloat(d) / 100), 
            p.toString().indexOf("%") > -1 && (p = l.h * parseFloat(p) / 100), a.fitToView && (f = Math.min(l.w, f), 
            b = Math.min(l.h, b)), m = Math.min(d, m), v = Math.min(d, v), f = Math.max(m, f), 
            b = Math.max(v, b), a.aspectRatio ? (d > f && (d = f, p = (d - u) / h + u), p > b && (p = b, 
            d = (p - u) * h + u), m > d && (d = m, p = (d - u) / h + u), v > p && (p = v, d = (p - u) * h + u)) : (d = Math.max(m, Math.min(d, f)), 
            p = Math.max(v, Math.min(p, b))), d = Math.round(d), p = Math.round(p), i(n.add(o).add(s)).width("auto").height("auto"), 
            s.width(d - u).height(p - u), n.width(d), t = n.height(), d > f || t > b) for (;(d > f || t > b) && d > m && t > v; ) p -= 10, 
            a.aspectRatio ? (d = Math.round((p - u) * h + u), m > d && (d = m, p = (d - u) / h + u)) : d -= 10, 
            s.width(d - u).height(p - u), n.width(d), t = n.height();
            a.dim = {
                width: d,
                height: t
            }, a.canGrow = a.autoSize && p > v && b > p, a.canShrink = !1, a.canExpand = !1, 
            d - u < a.width || p - u < a.height ? a.canExpand = !0 : (d > l.w || t > l.h) && d > m && p > v && (a.canShrink = !0), 
            e = t - u, r.innerSpace = e - s.height(), r.outerSpace = e - o.height();
        },
        _getPosition: function(t) {
            var e = r.current, i = r.getViewport(), n = e.margin, o = r.wrap.width() + n[1] + n[3], s = r.wrap.height() + n[0] + n[2], a = {
                position: "absolute",
                top: n[0] + i.y,
                left: n[3] + i.x
            };
            return e.fixed && (!t || t[0] === !1) && s <= i.h && o <= i.w && (a = {
                position: "fixed",
                top: n[0],
                left: n[3]
            }), a.top = Math.ceil(Math.max(a.top, a.top + (i.h - s) * e.topRatio)) + "px", a.left = Math.ceil(Math.max(a.left, a.left + .5 * (i.w - o))) + "px", 
            a;
        },
        _afterZoomIn: function() {
            var t = r.current;
            r.isOpen = r.isOpened = !0, r.wrap.addClass("fancybox-opened").css("overflow", "visible"), 
            r.update(), r.inner.css("overflow", "auto" === t.scrolling ? "auto" : "yes" === t.scrolling ? "scroll" : "hidden"), 
            (t.closeClick || t.nextClick) && r.inner.css("cursor", "pointer").bind("click.fb", t.nextClick ? r.next : r.close), 
            t.closeBtn && i(t.tpl.closeBtn).appendTo(r.wrap).bind("click.fb", r.close), t.arrows && r.group.length > 1 && ((t.loop || t.index > 0) && i(t.tpl.prev).appendTo(r.wrap).bind("click.fb", r.prev), 
            (t.loop || t.index < r.group.length - 1) && i(t.tpl.next).appendTo(r.wrap).bind("click.fb", r.next)), 
            r.trigger("afterShow"), r.opts.autoPlay && !r.player.isActive && (r.opts.autoPlay = !1, 
            r.play());
        },
        _afterZoomOut: function() {
            r.trigger("afterClose"), r.wrap.trigger("onReset").remove(), i.extend(r, {
                group: {},
                opts: {},
                current: null,
                isOpened: !1,
                isOpen: !1,
                wrap: null,
                outer: null,
                inner: null
            });
        }
    }), r.transitions = {
        getOrigPosition: function() {
            var t, e, n = r.current.element, o = {}, s = 50, a = 50;
            return n && n.nodeName && i(n).is(":visible") ? (t = i(n).find("img:first"), t.length ? (o = t.offset(), 
            s = t.outerWidth(), a = t.outerHeight()) : o = i(n).offset()) : (e = r.getViewport(), 
            o.top = e.y + .5 * (e.h - a), o.left = e.x + .5 * (e.w - s)), o = {
                top: Math.ceil(o.top) + "px",
                left: Math.ceil(o.left) + "px",
                width: Math.ceil(s) + "px",
                height: Math.ceil(a) + "px"
            };
        },
        step: function(t, e) {
            var i, n, o;
            ("width" === e.prop || "height" === e.prop) && (n = o = Math.ceil(t - 2 * r.current.padding), 
            "height" === e.prop && (i = (t - e.start) / (e.end - e.start), e.start > e.end && (i = 1 - i), 
            n -= r.innerSpace * i, o -= r.outerSpace * i), r.inner[e.prop](n), r.outer[e.prop](o));
        },
        zoomIn: function() {
            var t, e, n = r.wrap, o = r.current, s = o.dim;
            "elastic" === o.openEffect ? (e = i.extend({}, s, r._getPosition(!0)), delete e.position, 
            t = this.getOrigPosition(), o.openOpacity && (t.opacity = 0, e.opacity = 1), n.css(t).show().animate(e, {
                duration: o.openSpeed,
                easing: o.openEasing,
                step: this.step,
                complete: r._afterZoomIn
            })) : (n.css(i.extend({}, s, r._getPosition())), "fade" === o.openEffect ? n.fadeIn(o.openSpeed, r._afterZoomIn) : (n.show(), 
            r._afterZoomIn()));
        },
        zoomOut: function() {
            var t, e = r.wrap, i = r.current;
            "elastic" === i.closeEffect ? ("fixed" === e.css("position") && e.css(r._getPosition(!0)), 
            t = this.getOrigPosition(), i.closeOpacity && (t.opacity = 0), e.animate(t, {
                duration: i.closeSpeed,
                easing: i.closeEasing,
                step: this.step,
                complete: r._afterZoomOut
            })) : e.fadeOut("fade" === i.closeEffect ? i.closeSpeed : 0, r._afterZoomOut);
        },
        changeIn: function() {
            var t, e = r.wrap, i = r.current;
            "elastic" === i.nextEffect ? (t = r._getPosition(!0), t.opacity = 0, t.top = parseInt(t.top, 10) - 200 + "px", 
            e.css(t).show().animate({
                opacity: 1,
                top: "+=200px"
            }, {
                duration: i.nextSpeed,
                complete: r._afterZoomIn
            })) : (e.css(r._getPosition()), "fade" === i.nextEffect ? e.hide().fadeIn(i.nextSpeed, r._afterZoomIn) : (e.show(), 
            r._afterZoomIn()));
        },
        changeOut: function() {
            var t = r.wrap, e = r.current, n = function() {
                i(this).trigger("onReset").remove();
            };
            t.removeClass("fancybox-opened"), "elastic" === e.prevEffect ? t.animate({
                opacity: 0,
                top: "+=200px"
            }, {
                duration: e.prevSpeed,
                complete: n
            }) : t.fadeOut("fade" === e.prevEffect ? e.prevSpeed : 0, n);
        }
    }, r.helpers.overlay = {
        overlay: null,
        update: function() {
            var t, i, r;
            this.overlay.width(0).height(0), a ? (i = Math.max(e.documentElement.scrollWidth, e.body.scrollWidth), 
            r = Math.max(e.documentElement.offsetWidth, e.body.offsetWidth), t = r > i ? n.width() : i) : t = o.width(), 
            this.overlay.width(t).height(o.height());
        },
        beforeShow: function(t) {
            this.overlay || (this.overlay = i('<div id="fancybox-overlay"></div>').css(t.css || {
                background: "black"
            }).appendTo("body"), this.update(), t.closeClick && this.overlay.bind("click.fb", r.close), 
            n.bind("resize.fb", i.proxy(this.update, this)), this.overlay.fadeTo(t.speedIn || "fast", t.opacity || 1));
        },
        onUpdate: function() {
            this.update();
        },
        afterClose: function(t) {
            this.overlay && this.overlay.fadeOut(t.speedOut || "fast", function() {
                i(this).remove();
            }), this.overlay = null;
        }
    }, r.helpers.title = {
        beforeShow: function(t) {
            var e, n = r.current.title;
            n && (e = i('<div class="fancybox-title fancybox-title-' + t.type + '-wrap">' + n + "</div>").appendTo("body"), 
            "float" === t.type && (e.width(e.width()), e.wrapInner('<span class="child"></span>'), 
            r.current.margin[2] += Math.abs(parseInt(e.css("margin-bottom"), 10))), e.appendTo("over" === t.type ? r.inner : "outside" === t.type ? r.wrap : r.outer));
        }
    }, i.fn.fancybox = function(t) {
        function e(t) {
            var e, o, a = [], l = this.rel;
            t.ctrlKey || t.altKey || t.shiftKey || t.metaKey || (t.preventDefault(), o = i(this).data("fancybox-group"), 
            "undefined" != typeof o ? e = o ? "data-fancybox-group" : !1 : l && "" !== l && "nofollow" !== l && (o = l, 
            e = "rel"), e && (a = s.length ? i(s).filter("[" + e + '="' + o + '"]') : i("[" + e + '="' + o + '"]')), 
            a.length ? (n.index = a.index(this), r.open(a.get(), n)) : r.open(this, n));
        }
        var n = t || {}, s = this.selector || "";
        return s ? o.undelegate(s, "click.fb-start").delegate(s, "click.fb-start", e) : i(this).unbind("click.fb-start").bind("click.fb-start", e), 
        this;
    };
}(window, document, jQuery), define("jquery/plugins/jquery.fancybox", function() {}), 
define("project/lib/highdef", [ "jquery", "jquery/plugins/jquery.fancybox" ], function(t) {
    "use strict";
    var e = {
        padding: 0,
        loop: !0,
        nextEffect: "fade",
        prevEffect: "fade",
        title: "",
        helpers: {
            title: {
                type: "outside"
            }
        }
    }, i = function() {
        var e, i = t(this), n = i.data("hd-src"), o = i.attr("original") || i.attr("src");
        return n ? n : ~(e = o.lastIndexOf("/")) ? o.substring(0, e + 1) + "hd_" + o.substring(e + 1) : o;
    }, n = function() {
        t(this).attr("data-fancybox-group", "gallery").attr("href", i.call(this)).fancybox(e);
    };
    return t.fn.highdef = function() {
        return this.each(n), [ "-moz-zoom-in", "-webkit-zoom-in", "zoom-in", 'url("/assets/img/site/-ie-zoom-in.cur"), pointer, hand' ].forEach(function(t) {
            this.css("cursor", t);
        }, this), this;
    };
}), define("project/trait/mature", [ "nbd/util/extend", "hgn!templates/html", "vendor/misc/history" ], function(t, e) {
    "use strict";
    var i = {
        "restricted-safe": [ {
            label: "Turn off Safe Browsing",
            classes: [ "form-button-default", "form-submit" ]
        }, {
            label: "Cancel",
            classes: [ "form-button-cancel" ]
        } ]
    };
    return {
        mustache: e,
        templateData: function() {
            var e = t({
                classes: [ "mature-blocker", "safe" ]
            }, this._model.data());
            return e.buttons = i[e.access], e;
        },
        rendered: function() {
            this.$view.on("click", ".form-submit", function() {
                this._controller.disableSafeBrowsing().then(this.hide.bind(this)).then(this.destroy.bind(this));
            }.bind(this)).filter(".blocking-div").on("click", function(t) {
                t.stopImmediatePropagation();
            }), this._super();
        }
    };
}), define("project/Controller/MatureContent", [ "lib/xhr", "be/Controller/Dialog", "be/View/Dialog/Layover", "be/View/Dialog/Popup", "project/trait/mature" ], function(t, e, i, n, o) {
    "use strict";
    var r = n.extend(o), s = i.extend(o), a = e.extend({
        render: function() {
            this._view && (this._view.render(document.body), this._view.position());
        },
        disableSafeBrowsing: function() {
            return t({
                type: "POST",
                url: "/account/settings?step=safe_browsing",
                data: {
                    safe_browsing_setting: "N"
                }
            }).then(function() {
                window.location.reload();
            }, console.error);
        }
    }, {
        VIEW_CLASS: {
            phone: s,
            tablet: r,
            desktop: r
        }
    });
    return a;
}), define("require/hgn!templates/project/matureLogin", [ "hogan" ], function(t) {
    var e = new t.Template({
        code: function(t, e, i) {
            var n = this;
            return n.b(i = i || ""), n.b('<div class="mature-message">'), n.b("\n" + i), n.b('  You must log in or sign up for Behance<br class="hide-phone">'), 
            n.b("\n" + i), n.b("  to view projects containing adult content."), n.b("\n" + i), 
            n.s(n.f("login", t, e, 1), t, e, 0, 150, 162, "{{ }}") && (n.rs(t, e, function(t, e, i) {
                i.b(i.rp("<button0", t, e, ""));
            }), t.pop()), n.b("</div>"), n.b("\n"), n.b("\n" + i), n.b('<div class="popup-buttons">'), 
            n.b("\n" + i), n.b('  Don\'t Have an Account? <a class="signup" href="/signup">Sign up for Behance</a>'), 
            n.b("\n" + i), n.b("</div>"), n.b("\n"), n.fl();
        },
        partials: {
            "<button0": {
                name: "button",
                partials: {},
                subs: {}
            }
        },
        subs: {}
    }, "", t), i = function(t, e) {
        for (var i in e) t[i] = e[i];
        return t;
    }, n = {
        "": null
    }, o = function() {
        return e.render.apply(e, arguments);
    };
    return e.ri = function(t, e, o) {
        return this.r(t, i(n, e), o);
    }, o.template = e, o;
}), define("project/Controller/MatureLogin", [ "be/Controller/Dialog", "be/View/Dialog/Layover", "be/View/Dialog/Popup", "vendor/misc/history", "hgn!templates/project/matureLogin" ], function(t, e, i, n, o) {
    "use strict";
    var r = {
        mustache: o,
        hide: function() {
            n.back();
        }
    }, s = i.extend(r), a = e.extend(r), l = t.extend({
        render: function() {
            this._view && (this._view.render(document.body), this._view.position());
        }
    }, {
        VIEW_CLASS: {
            phone: a,
            tablet: s,
            desktop: s
        }
    });
    return l;
}), define("project/lib/mature", [ "project/Controller/MatureContent", "project/Controller/MatureLogin" ], function(t, e) {
    "use strict";
    var i = {
        init: function(i, n, o) {
            if (n.mature_content) {
                var r, s;
                if ("logged-out" === n.mature_access) r = new e({
                    classes: [ "mature-blocker", "log-in" ],
                    title: "Log In",
                    login: {
                        classes: [ "form-button-default", "form-button-large", "js-adobeid-signin" ],
                        label: "Log In"
                    }
                }); else {
                    if (s = o.MATURE_ACCESS[n.mature_access], !s) return;
                    r = new t(i, {
                        title: "This project contains adult content",
                        html: s,
                        access: n.mature_access
                    });
                }
                r.render(), this.popup = r;
            }
        },
        destroy: function() {
            this.popup && this.popup.destroy();
        }
    };
    return i;
}), define("project/lib/embed", [ "jquery", "nbd/util/async" ], function(t, e) {
    "use strict";
    var i = function() {
        var i = t(this).removeAttr("allowscriptaccess"), n = i.closest(".module");
        "transparent" !== i.attr("wmode") && (n.height() && n.height(n.height()), i.attr("wmode", "transparent").hide(), 
        e(function() {
            i.show();
        }));
    }, n = function() {
        return this.each(i);
    };
    return n.init = function(e) {
        t("#primary-project-content .module embed", e).embedFix();
    }, t.fn.embedFix = n;
}), define("project/lib/content", [ "jquery", "nbd/util/async", "lib/scrollpoint", "project/View/Appreciation", "project/lib/highdef", "project/lib/mature", "project/lib/embed" ], function(t, e, i, n, o, r) {
    "use strict";
    return {
        init: function(t, i, o) {
            r.init(i.id, i, o), this.appreciate = new n(i.id), this.appreciate.render(t.find("#appreciation")), 
            e(function() {
                this.lazyload(t);
            }.bind(this)), t.find(".module embed").embedFix(), t.is(".hd_images_enabled") && t.find(".hd_avail").highdef();
        },
        lazyload: function(e) {
            var n = e.find(".module.image img:not(.lazy-load):last").offset() || e.find(".module.image img.lazy-load:first").offset(), o = e.closest(".popup");
            n && i(n.top - e.offset().top - window.innerHeight, function() {
                e.find(".module.image img.lazy-load").each(function() {
                    var e = t(this);
                    e.attr("src", e.attr("original")).css("opacity", 0).one("load", function() {
                        e.animate({
                            opacity: 1
                        }, 150), e.removeClass("lazy-load");
                    });
                });
            }, o.length ? "#project-popup" : "window");
        },
        destroy: function() {
            this.appreciate && this.appreciate.destroy(), r.destroy();
        }
    };
}), define("lib/loadmore", [ "jquery", "nbd/Class", "nbd/util/construct", "nbd/util/extend" ], function(t, e, i, n) {
    "use strict";
    var o = e.extend({
        loading: !1,
        moreSelector: ".see-more-button-container",
        init: function(e, i, n) {
            this.data = i || {}, this.callback = n, this.loading = !1, this.$content = e, this.$more = t(this.moreSelector, this.data.$pagination), 
            this.get = this.more.bind(this, void 0), this.$more.on("click", this.get), this.before();
        },
        set: function(t) {
            return n(this.data, t), this;
        },
        destroy: function() {
            this.$more.off("click", this.get);
        },
        load: function(e) {
            return t.ajax({
                data: t.extend({}, this.data, e)
            });
        },
        more: function(t) {
            return this.loading = !0, this.load(t).then(this.render.bind(this)).done(this.after.bind(this)).done(this.callback);
        },
        render: function(e) {
            return this.loading = !1, e.html ? t(e.html).appendTo(this.$content) : e;
        },
        before: function() {},
        after: function() {}
    }, {
        init: function() {
            return i.apply(this, arguments);
        }
    });
    return o;
}), define("require/hgn!templates/comment", [ "hogan" ], function(t) {
    var e = new t.Template({
        code: function(t, e, i) {
            var n = this;
            return n.b(i = i || ""), n.b('<li class="comment-container cfix '), n.s(n.d("user.owner", t, e, 1), t, e, 0, 49, 62, "{{ }}") && (n.rs(t, e, function(t, e, i) {
                i.b("owner-comment");
            }), t.pop()), n.s(n.d("user.owner", t, e, 1), t, e, 1, 0, 0, "") || n.b("user-comment"), 
            n.b('" data-id="'), n.b(n.v(n.f("id", t, e, 0))), n.b('">'), n.b("\n" + i), n.b('  <a class="comment-user-image-link left" href="'), 
            n.b(n.v(n.d("user.url", t, e, 0))), n.b('">'), n.b("\n" + i), n.b('    <img class="comment-user-image js-mini-profile" data-id="'), 
            n.b(n.v(n.d("user.id", t, e, 0))), n.b('" src="'), n.b(n.v(n.d("user.image", t, e, 0))), 
            n.b('">'), n.b("\n" + i), n.b("  </a>"), n.b("\n" + i), n.b('  <div class="comment-text-container left relative">'), 
            n.b("\n" + i), n.b('    <div class="comment-user-date-wrap ui-corner cfix">'), n.b("\n" + i), 
            n.b('      <a class="user-name-link bold js-mini-profile" data-id="'), n.b(n.v(n.d("user.id", t, e, 0))), 
            n.b('" href="'), n.b(n.v(n.d("user.url", t, e, 0))), n.b('">'), n.b(n.v(n.d("user.name", t, e, 0))), 
            n.b("</a>"), n.b("\n" + i), n.s(n.f("replied_to", t, e, 1), t, e, 0, 548, 639, "{{ }}") && (n.rs(t, e, function(t, e, n) {
                n.b('      <span class="bold">replied to <a href="'), n.b(n.v(n.d("user.url", t, e, 0))), 
                n.b('">'), n.b(n.v(n.d("user.name", t, e, 0))), n.b("</a></span>"), n.b("\n" + i);
            }), t.pop()), n.b('      <span class="comment-date hide-phone">'), n.b(n.v(n.f("posted_on", t, e, 0))), 
            n.b("</span>"), n.b("\n" + i), n.b("    </div>"), n.b("\n" + i), n.b('    <div class="comment-text-wrap"><div class="comment-text">'), 
            n.b(n.t(n.f("comment", t, e, 0))), n.b("</div></div>"), n.b("\n" + i), n.b('    <span class="comment-date show-phone">'), 
            n.b(n.v(n.f("posted_on", t, e, 0))), n.b("</span>"), n.b("\n" + i), n.b("  </div>"), 
            n.b("\n" + i), n.b('  <div class="comment-actions">'), n.b("\n" + i), n.s(n.d("permissions.flag", t, e, 1), t, e, 0, 947, 1008, "{{ }}") && (n.rs(t, e, function(t, e, n) {
                n.b('    <a class="comment-action comment-spam js-spam"></a>'), n.b("\n" + i);
            }), t.pop()), n.s(n.d("permissions.close", t, e, 1), t, e, 0, 1056, 1120, "{{ }}") && (n.rs(t, e, function(t, e, n) {
                n.b('    <a class="comment-action comment-close js-delete"></a>'), n.b("\n" + i);
            }), t.pop()), n.b("  </div>"), n.b("\n" + i), n.b("</li>"), n.b("\n"), n.fl();
        },
        partials: {},
        subs: {}
    }, "", t), i = function(t, e) {
        for (var i in e) t[i] = e[i];
        return t;
    }, n = {
        "": null
    }, o = function() {
        return e.render.apply(e, arguments);
    };
    return e.ri = function(t, e, o) {
        return this.r(t, i(n, e), o);
    }, o.template = e, o;
}), define("be/View/Comment", [ "jquery", "nbd/View/Entity", "nbd/util/pipe", "be/modal/simple", "hgn!templates/comment" ], function(t, e, i, n, o) {
    "use strict";
    var r = {
        3e3: "close",
        5e3: "flag"
    }, s = e.extend({
        template: i(o, t),
        templateData: function() {
            var t = this._super();
            return t.permissions = t.permissions.reduce(function(t, e) {
                return t[r[e]] = !0, t;
            }, {}), t;
        },
        rendered: function() {
            this.$view.hide().fadeIn().on("click", ".js-delete", function() {
                this.$view.fadeOut(this.trigger.bind(this, "remove"));
            }.bind(this)).on("click", ".js-spam", function() {
                n({
                    title: "Mark as Spam",
                    html: "Are you sure you want to mark this comment as spam?"
                }).then(function() {
                    this.$view.find(".js-spam").remove(), this.trigger("spam");
                }.bind(this));
            }.bind(this));
        }
    });
    return s;
}), define("be/Controller/Comment", [ "nbd/Controller/Entity", "nbd/Model", "be/View/Comment", "nbd/trait/pubsub" ], function(t, e, i, n) {
    "use strict";
    var o = t.extend({
        id: function() {
            return this._model && this._model.id();
        },
        _initView: function() {
            this._super.apply(this, arguments), this.listenTo(this._view, "all", this.trigger);
        },
        destroy: function() {
            this.stopListening(), this._super();
        }
    }, {
        MODEL_CLASS: e,
        VIEW_CLASS: i
    }).mixin(n);
    return o;
}), define("be/comments", [ "jquery", "log", "nbd/trait/pubsub", "lib/loadmore", "be/Controller/Comment" ], function(t, e, i, n, o) {
    "use strict";
    return e = e.get("be/comments"), n.extend({
        _posts: [],
        destroy: function() {
            this.stopListening(), this.clear(), this._super();
        },
        load: function(e) {
            return t.ajax({
                url: "/comments/" + this.data.type,
                data: t.extend({
                    sort_order: "desc"
                }, this.data, e)
            });
        },
        render: function(t) {
            var e;
            return t && t.comments && (e = t.comments.map(this._makePost, this), this._posts = this._posts.concat(e)), 
            this._posts["asc" === this.data.order ? "reduceRight" : "reduce"](function(t, e) {
                return e.render(t.$content), t;
            }, this), t;
        },
        after: function() {
            this.data.offset = this._posts.length ? this._posts[this._posts.length - 1].id() : void 0;
        },
        _makePost: function(t) {
            var e = new o(t.id, t);
            return this.listenTo(e, "remove", this.remove.bind(this, e)).listenTo(e, "spam", this.spam.bind(this, e)), 
            e;
        },
        add: function(t) {
            var e = t instanceof o ? t : this._makePost(t);
            this._posts.unshift(e), this.render();
        },
        remove: function(i) {
            var n;
            ~(n = this._posts.indexOf(i)) && (e.info("deleting comment:", i.id()), t.ajax({
                type: "DELETE",
                url: "/comments/" + this.data.type + "?comment_id=" + i.id()
            }), this._posts.splice(n, 1), i.destroy());
        },
        spam: function(i) {
            e.info("spamming comment:", i.id()), t.ajax({
                type: "POST",
                url: "/v2/report/spam/" + this.data.type + "comment/" + i.id()
            });
        },
        clear: function() {
            return this._posts.forEach(function(t) {
                t.destroy();
            }), this._posts = [], this;
        }
    }).mixin(i);
}), define("require/hgn!templates/error", [ "hogan" ], function(t) {
    var e = new t.Template({
        code: function(t, e, i) {
            var n = this;
            return n.b(i = i || ""), n.b('<div class="error-bar">'), n.b(n.t(n.f("message", t, e, 0))), 
            n.b("</div>"), n.b("\n"), n.fl();
        },
        partials: {},
        subs: {}
    }, "", t), i = function(t, e) {
        for (var i in e) t[i] = e[i];
        return t;
    }, n = {
        "": null
    }, o = function() {
        return e.render.apply(e, arguments);
    };
    return e.ri = function(t, e, o) {
        return this.r(t, i(n, e), o);
    }, o.template = e, o;
}), define("be/error", [ "jquery", "nbd/View/Element", "nbd/util/pipe", "hgn!templates/error" ], function(t, e, i, n) {
    "use strict";
    function o(t) {
        return ~t.indexOf("&lt;") ? s.html(t).text() : t;
    }
    var r, s = t("<div>"), a = e.extend({
        template: i(n, t),
        templateData: function() {
            return {
                message: "Oops, an error occurred. | <a class='js-reload'>Please Refesh.</a>"
            };
        },
        render: function(t) {
            return t = t ? {
                message: o(t)
            } : null, this._super(t);
        },
        rendered: function() {
            this.$view.on("click", ".js-reload", function() {
                window.location.reload();
            }).show();
        },
        hide: function() {
            return this.$view && this.$view.hide();
        }
    }), l = {
        init: function(t) {
            return r = new a(t);
        },
        show: function(t) {
            r && r.render(t);
        },
        hide: function() {
            r && r.hide();
        },
        Errorline: a
    };
    return l;
}), define("be/mentionSource", [ "log", "nbd/trait/promise", "lib/xhr" ], function(t, e, i) {
    "use strict";
    function n(t) {
        for (var e = {}, i = 0; i < t.length; ++i) e[t[i].id] = t[i];
        return e;
    }
    function o(t) {
        var e = {};
        return t.filter(function(t) {
            return t.id in e ? !1 : (e[t.id] = t, !0);
        });
    }
    function r(t) {
        return c = n(t);
    }
    function s() {
        var t;
        return c ? (t = new e(), t.resolve(c)) : t = i(u.local).then(r), t;
    }
    function a(t) {
        return s().then(v.bind(t));
    }
    function l(t, n) {
        l._cache = l._cache || {}, l._cache[t] = l._cache[t] || {};
        var o, r;
        return n.length < d && (r = []), l._cache[t][n] && (r = l._cache[t][n]), r ? (o = new e(), 
        o.resolve(r), o) : i({
            url: t,
            data: {
                q: n
            }
        }).then(function(e) {
            return r = b.call(e, n), l._cache[t][n] = r, r;
        });
    }
    var c, u = {
        global: "/mentions/search",
        following: "/mentions/search/following",
        local: ""
    }, d = 2, p = 5, h = function(t) {
        return this[t];
    }, f = function(t) {
        var e = this.toLocaleLowerCase();
        return 0 === t.first_name.toLocaleLowerCase().indexOf(e) || 0 === t.last_name.toLocaleLowerCase().indexOf(e) || 0 === t.username.toLocaleLowerCase().indexOf(e);
    }, b = function(t) {
        return this.filter(f, t);
    }, m = function(t) {
        return Object.keys(this).map(h, this).filter(f, t);
    }, v = function(t) {
        return m.call(t, this);
    };
    t = t.get("be/mentionSource");
    var g = l.bind(null, u.following), w = l.bind(null, u.global);
    return {
        init: function(t) {
            return t.maxResults && (p = t.maxResults), t.minLength && (d = t.minLength), t.local && (u.local = t.local), 
            c = null, this;
        },
        getLocal: s,
        source: function(e, i) {
            function n() {
                i(o(s).slice(0, p));
            }
            var r = [ a, g, w ].map(function(t) {
                return t(e.term);
            }), s = [];
            r.reduce(function(e, i) {
                return (e ? e.then(function() {
                    return i;
                }) : i).then(function(t) {
                    t.forEach(function(t) {
                        t.value = t.username;
                    }), s = s.concat(t), n();
                }, function(e) {
                    t.error(e);
                });
            }, null).then(null, n);
        }
    };
}), define("require/hgn!templates/lib/_menu/_user", [ "hogan" ], function(t) {
    var e = new t.Template({
        code: function(t, e, i) {
            var n = this;
            return n.b(i = i || ""), n.b('<li class="ui-menu-item">'), n.b("\n" + i), n.b('  <a class="mention-user-wrap">'), 
            n.b("\n" + i), n.b('    <img class="mention-user-image" src="'), n.b(n.v(n.d("images.50", t, e, 0))), 
            n.b('" />'), n.b("\n" + i), n.b('    <div class="mention-displayname">'), n.b(n.v(n.f("display_name", t, e, 0))), 
            n.b("</div>"), n.b("\n" + i), n.b('    <div class="mention-username">@'), n.b(n.v(n.f("username", t, e, 0))), 
            n.b("</div>"), n.b("\n" + i), n.b("  </a>"), n.b("\n" + i), n.b("</li>"), n.b("\n"), 
            n.fl();
        },
        partials: {},
        subs: {}
    }, "", t), i = function(t, e) {
        for (var i in e) t[i] = e[i];
        return t;
    }, n = {
        "": null
    }, o = function() {
        return e.render.apply(e, arguments);
    };
    return e.ri = function(t, e, o) {
        return this.r(t, i(n, e), o);
    }, o.template = e, o;
}), function(t) {
    "use strict";
    return "function" == typeof define && define.amd ? void define("jquery/be/automention", [ "jquery", "jquery/be/autosuggest" ], function() {
        var e = t.apply(this, arguments);
        return e;
    }) : jQuery && t.call(this, jQuery);
}(function(t) {
    "use strict";
    var e = /(?:^|[^\w])@(\w+)/;
    return t.widget("be.automention", t.be.autosuggest, {
        _create: function() {
            this._super(), this._on(this.element, {
                mouseup: this.check,
                input: this.check,
                keyup: this.check,
                blur: this._clear
            }), this.menu.element.addClass("mention-menu");
        },
        _mention: {
            value: "",
            start: 0,
            end: 0
        },
        _last: null,
        _value: function(t) {
            if (!t) return this._mention.value;
            var e = this._super(), i = e.indexOf("@", this._mention.start) + 1;
            t = e.substring(0, i) + t, " " !== e.charAt(this._mention.end) && (t += " "), t += e.substring(this._mention.end), 
            this._super(t), this.element.trigger("input");
        },
        _clear: function() {
            this._last = null;
        },
        check: function(t) {
            if (this.element.is(document.activeElement)) {
                var i, n, o, r = document.activeElement.value, s = document.activeElement.selectionStart;
                s && r && (n = r.lastIndexOf(" ", s - 1), o = r.indexOf(" ", s), o = ~o ? o : 1/0, 
                i = r.substring(n, o), i = e.exec(i), i = i && i[1], this._last !== i && (this._mention.value = i || "", 
                this._mention.start = n, this._mention.end = o, this.search(null, t), this._trigger("value", t, i)), 
                this._last = i);
            }
        }
    }), t.extend(t.be.automention, {
        usernameMatch: e
    }), t.be.automention;
}), define("be/automention", [ "jquery", "be/error", "be/mentionSource", "hgn!templates/lib/_menu/_user", "jquery/be/automention" ], function(t, e, i, n, o) {
    "use strict";
    var r = new RegExp(o.usernameMatch.source, "g");
    return function(o, s) {
        s = t.extend({
            maxMentions: 5
        }, s), i.init(s), o.length && o.parent().addClass("ui-front").end().one("focus", i.getLocal).automention({
            delay: 50,
            itemTemplate: n,
            source: i.source
        }).on("automentionopen", function() {
            var i, n, o = this.value, a = {}, l = t(this);
            o.replace(r, function(t, e) {
                a[t] = e;
            }), Object.keys(a).length > s.maxMentions && (i = l.data("beAutomention"), n = l.data("errorbar") || new e.Errorline(i.menu.element), 
            n.render("<strong>You may only mention " + s.maxMentions + " users</strong>"), n.$view.prependTo(i.menu.element), 
            l.data("errorbar", n));
        });
    };
}), define("be/form/Reset", [ "be/form" ], function(t) {
    "use strict";
    var e = t.extend({
        _submit: function(t) {
            return this._super(t).then(function() {
                this.$form.find(":input").val("").removeAttr("checked selected");
            }.bind(this));
        }
    });
    return e;
}), define("be/charCounter", [ "jquery" ], function(t) {
    "use strict";
    function e(t) {
        var e = t.match(/length\[(\d+)(,(\d+))?\]/), i = {
            min: 0,
            max: 0
        };
        return e && e.length && (e[3] ? (i.min = e[1] ? parseInt(e[1], 10) : 0, i.max = e[3] ? parseInt(e[3], 10) : 0) : i.max = e[1] ? parseInt(e[1], 10) : 0), 
        i;
    }
    var i = {
        init: function(i, n) {
            var o = i.find(".js-characters-limited");
            o.each(function() {
                var o = t(this), r = t('<div class="js-char-limiter character-counter counter-normal">').insertAfter(o), s = o.data("validate") || "", a = i.find(".js-char-limiter"), l = e(s), c = .1 * (l.max + l.min), u = function() {
                    var e = l.max - t(this).val().length, i = l.min;
                    r.html('<span class="letters-remaining">Characters left:</span> ' + e), e > i && r.addClass("counter-normal"), 
                    i > e || 0 === e ? r.removeClass("counter-normal").addClass("counter-max") : r.removeClass("counter-max"), 
                    c > e && e > i ? r.addClass("counter-warn").removeClass("counter-normal") : r.removeClass("counter-warn");
                };
                a.append('<span class="letters-remaining">Characters left:</span> ' + l.max), o.attr("maxlength", l.max), 
                n && o.removeAttr("maxlength"), o.on("input", u), u.call(this);
            });
        }
    };
    return i;
}), define("project/lib/comments", [ "jquery", "be/comments", "be/automention", "be/form/Reset", "nbd/util/media", "nbd/util/async", "be/charCounter" ], function(t, e, i, n, o, r, s) {
    "use strict";
    return {
        init: function(e, n) {
            this.$view = e.find(".post-comment-block");
            var a, l = n.id, c = e.find(".comment_text");
            i(c, {
                local: "/mentions/project/" + l
            }), s.init(e), a = this.view(l, e), this.create(l, a), r(function() {
                n.open_comments && o.is("desktop") && t(window).scrollTop(t("#project-comments").offset().top);
            }.bind(this));
        },
        destroy: function() {
            this.$view && this.$view.remove();
        },
        view: function(t, i) {
            var n = i.find(".comments-total"), o = i.find(".comments-pagination"), r = e.init(i.find("#comments-list"), {
                type: "project",
                entity_id: t
            }, function(t) {
                o.toggleClass("hide", !t.more), +t.total && n.text(t.total).siblings().text(t.total > 1 ? "Comments" : "Comment").end().parent().toggle(!!t.total);
            });
            return r.get(), r;
        },
        create: function(t, e) {
            function i(t) {
                if (!t.id || !t.user) throw t;
                e.add({
                    id: t.id,
                    user: t.user,
                    comment: t.comment,
                    posted_on: "Just now",
                    permissions: [ 3e3 ]
                });
            }
            this._form = new n(this.$view), this._form.commit = function(e) {
                return e.data.entity_id = t, this.then(i), this;
            };
        }
    };
}), define("require/hgn!templates/project/info", [ "hogan" ], function(t) {
    var e = new t.Template({
        code: function(t, e, i) {
            var n = this;
            return n.b(i = i || ""), n.b('<div class="project-info">'), n.b("\n" + i), n.s(n.d("teams.0", t, e, 1), t, e, 0, 41, 135, "{{ }}") && (n.rs(t, e, function(t, e, n) {
                n.b('  <div class="menu-group">'), n.b("\n" + i), n.b('    <h2 class="menu-title">'), 
                n.b("\n" + i), n.b("      Made for"), n.b("\n" + i), n.b("    </h2>"), n.b("\n" + i), 
                n.b("    <ul>"), n.b("\n" + i);
            }), t.pop()), n.s(n.f("teams", t, e, 1), t, e, 0, 164, 415, "{{ }}") && (n.rs(t, e, function(t, e, n) {
                n.b('      <li class="sidebar-team cfix">'), n.b("\n" + i), n.b('        <a class="sidebar-team-link" href="'), 
                n.b(n.v(n.d("urls.relative", t, e, 0))), n.b('">'), n.b("\n" + i), n.b('          <img class="sidebar-team-img" src="'), 
                n.b(n.v(n.d("images.50", t, e, 0))), n.b('">'), n.b("\n" + i), n.b('          <span class="sidebar-team-name">'), 
                n.b(n.v(n.f("name", t, e, 0))), n.b("</span>"), n.b("\n" + i), n.b("        </a>"), 
                n.b("\n" + i), n.b("      </li>"), n.b("\n" + i);
            }), t.pop()), n.s(n.d("teams.0", t, e, 1), t, e, 0, 442, 464, "{{ }}") && (n.rs(t, e, function(t, e, n) {
                n.b("    </ul>"), n.b("\n" + i), n.b("  </div>"), n.b("\n" + i);
            }), t.pop()), n.b("\n" + i), n.b('  <div class="menu-group">'), n.b("\n" + i), n.b('    <h2 class="menu-title">'), 
            n.b("\n" + i), n.b("      Project Info"), n.b("\n" + i), n.b("    </h2>"), n.b("\n" + i), 
            n.b('    <div class="menu-section">'), n.b("\n" + i), n.b('      <span class="menu-label">Created:</span> '), 
            n.b(n.v(n.f("created_on", t, e, 0))), n.b("\n" + i), n.b("    </div>"), n.b("\n" + i), 
            n.b('    <div class="menu-section">'), n.b("\n" + i), n.b('      <span class="menu-label">Last Edited:</span> '), 
            n.b(n.v(n.f("modified_on", t, e, 0))), n.b("\n" + i), n.b("    </div>"), n.b("\n" + i), 
            n.b('    <div class="menu-section">'), n.b("\n" + i), n.b('      <span class="menu-label">About:</span> '), 
            n.b(n.v(n.f("description", t, e, 0))), n.b("\n" + i), n.b("    </div>"), n.b("\n"), 
            n.b("\n" + i), n.b('    <div class="menu-section">'), n.b("\n" + i), n.b('      <span class="menu-label">Tools:</span>'), 
            n.b("\n" + i), n.s(n.f("tools", t, e, 1), t, e, 0, 971, 1016, "{{ }}") && (n.rs(t, e, function(t, e, n) {
                n.b('      <a href="'), n.b(n.v(n.f("url", t, e, 0))), n.b('">'), n.b(n.v(n.f("title", t, e, 0))), 
                n.b("</a>"), n.b("\n" + i);
            }), t.pop()), n.b("    </div>"), n.b("\n"), n.b("\n" + i), n.b('    <div class="menu-section">'), 
            n.b("\n" + i), n.b('      <span class="menu-label">Tags:</span>'), n.b("\n" + i), 
            n.s(n.f("tags", t, e, 1), t, e, 0, 1129, 1174, "{{ }}") && (n.rs(t, e, function(t, e, n) {
                n.b('      <a href="'), n.b(n.v(n.f("url", t, e, 0))), n.b('">'), n.b(n.v(n.f("title", t, e, 0))), 
                n.b("</a>"), n.b("\n" + i);
            }), t.pop()), n.b("    </div>"), n.b("\n" + i), n.b("  </div>"), n.b("\n"), n.b("\n" + i), 
            n.b('  <div class="menu-group">'), n.b("\n" + i), n.b('    <h2 class="menu-title">'), 
            n.b("\n" + i), n.b("      Copyright Info"), n.b("\n" + i), n.b("    </h2>"), n.b("\n" + i), 
            n.b('    <div class="menu-section">'), n.b("\n" + i), n.s(n.f("copyright", t, e, 1), t, e, 0, 1342, 1373, "{{ }}") && (n.rs(t, e, function(t, e, n) {
                n.b("      "), n.b(n.t(n.f("description", t, e, 0))), n.b("\n" + i);
            }), t.pop()), n.b("    </div>"), n.b("\n" + i), n.b("  </div>"), n.b("\n"), n.b("\n" + i), 
            n.b('  <div class="menu-section">'), n.b("\n" + i), n.b('    <a class="js-report">Report</a> | <a class="js-spam-project">Mark as Spam</a>'), 
            n.b("\n" + i), n.b("  </div>"), n.b("\n"), n.b("\n" + i), n.b("</div> <!-- /project-info -->"), 
            n.b("\n"), n.fl();
        },
        partials: {},
        subs: {}
    }, "", t), i = function(t, e) {
        for (var i in e) t[i] = e[i];
        return t;
    }, n = {
        "": null
    }, o = function() {
        return e.render.apply(e, arguments);
    };
    return e.ri = function(t, e, o) {
        return this.r(t, i(n, e), o);
    }, o.template = e, o;
}), define("project/trait/info", [ "moment", "nbd/util/extend", "hgn!templates/project/info" ], function(t, e, i) {
    "use strict";
    return {
        mustache: i,
        templateData: function() {
            var i = e({
                title: "Project Info",
                classes: [ "project-info" ]
            }, this._model.data()), n = this._model.get("constants").LICENSE_TEXTS;
            return [ "created_on", "modified_on" ].forEach(function(e) {
                i[e] = t.unix(i[e]).format("M/D/YY");
            }), i.copyright.description = n[i.copyright.license], i;
        },
        rendered: function() {
            this._super(), this.$view.on("click", ".js-report", function() {
                this.hide(), this._controller.report();
            }.bind(this));
        }
    };
}), define("project/Controller/Info", [ "be/Controller/Dialog/Roulette", "be/View/Dialog/Layover", "be/View/Dialog/Menu", "project/trait/info", "nbd/event" ], function(t, e, i, n, o) {
    "use strict";
    var r = t.extend({
        report: function() {
            o.trigger("report:open", this.$source);
        },
        render: function(t) {
            this.$source = t, this._super(t);
        }
    }, {
        VIEW_CLASS: {
            phone: e.extend(n),
            tablet: i.extend(n)
        }
    });
    return r;
}), define("project/lib/footer", [ "jquery", "nbd/util/async", "project/lib/comments", "project/Controller/Info" ], function(t, e, i, n) {
    "use strict";
    return {
        init: function(o, r, s) {
            var a = t.extend({}, r, {
                constants: s
            });
            this.info = new n(r.id, a), this.info.setContext(o.find("#collect-and-share .project-info")), 
            e(function() {
                i.init(o, r);
            });
        },
        destroy: function() {
            this.info && this.info.destroy();
        }
    };
}), define("be/View/Dialog/Popup/Project", [ "jquery", "nbd/util/async", "nbd/util/media", "be/View/Dialog/Popup", "be/onhistory", "be/style", "lib/social", "lib/scrollpoint", "lib/adobeanalytics", "project/lib/info", "project/lib/content", "project/lib/footer", "hgn!templates/html" ], function(t, e, i, n, o, r, s, a, l, c, u, d, p) {
    "use strict";
    var h = n.extend({
        $styles: null,
        init: function() {
            this._super.apply(this, arguments), this.on("prerender", function() {
                document.title = this._model.get("title"), this.$styles = this.$styles || t("<style>", {
                    type: "text/css"
                }).appendTo("head"), r.set(this.$styles[0], this._model.get("styles").inline[0]), 
                this.$view && this.$view.parent().length && this.innerDestroy();
            }, this);
        },
        destroy: function() {
            this.$styles.remove(), this.$styles = null, i.off(null, null, this), this.$view && (this.$view.remove(), 
            this.$view = null);
        },
        innerDestroy: function() {
            c.destroy(), u.destroy(), d.destroy(), a.off(null, null, "#project-popup");
        },
        mustache: p,
        template: function() {
            var t = this._super.apply(this, arguments);
            return t = t.filter(function() {
                return "SCRIPT" !== this.tagName;
            }), t.filter(".popup").prepend(this._model.get("upsell")), t;
        },
        templateData: function() {
            var e = this._super();
            return t.extend({
                toolbar: !1,
                classes: [ "project-view" ]
            }, e);
        },
        rendered: function() {
            var t = this.$view.filter(".popup"), i = this._model.get("data"), n = this._model.get("constants");
            t.find(".action-login").addClass("action-login-noremoval").end().attr("id", "project-popup").find("#project-container").on("click", function(t) {
                t.originalEvent.origin = this;
            }.bind(this)).end().find(".popup-inner-wrap").on("click", function(t) {
                t.originalEvent.origin !== this && this.hide();
            }.bind(this)), c.init(t, i, n), u.init(t.find("#primary-project-content"), i, n), 
            d.init(t.find("#project-footer"), i, n), s.init(t), e(function() {
                a(t.find("#project-container").css("margin-top"), function(e) {
                    t.find(".showcase-bar").toggleClass("shown", e);
                }, "#project-popup");
            }), this.$view.on("click", "#other-projects a", o({
                project: {
                    current_title: document.title
                }
            })), this._super(), l.page();
        },
        show: function() {
            this._super(), this.block(!0), this.$view.addClass("shown"), i.on("desktop:exit", function() {
                this.hide();
            }, this);
        },
        hide: function(t) {
            this.$view && (this._super(), i.off(null, null, this), this.block(!1), this.$view.removeClass("shown"), 
            this.innerDestroy(), t !== !0 && this.trigger("exit"));
        },
        block: function(e) {
            e = e !== !1, t(document.body).toggleClass("project-popup-open", e).add("html").css("overflow", e ? "hidden" : "");
        }
    });
    return h;
}), define("be/Controller/Dialog/Project", [ "be/Controller/Dialog/EntityPopup", "be/View/Dialog/Popup/Project" ], function(t, e) {
    "use strict";
    var i = t.extend({
        prefilter: function(t) {
            var e;
            return t.styles && (e = [].concat(t.styles.project, t.styles.local), t.styles.local = e), 
            t;
        },
        open: function() {
            return this._view && this._view.block(), this._super.apply(this, arguments);
        }
    }, {
        VIEW_CLASS: {
            desktop: e
        }
    });
    return i;
}), define("project/popup", [ "nbd/util/extend", "be/trait/popupSession", "be/Controller/Dialog/Project" ], function(t, e, i) {
    "use strict";
    return t({
        selector: ".cover-name-link, .cover-img-link, a.cover-img",
        entity: "project",
        Dialog: i
    }, e);
}), define("wip/createloader", [ "nbd/trait/promise", "be/modal/simple" ], function(t, e) {
    "use strict";
    return function() {
        var i = new t();
        return require([ "wip/create" ], i.resolve.bind(i), function() {
            e({
                title: "There was a problem with your request",
                html: "Please refresh the page to try again.",
                buttons: [ {
                    label: "Close",
                    classes: [ "form-button-default", "js-close" ]
                } ]
            });
        }), i;
    };
}), function() {
    var t = Math, e = function(t) {
        return t >> 0;
    }, i = /webkit/i.test(navigator.appVersion) ? "webkit" : /firefox/i.test(navigator.userAgent) ? "Moz" : /trident/i.test(navigator.userAgent) ? "ms" : "opera" in window ? "O" : "", n = /android/gi.test(navigator.appVersion), o = /iphone|ipad/gi.test(navigator.appVersion), r = /playbook/gi.test(navigator.appVersion), s = /hp-tablet/gi.test(navigator.appVersion), a = document.all && !document.getElementsByClassName, l = "WebKitCSSMatrix" in window && "m11" in new WebKitCSSMatrix(), c = "ontouchstart" in window && !s, u = i + "Transform" in document.documentElement.style, d = o || r, p = function() {
        return window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame || function(t) {
            return setTimeout(t, 1);
        };
    }(), h = function() {
        return window.cancelRequestAnimationFrame || window.webkitCancelAnimationFrame || window.webkitCancelRequestAnimationFrame || window.mozCancelRequestAnimationFrame || window.oCancelRequestAnimationFrame || window.msCancelRequestAnimationFrame || clearTimeout;
    }(), f = "onorientationchange" in window ? "orientationchange" : "resize", b = c ? "touchstart" : "mousedown", m = c ? "touchmove" : "mousemove", v = c ? "touchend" : "mouseup", g = c ? "touchcancel" : "mouseup", w = "Moz" == i ? "DOMMouseScroll" : "mousewheel", y = document.attachEvent ? "mouseleave" : "mouseout", _ = "translate" + (l ? "3d(" : "("), x = l ? ",0)" : ")", S = function(t, e) {
        var r, s = this, p = document;
        s.wrapper = "object" == typeof t ? t : p.getElementById(t), s.wrapper.style.overflow = "hidden", 
        s.scroller = s.wrapper.children[0], s.options = {
            hScroll: !0,
            vScroll: !0,
            x: 0,
            y: 0,
            bounce: !0,
            bounceLock: !1,
            momentum: !0,
            lockDirection: !0,
            useTransform: !0,
            useTransition: !1,
            topOffset: 0,
            checkDOMChanges: !1,
            handleClick: !0,
            hScrollbar: !0,
            vScrollbar: !0,
            fixedScrollbar: n,
            hideScrollbar: o,
            fadeScrollbar: o && l,
            scrollbarClass: "",
            zoom: !1,
            zoomMin: 1,
            zoomMax: 4,
            doubleTapZoom: 2,
            wheelAction: "scroll",
            snap: !1,
            snapThreshold: 1,
            onRefresh: null,
            onBeforeScrollStart: function(t) {
                t.preventDefault ? t.preventDefault() : t.returnValue = !1;
            },
            onScrollStart: null,
            onBeforeScrollMove: null,
            onScrollMove: null,
            onBeforeScrollEnd: null,
            onScrollEnd: null,
            onTouchEnd: null,
            onDestroy: null,
            onZoomStart: null,
            onZoom: null,
            onZoomEnd: null
        };
        for (r in e) s.options[r] = e[r];
        s.x = s.options.x, s.y = s.options.y, s.options.useTransform = u ? s.options.useTransform : !1, 
        s.options.hScrollbar = s.options.hScroll && s.options.hScrollbar, s.options.vScrollbar = s.options.vScroll && s.options.vScrollbar, 
        s.options.zoom = s.options.useTransform && s.options.zoom, s.options.useTransition = d && s.options.useTransition, 
        s.options.zoom && n && (_ = "translate(", x = ")"), s.scroller.style[i + "TransitionProperty"] = s.options.useTransform ? "-" + i.toLowerCase() + "-transform" : "top left", 
        s.scroller.style[i + "TransitionDuration"] = "0", s.scroller.style[i + "TransformOrigin"] = "0 0", 
        s.options.useTransition && (s.scroller.style[i + "TransitionTimingFunction"] = "cubic-bezier(0.33,0.66,0.66,1)"), 
        s.options.useTransform ? s.scroller.style[i + "Transform"] = _ + s.x + "px," + s.y + "px" + x : s.scroller.style.cssText += ";position:absolute;top:" + s.y + "px;left:" + s.x + "px", 
        s.options.useTransition && (s.options.fixedScrollbar = !0), s.refresh(), a && (s.scroller.ondragstart = function() {
            return !1;
        }), s._bind(f, window), s._bind(b), c || (s._bind(y, s.wrapper), "none" != s.options.wheelAction && s._bind(w)), 
        s.options.checkDOMChanges && (s.checkDOMTime = setInterval(function() {
            s._checkDOMChanges();
        }, 500));
    };
    S.prototype = {
        enabled: !0,
        x: 0,
        y: 0,
        steps: [],
        scale: 1,
        currPageX: 0,
        currPageY: 0,
        pagesX: [],
        pagesY: [],
        aniTime: null,
        wheelZoomCount: 0,
        handleEvent: function(t) {
            var e = this;
            switch (t.type) {
              case b:
                if (!c && t.button - (a ? 1 : 0) !== 0) return;
                e._start(t);
                break;

              case m:
                e._move(t);
                break;

              case v:
              case g:
                e._end(t);
                break;

              case f:
                e._resize();
                break;

              case w:
                e._wheel(t);
                break;

              case y:
                e._mouseout(t);
                break;

              case "webkitTransitionEnd":
                e._transitionEnd(t);
            }
        },
        _checkDOMChanges: function() {
            this.moved || this.zoomed || this.animating || this.scrollerW == this.scroller.offsetWidth * this.scale && this.scrollerH == this.scroller.offsetHeight * this.scale || this.refresh();
        },
        _scrollbar: function(n) {
            var o, r = this, s = document;
            return r[n + "Scrollbar"] ? (r[n + "ScrollbarWrapper"] || (o = s.createElement("div"), 
            r.options.scrollbarClass ? o.className = r.options.scrollbarClass + n.toUpperCase() : o.style.cssText = "position:absolute;z-index:100;" + ("h" == n ? "height:7px;bottom:1px;left:2px;right:" + (r.vScrollbar ? "7" : "2") + "px" : "width:7px;bottom:" + (r.hScrollbar ? "7" : "2") + "px;top:2px;right:1px"), 
            o.style.cssText += ";pointer-events:none;-" + i + "-transition-property:opacity;-" + i + "-transition-duration:" + (r.options.fadeScrollbar ? "350ms" : "0") + ";overflow:hidden;opacity:" + (r.options.hideScrollbar ? "0" : "1"), 
            r.wrapper.appendChild(o), r[n + "ScrollbarWrapper"] = o, o = s.createElement("div"), 
            r.options.scrollbarClass || (o.style.cssText = "position:absolute;z-index:100;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);-" + i + "-background-clip:padding-box;-" + i + "-box-sizing:border-box;" + ("h" == n ? "height:100%" : "width:100%") + ";-" + i + "-border-radius:3px;border-radius:3px"), 
            o.style.cssText += ";pointer-events:none;-" + i + "-transition-property:-" + i + "-transform;-" + i + "-transition-timing-function:cubic-bezier(0.33,0.66,0.66,1);-" + i + "-transition-duration:0;-" + i + "-transform:" + _ + "0,0" + x, 
            r.options.useTransition && (o.style.cssText += ";-" + i + "-transition-timing-function:cubic-bezier(0.33,0.66,0.66,1)"), 
            r[n + "ScrollbarWrapper"].appendChild(o), r[n + "ScrollbarIndicator"] = o), "h" == n ? (r.hScrollbarSize = r.hScrollbarWrapper.clientWidth, 
            r.hScrollbarIndicatorSize = t.max(e(r.hScrollbarSize * r.hScrollbarSize / r.scrollerW), 8), 
            r.hScrollbarIndicator.style.width = r.hScrollbarIndicatorSize + "px", r.hScrollbarMaxScroll = r.hScrollbarSize - r.hScrollbarIndicatorSize, 
            r.hScrollbarProp = r.hScrollbarMaxScroll / r.maxScrollX) : (r.vScrollbarSize = r.vScrollbarWrapper.clientHeight, 
            r.vScrollbarIndicatorSize = t.max(e(r.vScrollbarSize * r.vScrollbarSize / r.scrollerH), 8), 
            r.vScrollbarIndicator.style.height = r.vScrollbarIndicatorSize + "px", r.vScrollbarMaxScroll = r.vScrollbarSize - r.vScrollbarIndicatorSize, 
            r.vScrollbarProp = r.vScrollbarMaxScroll / r.maxScrollY), void r._scrollbarPos(n, !0)) : void (r[n + "ScrollbarWrapper"] && (u && (r[n + "ScrollbarIndicator"].style[i + "Transform"] = ""), 
            r[n + "ScrollbarWrapper"].parentNode.removeChild(r[n + "ScrollbarWrapper"]), r[n + "ScrollbarWrapper"] = null, 
            r[n + "ScrollbarIndicator"] = null));
        },
        _resize: function() {
            var t = this;
            setTimeout(function() {
                t.refresh();
            }, n ? 200 : 0);
        },
        _pos: function(t, n) {
            this.zoomed || (t = this.hScroll ? t : 0, n = this.vScroll ? n : 0, this.options.useTransform ? this.scroller.style[i + "Transform"] = _ + t + "px," + n + "px" + x + " scale(" + this.scale + ")" : (t = e(t), 
            n = e(n), this.scroller.style.left = t + "px", this.scroller.style.top = n + "px"), 
            this.x = t, this.y = n, this._scrollbarPos("h"), this._scrollbarPos("v"));
        },
        _scrollbarPos: function(t, n) {
            var o, r = this, s = "h" == t ? r.x : r.y;
            r[t + "Scrollbar"] && (s = r[t + "ScrollbarProp"] * s, 0 > s ? (r.options.fixedScrollbar || (o = r[t + "ScrollbarIndicatorSize"] + e(3 * s), 
            8 > o && (o = 8), r[t + "ScrollbarIndicator"].style["h" == t ? "width" : "height"] = o + "px"), 
            s = 0) : s > r[t + "ScrollbarMaxScroll"] && (r.options.fixedScrollbar ? s = r[t + "ScrollbarMaxScroll"] : (o = r[t + "ScrollbarIndicatorSize"] - e(3 * (s - r[t + "ScrollbarMaxScroll"])), 
            8 > o && (o = 8), r[t + "ScrollbarIndicator"].style["h" == t ? "width" : "height"] = o + "px", 
            s = r[t + "ScrollbarMaxScroll"] + (r[t + "ScrollbarIndicatorSize"] - o))), r[t + "ScrollbarWrapper"].style.opacity = n && r.options.hideScrollbar ? "0" : "1", 
            a ? (r[t + "ScrollbarIndicator"].style.position = "absolute", "h" == t ? r[t + "ScrollbarIndicator"].style.left = s + "px" : r[t + "ScrollbarIndicator"].style.top = s + "px") : (r[t + "ScrollbarWrapper"].style[i + "TransitionDelay"] = "0", 
            r[t + "ScrollbarIndicator"].style[i + "Transform"] = _ + ("h" == t ? s + "px,0" : "0," + s + "px") + x));
        },
        _start: function(e) {
            var n, o, r, s, a, l = this, u = c ? e.touches[0] : e, d = document.body, p = document.documentElement;
            l.enabled && (l.options.onBeforeScrollStart && l.options.onBeforeScrollStart.call(l, e), 
            (l.options.useTransition || l.options.zoom) && l._transitionTime(0), l.moved = !1, 
            l.animating = !1, l.zoomed = !1, l.distX = 0, l.distY = 0, l.absDistX = 0, l.absDistY = 0, 
            l.dirX = 0, l.dirY = 0, l.options.zoom && c && e.touches.length > 1 && (s = t.abs(e.touches[0].pageX - e.touches[1].pageX), 
            a = t.abs(e.touches[0].pageY - e.touches[1].pageY), l.touchesDistStart = t.sqrt(s * s + a * a), 
            l.originX = t.abs(e.touches[0].pageX + e.touches[1].pageX - 2 * l.wrapperOffsetLeft) / 2 - l.x, 
            l.originY = t.abs(e.touches[0].pageY + e.touches[1].pageY - 2 * l.wrapperOffsetTop) / 2 - l.y, 
            l.options.onZoomStart && l.options.onZoomStart.call(l, e)), l.options.momentum && (l.options.useTransform ? (n = getComputedStyle(l.scroller, null)[i + "Transform"].replace(/[^0-9-.,]/g, "").split(","), 
            o = 1 * n[4], r = 1 * n[5]) : (o = 1 * (l.scroller.currentStyle || getComputedStyle(l.scroller, null)).left.replace(/[^0-9-]/g, ""), 
            r = 1 * (l.scroller.currentStyle || getComputedStyle(l.scroller, null)).top.replace(/[^0-9-]/g, "")), 
            (o != l.x || r != l.y) && (l.options.useTransition ? l._unbind("webkitTransitionEnd") : h(l.aniTime), 
            l.steps = [], l._pos(o, r))), l.absStartX = l.x, l.absStartY = l.y, l.startX = l.x, 
            l.startY = l.y, l.pointX = u.pageX || u.clientX + d.scrollLeft + p.scrollLeft, l.pointY = u.pageY || u.clientY + d.scrollTop + p.scrollTop, 
            l.startTime = e.timeStamp || new Date().getTime(), l.options.onScrollStart && l.options.onScrollStart.call(l, e), 
            l._bind(m), l._bind(v), l._bind(g));
        },
        _move: function(e) {
            var n, o, r, s = this, a = c ? e.touches[0] : e, l = document.body, u = document.documentElement, d = (a.pageX || a.clientX + l.scrollLeft + u.scrollLeft) - s.pointX, p = (a.pageY || a.clientY + l.scrollTop + u.scrollTop) - s.pointY, h = s.x + d, f = s.y + p, b = e.timeStamp || new Date().getTime();
            return s.options.onBeforeScrollMove && s.options.onBeforeScrollMove.call(s, e), 
            s.options.zoom && c && e.touches.length > 1 ? (n = t.abs(e.touches[0].pageX - e.touches[1].pageX), 
            o = t.abs(e.touches[0].pageY - e.touches[1].pageY), s.touchesDist = t.sqrt(n * n + o * o), 
            s.zoomed = !0, r = 1 / s.touchesDistStart * s.touchesDist * this.scale, r < s.options.zoomMin ? r = .5 * s.options.zoomMin * Math.pow(2, r / s.options.zoomMin) : r > s.options.zoomMax && (r = 2 * s.options.zoomMax * Math.pow(.5, s.options.zoomMax / r)), 
            s.lastScale = r / this.scale, h = this.originX - this.originX * s.lastScale + this.x, 
            f = this.originY - this.originY * s.lastScale + this.y, this.scroller.style[i + "Transform"] = _ + h + "px," + f + "px" + x + " scale(" + r + ")", 
            void (s.options.onZoom && s.options.onZoom.call(s, e))) : (s.pointX = a.pageX || a.clientX + l.scrollLeft + u.scrollLeft, 
            s.pointY = a.pageY || a.clientY + l.scrollTop + u.scrollTop, (h > 0 || h < s.maxScrollX) && (h = s.options.bounce ? s.x + d / 2 : h >= 0 || s.maxScrollX >= 0 ? 0 : s.maxScrollX), 
            (f > s.minScrollY || f < s.maxScrollY) && (f = s.options.bounce ? s.y + p / 2 : f >= s.minScrollY || s.maxScrollY >= 0 ? s.minScrollY : s.maxScrollY), 
            s.distX += d, s.distY += p, s.absDistX = t.abs(s.distX), s.absDistY = t.abs(s.distY), 
            void (s.absDistX < 6 && s.absDistY < 6 || (s.options.lockDirection && (s.absDistX > s.absDistY + 5 ? (f = s.y, 
            p = 0) : s.absDistY > s.absDistX + 5 && (h = s.x, d = 0)), s.moved = !0, s._pos(h, f), 
            s.dirX = d > 0 ? -1 : 0 > d ? 1 : 0, s.dirY = p > 0 ? -1 : 0 > p ? 1 : 0, b - s.startTime > 300 && (s.startTime = b, 
            s.startX = s.x, s.startY = s.y), s.options.onScrollMove && s.options.onScrollMove.call(s, e))));
        },
        _end: function(n) {
            if (!c || 0 == n.touches.length) {
                var o, r, s, a, l, u, d, p = this, h = c ? n.changedTouches[0] : n, f = {
                    dist: 0,
                    time: 0
                }, b = {
                    dist: 0,
                    time: 0
                }, w = (n.timeStamp || new Date().getTime()) - p.startTime, y = p.x, S = p.y;
                if (p._unbind(m), p._unbind(v), p._unbind(g), p.options.onBeforeScrollEnd && p.options.onBeforeScrollEnd.call(p, n), 
                p.zoomed) return d = p.scale * p.lastScale, d = Math.max(p.options.zoomMin, d), 
                d = Math.min(p.options.zoomMax, d), p.lastScale = d / p.scale, p.scale = d, p.x = p.originX - p.originX * p.lastScale + p.x, 
                p.y = p.originY - p.originY * p.lastScale + p.y, p.scroller.style[i + "TransitionDuration"] = "200ms", 
                p.scroller.style[i + "Transform"] = _ + p.x + "px," + p.y + "px" + x + " scale(" + p.scale + ")", 
                p.zoomed = !1, p.refresh(), void (p.options.onZoomEnd && p.options.onZoomEnd.call(p, n));
                if (!p.moved) return c && (p.doubleTapTimer && p.options.zoom ? (clearTimeout(p.doubleTapTimer), 
                p.doubleTapTimer = null, p.options.onZoomStart && p.options.onZoomStart.call(p, n), 
                p.zoom(p.pointX, p.pointY, 1 == p.scale ? p.options.doubleTapZoom : 1), p.options.onZoomEnd && setTimeout(function() {
                    p.options.onZoomEnd.call(p, n);
                }, 200)) : this.options.handleClick && (p.doubleTapTimer = setTimeout(function() {
                    for (p.doubleTapTimer = null, o = h.target; 1 != o.nodeType; ) o = o.parentNode;
                    "SELECT" != o.tagName && "INPUT" != o.tagName && "TEXTAREA" != o.tagName && (r = document.createEvent("MouseEvents"), 
                    r.initMouseEvent("click", !0, !0, n.view, 1, h.screenX, h.screenY, h.clientX, h.clientY, n.ctrlKey, n.altKey, n.shiftKey, n.metaKey, 0, null), 
                    r._fake = !0, o.dispatchEvent(r));
                }, p.options.zoom ? 250 : 0))), p._resetPos(200), void (p.options.onTouchEnd && p.options.onTouchEnd.call(p, n));
                if (300 > w && p.options.momentum && (f = y ? p._momentum(y - p.startX, w, -p.x, p.scrollerW - p.wrapperW + p.x, p.options.bounce ? p.wrapperW : 0) : f, 
                b = S ? p._momentum(S - p.startY, w, -p.y, p.maxScrollY < 0 ? p.scrollerH - p.wrapperH + p.y - p.minScrollY : 0, p.options.bounce ? p.wrapperH : 0) : b, 
                y = p.x + f.dist, S = p.y + b.dist, (p.x > 0 && y > 0 || p.x < p.maxScrollX && y < p.maxScrollX) && (f = {
                    dist: 0,
                    time: 0
                }), (p.y > p.minScrollY && S > p.minScrollY || p.y < p.maxScrollY && S < p.maxScrollY) && (b = {
                    dist: 0,
                    time: 0
                })), f.dist || b.dist) return l = t.max(t.max(f.time, b.time), 10), p.options.snap && (s = y - p.absStartX, 
                a = S - p.absStartY, t.abs(s) < p.options.snapThreshold && t.abs(a) < p.options.snapThreshold ? p.scrollTo(p.absStartX, p.absStartY, 200) : (u = p._snap(y, S), 
                y = u.x, S = u.y, l = t.max(u.time, l))), p.scrollTo(e(y), e(S), l), void (p.options.onTouchEnd && p.options.onTouchEnd.call(p, n));
                if (p.options.snap) return s = y - p.absStartX, a = S - p.absStartY, t.abs(s) < p.options.snapThreshold && t.abs(a) < p.options.snapThreshold ? p.scrollTo(p.absStartX, p.absStartY, 200) : (u = p._snap(p.x, p.y), 
                (u.x != p.x || u.y != p.y) && p.scrollTo(u.x, u.y, u.time)), void (p.options.onTouchEnd && p.options.onTouchEnd.call(p, n));
                p._resetPos(200), p.options.onTouchEnd && p.options.onTouchEnd.call(p, n);
            }
        },
        _resetPos: function(t) {
            var e = this, n = e.x >= 0 ? 0 : e.x < e.maxScrollX ? e.maxScrollX : e.x, o = e.y >= e.minScrollY || e.maxScrollY > 0 ? e.minScrollY : e.y < e.maxScrollY ? e.maxScrollY : e.y;
            return n == e.x && o == e.y ? (e.moved && (e.moved = !1, e.options.onScrollEnd && e.options.onScrollEnd.call(e)), 
            e.hScrollbar && e.options.hideScrollbar && ("webkit" == i && (e.hScrollbarWrapper.style[i + "TransitionDelay"] = "300ms"), 
            e.hScrollbarWrapper.style.opacity = "0"), void (e.vScrollbar && e.options.hideScrollbar && ("webkit" == i && (e.vScrollbarWrapper.style[i + "TransitionDelay"] = "300ms"), 
            e.vScrollbarWrapper.style.opacity = "0"))) : void e.scrollTo(n, o, t || 0);
        },
        _wheel: function(t) {
            var e, i, n, o, r, s = this;
            if ("wheelDeltaX" in t) e = t.wheelDeltaX / 12, i = t.wheelDeltaY / 12; else if ("wheelDelta" in t) e = i = t.wheelDelta / 12; else {
                if (!("detail" in t)) return;
                e = i = 3 * -t.detail;
            }
            return "zoom" == s.options.wheelAction ? (r = s.scale * Math.pow(2, 1 / 3 * (i ? i / Math.abs(i) : 0)), 
            r < s.options.zoomMin && (r = s.options.zoomMin), r > s.options.zoomMax && (r = s.options.zoomMax), 
            void (r != s.scale && (!s.wheelZoomCount && s.options.onZoomStart && s.options.onZoomStart.call(s, t), 
            s.wheelZoomCount++, s.zoom(t.pageX, t.pageY, r, 400), setTimeout(function() {
                s.wheelZoomCount--, !s.wheelZoomCount && s.options.onZoomEnd && s.options.onZoomEnd.call(s, t);
            }, 400)))) : (n = s.x + e, o = s.y + i, n > 0 ? n = 0 : n < s.maxScrollX && (n = s.maxScrollX), 
            o > s.minScrollY ? o = s.minScrollY : o < s.maxScrollY && (o = s.maxScrollY), void (s.maxScrollY < 0 && s.scrollTo(n, o, 0)));
        },
        _mouseout: function(t) {
            var e = t.relatedTarget;
            if (!e) return void this._end(t);
            for (;e = e.parentNode; ) if (e == this.wrapper) return;
            this._end(t);
        },
        _transitionEnd: function(t) {
            var e = this;
            t.target == e.scroller && (e._unbind("webkitTransitionEnd"), e._startAni());
        },
        _startAni: function() {
            var e, i, n, o = this, r = o.x, s = o.y, a = new Date().getTime();
            if (!o.animating) {
                if (!o.steps.length) return void o._resetPos(400);
                if (e = o.steps.shift(), e.x == r && e.y == s && (e.time = 0), o.animating = !0, 
                o.moved = !0, o.options.useTransition) return o._transitionTime(e.time), o._pos(e.x, e.y), 
                o.animating = !1, void (e.time ? o._bind("webkitTransitionEnd") : o._resetPos(0));
                n = function() {
                    var l, c, u = new Date().getTime();
                    return u >= a + e.time ? (o._pos(e.x, e.y), o.animating = !1, o.options.onAnimationEnd && o.options.onAnimationEnd.call(o), 
                    void o._startAni()) : (u = (u - a) / e.time - 1, i = t.sqrt(1 - u * u), l = (e.x - r) * i + r, 
                    c = (e.y - s) * i + s, o._pos(l, c), void (o.animating && (o.aniTime = p(n))));
                }, n();
            }
        },
        _transitionTime: function(t) {
            t += "ms", this.scroller.style[i + "TransitionDuration"] = t, this.hScrollbar && (this.hScrollbarIndicator.style[i + "TransitionDuration"] = t), 
            this.vScrollbar && (this.vScrollbarIndicator.style[i + "TransitionDuration"] = t);
        },
        _momentum: function(i, n, o, r, s) {
            var a = 6e-4, l = t.abs(i) / n, c = l * l / (2 * a), u = 0, d = 0;
            return i > 0 && c > o ? (d = s / (6 / (c / l * a)), o += d, l = l * o / c, c = o) : 0 > i && c > r && (d = s / (6 / (c / l * a)), 
            r += d, l = l * r / c, c = r), c *= 0 > i ? -1 : 1, u = l / a, {
                dist: c,
                time: e(u)
            };
        },
        _offset: function(t) {
            for (var e = 0, i = 0; t; ) e -= t.offsetLeft, i -= t.offsetTop, t = t.offsetParent;
            return t != this.wrapper && (e *= this.scale, i *= this.scale), {
                left: e,
                top: i
            };
        },
        _snap: function(i, n) {
            var o, r, s, a, l, c, u = this;
            for (s = u.pagesX.length - 1, o = 0, r = u.pagesX.length; r > o; o++) if (i >= u.pagesX[o]) {
                s = o;
                break;
            }
            for (s == u.currPageX && s > 0 && u.dirX < 0 && s--, i = u.pagesX[s], l = t.abs(i - u.pagesX[u.currPageX]), 
            l = l ? t.abs(u.x - i) / l * 500 : 0, u.currPageX = s, s = u.pagesY.length - 1, 
            o = 0; s > o; o++) if (n >= u.pagesY[o]) {
                s = o;
                break;
            }
            return s == u.currPageY && s > 0 && u.dirY < 0 && s--, n = u.pagesY[s], c = t.abs(n - u.pagesY[u.currPageY]), 
            c = c ? t.abs(u.y - n) / c * 500 : 0, u.currPageY = s, a = e(t.max(l, c)) || 200, 
            {
                x: i,
                y: n,
                time: a
            };
        },
        _bind: function(t, e, i) {
            var n = this;
            document.addEventListener ? (e || this.scroller).addEventListener(t, this, !!i) : (this.events && "object" == typeof this.events || (this.events = {}), 
            this.events[t] = function(t) {
                n.handleEvent.call(n, t);
            }, (e || this.scroller).attachEvent("on" + t, this.events[t]));
        },
        _unbind: function(t, e, i) {
            document.removeEventListener ? (e || this.scroller).removeEventListener(t, this, !!i) : this.events[t] && (e || this.scroller).detachEvent("on" + t, this.events[t]);
        },
        destroy: function() {
            var t = this;
            t.scroller.style[i + "Transform"] = "", t.hScrollbar = !1, t.vScrollbar = !1, t._scrollbar("h"), 
            t._scrollbar("v"), t._unbind(f, window), t._unbind(b), t._unbind(m), t._unbind(v), 
            t._unbind(g), t.options.hasTouch || (t._unbind(y, t.wrapper), t._unbind(w)), t.options.useTransition && t._unbind("webkitTransitionEnd"), 
            t.options.checkDOMChanges && clearInterval(t.checkDOMTime), t.options.onDestroy && t.options.onDestroy.call(t);
        },
        refresh: function() {
            var t, n, o, r, s = this, a = 0, l = 0;
            if (s.scale < s.options.zoomMin && (s.scale = s.options.zoomMin), s.wrapperW = s.wrapper.clientWidth || 1, 
            s.wrapperH = s.wrapper.clientHeight || 1, s.minScrollY = -s.options.topOffset || 0, 
            s.scrollerW = e(s.scroller.offsetWidth * s.scale), s.scrollerH = e((s.scroller.offsetHeight + s.minScrollY) * s.scale), 
            s.maxScrollX = s.wrapperW - s.scrollerW, s.maxScrollY = s.wrapperH - s.scrollerH + s.minScrollY, 
            s.dirX = 0, s.dirY = 0, s.options.onRefresh && s.options.onRefresh.call(s), s.hScroll = s.options.hScroll && s.maxScrollX < 0, 
            s.vScroll = s.options.vScroll && (!s.options.bounceLock && !s.hScroll || s.scrollerH > s.wrapperH), 
            s.hScrollbar = s.hScroll && s.options.hScrollbar, s.vScrollbar = s.vScroll && s.options.vScrollbar && s.scrollerH > s.wrapperH, 
            t = s._offset(s.wrapper), s.wrapperOffsetLeft = -t.left, s.wrapperOffsetTop = -t.top, 
            "string" == typeof s.options.snap) for (s.pagesX = [], s.pagesY = [], r = s.scroller.querySelectorAll(s.options.snap), 
            n = 0, o = r.length; o > n; n++) a = s._offset(r[n]), a.left += s.wrapperOffsetLeft, 
            a.top += s.wrapperOffsetTop, s.pagesX[n] = a.left < s.maxScrollX ? s.maxScrollX : a.left * s.scale, 
            s.pagesY[n] = a.top < s.maxScrollY ? s.maxScrollY : a.top * s.scale; else if (s.options.snap) {
                for (s.pagesX = []; a >= s.maxScrollX; ) s.pagesX[l] = a, a -= s.wrapperW, l++;
                for (s.maxScrollX % s.wrapperW && (s.pagesX[s.pagesX.length] = s.maxScrollX - s.pagesX[s.pagesX.length - 1] + s.pagesX[s.pagesX.length - 1]), 
                a = 0, l = 0, s.pagesY = []; a >= s.maxScrollY; ) s.pagesY[l] = a, a -= s.wrapperH, 
                l++;
                s.maxScrollY % s.wrapperH && (s.pagesY[s.pagesY.length] = s.maxScrollY - s.pagesY[s.pagesY.length - 1] + s.pagesY[s.pagesY.length - 1]);
            }
            s._scrollbar("h"), s._scrollbar("v"), s.zoomed || (s.scroller.style[i + "TransitionDuration"] = "0", 
            s._resetPos(200));
        },
        scrollTo: function(t, e, i, n) {
            var o, r, s = this, a = t;
            for (s.stop(), a.length || (a = [ {
                x: t,
                y: e,
                time: i,
                relative: n
            } ]), o = 0, r = a.length; r > o; o++) a[o].relative && (a[o].x = s.x - a[o].x, 
            a[o].y = s.y - a[o].y), s.steps.push({
                x: a[o].x,
                y: a[o].y,
                time: a[o].time || 0
            });
            s._startAni();
        },
        scrollToElement: function(e, i) {
            var n, o = this;
            e = e.nodeType ? e : o.scroller.querySelector(e), e && (n = o._offset(e), n.left += o.wrapperOffsetLeft, 
            n.top += o.wrapperOffsetTop, n.left = n.left > 0 ? 0 : n.left < o.maxScrollX ? o.maxScrollX : n.left, 
            n.top = n.top > o.minScrollY ? o.minScrollY : n.top < o.maxScrollY ? o.maxScrollY : n.top, 
            i = void 0 === i ? t.max(2 * t.abs(n.left), 2 * t.abs(n.top)) : i, o.scrollTo(n.left, n.top, i));
        },
        scrollToPage: function(t, e, i) {
            var n, o, r = this;
            i = void 0 === i ? 400 : i, r.options.onScrollStart && r.options.onScrollStart.call(r), 
            r.options.snap ? (t = "next" == t ? r.currPageX + 1 : "prev" == t ? r.currPageX - 1 : t, 
            e = "next" == e ? r.currPageY + 1 : "prev" == e ? r.currPageY - 1 : e, t = 0 > t ? 0 : t > r.pagesX.length - 1 ? r.pagesX.length - 1 : t, 
            e = 0 > e ? 0 : e > r.pagesY.length - 1 ? r.pagesY.length - 1 : e, r.currPageX = t, 
            r.currPageY = e, n = r.pagesX[t], o = r.pagesY[e]) : (n = -r.wrapperW * t, o = -r.wrapperH * e, 
            n < r.maxScrollX && (n = r.maxScrollX), o < r.maxScrollY && (o = r.maxScrollY)), 
            r.scrollTo(n, o, i);
        },
        disable: function() {
            this.stop(), this._resetPos(0), this.enabled = !1, this._unbind(m), this._unbind(v), 
            this._unbind(g);
        },
        enable: function() {
            this.enabled = !0;
        },
        stop: function() {
            this.options.useTransition ? this._unbind("webkitTransitionEnd") : h(this.aniTime), 
            this.steps = [], this.moved = !1, this.animating = !1;
        },
        zoom: function(t, e, n, o) {
            var r = this, s = n / r.scale;
            r.options.useTransform && (r.zoomed = !0, o = void 0 === o ? 200 : o, t = t - r.wrapperOffsetLeft - r.x, 
            e = e - r.wrapperOffsetTop - r.y, r.x = t - t * s + r.x, r.y = e - e * s + r.y, 
            r.scale = n, r.refresh(), r.x = r.x > 0 ? 0 : r.x < r.maxScrollX ? r.maxScrollX : r.x, 
            r.y = r.y > r.minScrollY ? r.minScrollY : r.y < r.maxScrollY ? r.maxScrollY : r.y, 
            r.scroller.style[i + "TransitionDuration"] = o + "ms", r.scroller.style[i + "Transform"] = _ + r.x + "px," + r.y + "px" + x + " scale(" + n + ")", 
            r.zoomed = !1);
        },
        isReady: function() {
            return !this.moved && !this.zoomed && !this.animating;
        }
    }, "undefined" != typeof exports ? exports.iScroll = S : window.iScroll = S;
}(), define("vendor/misc/iscroll", function(t) {
    return function() {
        var e;
        return e || t.iScroll;
    };
}(this)), define("wip/lib/timeline", [ "jquery", "has", "nbd/Controller", "nbd/util/async", "nbd/util/construct", "vendor/misc/iscroll" ], function(t, e, i, n, o, r) {
    "use strict";
    return i.extend({
        init: function(i) {
            this.$context = i, this.$slider = i.find(".wip-timeline-slider").css("display", "inline-block"), 
            e("touch") ? this.initIScroll() : this.initScrollers(), t(window).on("resize", this.updateTimeline);
        },
        initIScroll: function() {
            var t = this.iscroll = new r(this.$context[0], {
                hScroll: !0,
                vScroll: !1,
                lockDirection: !1,
                hideScrollbar: !0
            });
            this.updateTimeline = function() {
                n(t.refresh.bind(t));
            }, this.scrollTo = function(e) {
                t.scrollToElement(e[0]);
            };
        },
        initScrollers: function() {
            function e() {
                return parseFloat(a.css("left")) || 0;
            }
            function i() {
                var t = e(), i = s.width();
                o.toggle(0 > t), r.toggle(i - t < a.width());
            }
            function n(t) {
                t = Math.max(s.width() - a.outerWidth(), t), t = Math.min(0, t), a.animate({
                    left: t
                }, {
                    duration: 200,
                    always: i
                });
            }
            var o, r, s = this.$context, a = this.$slider, l = [ "prev", "next" ].map(function(e) {
                return t("<div>", {
                    "class": "wip-page wip-page-" + e
                }).append('<div class="wip-sprite wip-page-arrow"></div>');
            });
            o = l[0], r = l[1], s.append(o, r), a.css("position", "relative"), o.on("click", function() {
                n(e() + a.width() / 2);
            }), r.on("click", function() {
                n(e() - a.width() / 2);
            }), i(), this.updateTimeline = i, this.scrollTo = function(t) {
                var e = t.position();
                n(-e.left);
            };
        },
        destroy: function() {
            t(window).off("resize", this.updateTimeline), this.iscroll && (this.iscroll.destroy(), 
            this.iscroll = null);
        }
    }, {
        init: function() {
            return o.apply(this, arguments);
        }
    });
}), define("wip/View/Content", [ "jquery", "log", "nbd/util/media", "nbd/View/Entity", "be/onhistory", "lib/keyboard", "wip/createloader", "wip/lib/timeline", "vendor/misc/history" ], function(t, e, i, n, o, r, s, a, l) {
    "use strict";
    e = e.get("wip/View/Content");
    var c = n.extend({
        init: function() {
            this._super.apply(this, arguments), this.listenTo(this._model, "revision", this.render);
        },
        destroy: function() {
            this.timeline && this.timeline.destroy(), this._super();
        },
        render: function(e) {
            if (e instanceof t) return this.$view = e, this.timeline = a.init(this.$view.find("#wip-timeline")), 
            this.update(), void this.rendered();
            var i = this.$view.find(".wip-image"), n = this.$view.find(".wip-enlarge"), o = this._model.image();
            o && (this.constrain(), i.prop("src", o.url), n.attr("href", this._model.image(!0).url), 
            this.update());
        },
        rendered: function() {
            function e() {
                var t = r._model.image(!0);
                i.is("desktop") || window.open(t.url, "_blank");
            }
            var n = o(function() {
                var e = t(this);
                return {
                    wip: {
                        rev: e.data("id") || e.attr("revision_id")
                    }
                };
            }), r = this;
            this.$view.on("click", "a.wip-thumbnail-container", n).on("click", "a.wip-thumbnail-container", !1).on("click", ".wip-action-create", this.create.bind(this)).on("click", "#wip-next", function() {
                r.adj("next");
            }).on("click", "#wip-prev", function() {
                r.adj("prev");
            });
            var s = this.$view.find(".wip-image").on("click", e);
            s.css("min-height", (this._model.get("safe") ? 0 : 400) + "px");
        },
        adj: function(t) {
            var e, i = this._model.adjacent();
            i && i[t] && (e = this._model.get("wip").revisions[i[t]], l.pushState({
                wip: {
                    rev: i[t]
                }
            }, document.title, e.url));
        },
        onkey: function() {
            var t = this;
            r.add({
                left: function() {
                    t.adj("prev");
                },
                right: function() {
                    t.adj("next");
                }
            });
        },
        create: function() {
            var t = this._model.get("wip").id;
            s().then(function(e) {
                e.render(t);
            });
        },
        update: function() {
            var t = this._model.get("revision"), e = this._model.adjacent();
            t = t.id || t, e && this.$view.find("#wip-prev").toggle(!!e.prev).end().find("#wip-next").toggle(!!e.next).end();
            var i = this.$view.find("#wip-timeline").find(".wip-thumbnail-container.timeline-active").removeClass("timeline-active").end().find(".wip-thumbnail-container[revision_id=" + t + "]").addClass("timeline-active").offsetParent();
            this.timeline && i && this.timeline.scrollTo(i);
        },
        constrain: function() {
            var t = this.$view.find(".wip-image"), i = t.closest(".wip-image-container"), n = Math.max(t.height(), i.height());
            e.info("height constraint", n), i.css({
                "min-height": n + "px",
                "line-height": n - (2 - n % 2) + "px"
            });
        }
    }, {
        _: !0
    });
    return c;
}), define("wip/Model/Content", [ "nbd/Model" ], function(t) {
    "use strict";
    var e = t.extend({
        revision: function() {
            var t = this.get("revision"), e = "object" == typeof t ? t : this.get("wip").revisions[t];
            return e;
        },
        revisionIds: function() {
            return Object.keys(this.get("wip").revisions).map(function(t) {
                return +t;
            }).sort(function(t, e) {
                return t - e;
            });
        },
        image: function(t) {
            var e = this.revision();
            return e && e.images ? (t ? e.images.full_screen : null) || e.images.high_definition || e.images.normal_resolution : null;
        },
        ordinality: function() {
            var t = this.get("revision"), e = this.revisionIds();
            return t = +(t.id || t), e.indexOf(t) + 1;
        },
        adjacent: function() {
            var t, e = this.revision().id, i = this.revisionIds();
            return ~(t = i.indexOf(e)) ? {
                prev: i[t + 1],
                next: i[t - 1]
            } : void 0;
        }
    });
    return e;
}), define("wip/Controller/Content", [ "be/stats", "nbd/Controller/Entity", "wip/View/Content", "wip/Model/Content" ], function(t, e, i, n) {
    "use strict";
    var o = e.extend({
        init: function() {
            this._super.apply(this, arguments), this._model.on("revision", this.stats, this), 
            this.stats();
        },
        stats: function() {
            t.view("wip_revision", this._model.revision().id);
        },
        render: function(t) {
            this._view.render(t);
        }
    }, {
        VIEW_CLASS: i,
        MODEL_CLASS: n
    });
    return o;
}), define("wip/lib/session", [ "jquery", "vendor/misc/history" ], function(t, e) {
    "use strict";
    function i(t) {
        if (t.originalEvent) {
            var i = e.getState();
            i.data.wip || window.location.href === i.url || window.location.replace(i.url);
        }
    }
    var n, o = function() {
        var t = e.getState().data, i = t.wip && t.wip.rev;
        i && this.set("revision", i);
    };
    return {
        init: function(r) {
            n = o.bind(r);
            var s = e.getState().data;
            s && s.wip && !s.wip.rev && e.replaceState({
                wip: {
                    rev: r.revision().id
                }
            }, document.title, window.location.href), t(window).on({
                popstate: i,
                statechange: n
            });
        },
        destroy: function() {
            t(window).off({
                popstate: i,
                statechange: n
            });
        }
    };
}), define("wip/lib/header", [ "be/follow", "lib/social", "wip/createloader" ], function(t, e, i) {
    "use strict";
    return {
        init: function(i, n) {
            t.init(i), e.init(i), i.on("click", ".wip-action-update", function() {
                var t = n.get("wip").id, e = n.get("revision");
                e = e.id || e, this.edit(t, e);
            }.bind(this));
        },
        edit: function(t, e) {
            i().then(function(i) {
                i.render(t, e, !0);
            });
        }
    };
}), define("wip/lib/description", [ "jquery", "nbd/trait/pubsub" ], function(t, e) {
    "use strict";
    return t.extend({
        init: function(t, e) {
            this.$view = t, this._model = e, this.listenTo(e, "revision", this.update);
        },
        update: function() {
            var t = this._model.revision().description;
            this.$view.find("#description").text(t).parent().toggleClass("hide", !t);
        },
        destroy: function() {
            this.$view = null, this.stopListening();
        }
    }, e);
}), define("wip/lib/comments", [ "jquery", "log", "nbd/util/async", "nbd/util/media", "be/form/Reset", "be/comments", "be/automention", "be/mentionSource", "be/charCounter", "hgn!templates/form/textarea", "hgn!templates/button" ], function(t, e, i, n, o, r, s, a, l, c, u) {
    "use strict";
    e = e.get("wip/lib/comments");
    var d = {
        init: function(e, i) {
            var o, s, a = i.get("revision"), l = t(document.body).hasClass("logged-in");
            a = a.id || a, o = e.find(".comments-pagination"), s = e.find("#comment-count"), 
            this.$view = e.find(".comments-container"), this._model = i, this._view = r.init(this.$view.find("#comments-list"), {
                type: "wip_revision",
                order: "asc",
                entity_id: a
            }, function(t) {
                o.toggleClass("hide", !t.more).parent().toggleClass("has-more", !!t.more);
            });
            var c = function(t) {
                this.$view.toggleClass("inline-comments-container", t).toggleClass("big-comments", !t);
            }.bind(this);
            n.on("desktop", c), c(n.is("desktop")), this._model.on("revision", this.view, this), 
            this.view(), l && this.create();
        },
        view: function(t) {
            a.init({
                local: "/mentions/wip_revision/" + this._model.revision().id
            }), this.$view.addClass("loading"), (t ? this._view.set({
                entity_id: t,
                offset: void 0
            }).clear() : this._view).get().then(function(t) {
                this.$view.removeClass("loading").find(".empty-state").toggleClass("hide", !(!t.comments || !t.comments.length));
            }.bind(this));
        },
        create: function() {
            function e(t) {
                if (!t.id || !t.user) throw t;
                i.add({
                    id: t.id,
                    user: t.user,
                    comment: t.comment,
                    posted_on: "Just now",
                    permissions: [ 3e3 ]
                });
            }
            var i = this._view, n = this._model, r = t(u({
                label: "Post Comment",
                classes: [ "form-button-default", "form-button-submit", "form-submit" ]
            })).hide(), a = t(c({
                id: "comment",
                autocomplete: "off",
                maxlength: 800,
                classes: [ "inline-comment-input", "js-characters-limited", "form-text-normal" ],
                containerClasses: [ "inline-comment-input-container", "ui-front" ],
                placeholder: "Write a comment...",
                validate: "required,Generic,length[0,800]"
            }));
            l.init(a), s(a.find("textarea").on("input propertychange", function() {
                var e = t(this);
                t(this).height(this.scrollHeight - (this.clientHeight - e.height())), r.toggle(!!this.value.length);
            })), this.$view.find(".inline-comment-form").append(a, r), a.find("textarea").val(""), 
            this._form = new o(this.$view), this._form.commit = function(t) {
                var i = n.get("revision");
                return i = i.id || i, t.data.entity_id = i, this.then(e).then(function() {
                    a.find("textarea").height(""), r.hide();
                }), this;
            }, this.$view.on("click", "#post-comment", function(e) {
                e.preventDefault(), t(t(this).attr("href")).focus();
            });
        },
        destroy: function() {
            this._model.off(null, null, this), this._view.destroy(), this._model = this._view = null;
        }
    };
    return d;
}), define("wip/lib/tags", [], function() {
    "use strict";
    return {
        init: function(t, e) {
            this.$view = t, this.model = e, e.on("revision", function() {
                this.update(e.revision().tags);
            }, this);
        },
        update: function(t) {
            this.$view.toggleClass("hide", !t.length).find("#object-tags").html(t.map(function(t) {
                return '<a class="object-tag" href="' + t.url + '">' + t.title + "</a>";
            }).join(""));
        },
        destroy: function() {
            this.model.off(null, null, this), this.$view = this.model = null;
        }
    };
}), define("require/hgn!templates/wip/revision", [ "hogan" ], function(t) {
    var e = new t.Template({
        code: function(t, e, i) {
            var n = this;
            return n.b(i = i || ""), n.b('<span id="revision-number">Revision '), n.b(n.v(n.f("ordinality", t, e, 0))), 
            n.b(" of "), n.b(n.v(n.f("cardinality", t, e, 0))), n.b("</span>"), n.b("\n" + i), 
            n.b('<span id="revision-date">( '), n.b(n.v(n.f("date", t, e, 0))), n.b(" )</span>"), 
            n.b("\n" + i), n.b('<a id="post-comment" href="#comment">Post a Comment</a>'), n.b("\n"), 
            n.fl();
        },
        partials: {},
        subs: {}
    }, "", t), i = function(t, e) {
        for (var i in e) t[i] = e[i];
        return t;
    }, n = {
        "": null
    }, o = function() {
        return e.render.apply(e, arguments);
    };
    return e.ri = function(t, e, o) {
        return this.r(t, i(n, e), o);
    }, o.template = e, o;
}), define("wip/lib/revision", [ "jquery", "moment", "nbd/util/async", "nbd/util/pipe", "nbd/util/media", "nbd/View/Element", "hgn!templates/wip/revision" ], function(t, e, i, n, o, r, s) {
    "use strict";
    return {
        init: function(i, a) {
            this._model = a, this._view = new (r.extend({
                template: n(s, t),
                templateData: function() {
                    var t = a.revision().created_on;
                    return t = "string" == typeof t ? t : e.unix(t).format("MMMM D, YYYY"), {
                        ordinality: a.ordinality(),
                        cardinality: Object.keys(a.get("wip").revisions).length,
                        date: t
                    };
                }
            }))(i), a.on("revision", this.render, this), o.on("desktop", this.render, this), 
            this.render();
        },
        render: function() {
            o.is("desktop") ? this._view.destroy() : this._view.render();
        },
        destroy: function() {
            o.off(null, null, this), this._model.off(null, null, this), this._view.destroy(), 
            this._view = this._model = null;
        }
    };
}), define("wip/lib/actions", [ "be/spam", "be/Controller/Report" ], function(t, e) {
    "use strict";
    return {
        init: function(i, n) {
            var o = new e(n.get("wip").id, {
                CONSTANTS: n.get("constants")
            });
            o.setContext(i.find(".js-report")), i.on("click", ".wip-spam", function() {
                t.report("wip", n.get("wip").id, $(this));
            });
        }
    };
}), define("wip/lib/core", [ "nbd/util/deparam", "wip/Controller/Content", "wip/lib/session", "wip/lib/header", "wip/lib/description", "wip/lib/comments", "wip/lib/tags", "wip/lib/revision", "wip/lib/actions", "project/lib/mature" ], function(t, e, i, n, o, r, s, a, l, c) {
    "use strict";
    return {
        init: function(t, u) {
            var d = new e(u);
            this._wip = d, d.render(t.find(".wip-main .wip-main-content")), i.init(d._model), 
            o.init(t.find(".wip-sidebar"), d._model), r.init(t.find(".wip-sidebar"), d._model), 
            n.init(t.find("#wip-header"), d._model), s.init(t.find("#wip-tags"), d._model), 
            a.init(t.find("#comments-header"), d._model), l.init(t.find(".wip-actions"), d._model, u.constants), 
            c.init(u.wip.id, u.wip, u.constants), u.share && this.share(d._model);
        },
        share: function(e) {
            require([ "wip/lib/share" ], function(i) {
                i(e.get("wip"), e.revision(), t(location.search.replace(/^\?/, "")).sid);
            });
        },
        destroy: function() {
            i.destroy(), o.destroy(), r.destroy(), s.destroy(), a.destroy(), c.destroy(), this._wip && (this._wip.destroy(), 
            this._wip = null);
        }
    };
}), define("require/hgn!templates/wip", [ "hogan" ], function(t) {
    var e = new t.Template({
        code: function(t, e, i) {
            var n = this;
            return n.b(i = i || ""), n.b('<div id="wip-container">'), n.b("\n" + i), n.b('  <div id="wip-header" class="cfix'), 
            n.s(n.f("linked_project", t, e, 1), t, e, 0, 78, 93, "{{ }}") && (n.rs(t, e, function(t, e, i) {
                i.b(" linked-project");
            }), t.pop()), n.b('">'), n.b("\n"), n.b("\n" + i), n.b('    <div class="wip-header-left left relative">'), 
            n.b("\n"), n.b("\n" + i), n.b('      <div class="inline-block wip-user-info relative">'), 
            n.b("\n"), n.b("\n" + i), n.b('        <h1 class="wip-title">'), n.b(n.v(n.d("wip.title", t, e, 0))), 
            n.b("</h1>"), n.b("\n"), n.b("\n" + i), n.b('        <ul id="wip-stats" class="inline-block">'), 
            n.b("\n"), n.b("\n" + i), n.s(n.d("wip.private", t, e, 1), t, e, 0, 348, 460, "{{ }}") && (n.rs(t, e, function(t, e, n) {
                n.b('          <li class="project-stat project-stat-private beicons-pre beicons-pre-privacy">PRIVATE</li>'), 
                n.b("\n" + i);
            }), t.pop()), n.b("\n" + i), n.b('          <li class="project-stat project-stat-views beicons-pre beicons-pre-eye">'), 
            n.b("\n" + i), n.b("            "), n.b(n.v(n.d("wip.stats.views", t, e, 0))), n.b("\n" + i), 
            n.b("          </li>"), n.b("\n"), n.b("\n" + i), n.b('          <li class="project-stat project-stat-comments beicons-pre beicons-pre-comment">'), 
            n.b("\n" + i), n.b("            "), n.b(n.v(n.d("wip.stats.comments", t, e, 0))), 
            n.b("\n" + i), n.b("          </li>"), n.b("\n"), n.b("\n" + i), n.b('          <li class="project-stat project-stat-revisions beicons-pre beicons-pre-wip">'), 
            n.b("\n" + i), n.b("            "), n.b(n.v(n.d("wip.stats.revisions", t, e, 0))), 
            n.b("\n" + i), n.b("          </li>"), n.b("\n"), n.b("\n" + i), n.b("        </ul> <!-- #wip-stats -->"), 
            n.b("\n"), n.b("\n" + i), n.b('        <div class="project-published inline-block">'), 
            n.b(n.v(n.d("revision.created_on", t, e, 0))), n.b("</div>"), n.b("\n"), n.b("\n" + i), 
            n.s(n.d("user.owner", t, e, 1), t, e, 0, 1033, 1272, "{{ }}") && (n.rs(t, e, function(t, e, n) {
                n.b('          <span class="fake-link wip-action js-wip-action-update wip-action-update hide-phone hide-tablet" data-id="'), 
                n.b(n.v(n.d("wip.id", t, e, 0))), n.b('" data-revision-id="'), n.b(n.v(n.d("revision.id", t, e, 0))), 
                n.b('" wip_id="'), n.b(n.v(n.d("wip.id", t, e, 0))), n.b('" revision_id="'), n.b(n.v(n.d("revision.id", t, e, 0))), 
                n.b('">Edit Info</span>'), n.b("\n" + i);
            }), t.pop()), n.b("\n" + i), n.b("      </div> <!-- .inline-block -->"), n.b("\n"), 
            n.b("\n" + i), n.b("    </div> <!-- wip-header-left -->"), n.b("\n"), n.b("\n" + i), 
            n.b('    <div class="wip-owner">'), n.b("\n"), n.b("\n" + i), n.b('      <a class="user-image-link" href="'), 
            n.b(n.v(n.d("user.url", t, e, 0))), n.b('"><img class="inline-block user-image js-mini-profile" src="'), 
            n.b(n.v(n.d("user.image", t, e, 0))), n.b('" data-id="'), n.b(n.v(n.d("user.id", t, e, 0))), 
            n.b('" /></a>'), n.b("\n" + i), n.b('      <a href="'), n.b(n.v(n.d("wip.owner.url", t, e, 0))), 
            n.b('" class="wip-author-link text-ellipsis js-mini-profile" data-id="'), n.b(n.v(n.d("wip.owner.id", t, e, 0))), 
            n.b('">'), n.b(n.v(n.d("wip.owner.display_name", t, e, 0))), n.b("</a>"), n.b("\n"), 
            n.b("\n" + i), n.b('      <div class="wip-owner-buttons">'), n.b("\n"), n.b("\n" + i), 
            n.s(n.d("user.owner", t, e, 1), t, e, 1, 0, 0, "") || (n.b("\n" + i), n.b('        <div data-followee="'), 
            n.b(n.v(n.d("user.id", t, e, 0))), n.b('" class="action-follow-user-wrap follow-button-container action-follow-user'), 
            n.s(n.d("user.following", t, e, 1), t, e, 0, 1892, 1902, "{{ }}") && (n.rs(t, e, function(t, e, i) {
                i.b(" following");
            }), t.pop()), n.b('">'), n.b("\n" + i), n.b('          <a class="form-button form-button-follow form-button-small form-button-default form-button-left-icon form-button-icon-follow">Follow</a>'), 
            n.b("\n" + i), n.b('          <a class="form-button form-button-following form-button-small form-button-light-and-grey form-button-left-icon form-button-icon-following">Following</a>'), 
            n.b("\n" + i), n.b('          <a class="form-button form-button-unfollow form-button-small form-button-red form-button-left-icon form-button-icon-unfollow">Unfollow&nbsp;</a>'), 
            n.b("\n" + i), n.b("        </div>"), n.b("\n"), n.b("\n" + i)), n.b("\n" + i), 
            n.s(n.d("wip.private", t, e, 1), t, e, 1, 0, 0, "") || (n.b("\n" + i), n.b('          <div class="inline-block tooltipi-container wip-share-container tooltipi-share-container">'), 
            n.b("\n" + i), n.b('            <span id="wip-share" class="form-button form-button-small form-button-light-and-grey form-button-down-arrow">Share</span>'), 
            n.b("\n"), n.b("\n" + i), n.b('            <div class="tooltipi tooltipi-white tooltipi-share">'), 
            n.b("\n"), n.b("\n" + i), n.b("              "), n.b(n.t(n.d("content.sharing", t, e, 0))), 
            n.b("\n"), n.b("\n" + i), n.b("            </div>"), n.b("\n"), n.b("\n" + i), n.b("          </div>"), 
            n.b("\n"), n.b("\n" + i)), n.b("\n" + i), n.b("      </div> <!-- .wip-owner-buttons -->"), 
            n.b("\n" + i), n.b("    </div> <!-- .wip-owner -->"), n.b("\n"), n.b("\n" + i), 
            n.b("  </div>"), n.b("\n"), n.b("\n" + i), n.b('  <div class="wip-content cfix">'), 
            n.b("\n"), n.b("\n" + i), n.b('    <div class="wip-main left">'), n.b("\n"), n.b("\n" + i), 
            n.b('      <div class="wip-main-content relative">'), n.b("\n"), n.b("\n" + i), 
            n.s(n.f("safe", t, e, 1), t, e, 0, 3073, 3256, "{{ }}") && (n.rs(t, e, function(t, e, n) {
                n.s(n.d("revision.original_image", t, e, 1), t, e, 0, 3110, 3219, "{{ }}") && (n.rs(t, e, function(t, e, n) {
                    n.b('        <a class="wip-enlarge" href="'), n.b(n.v(n.d("revision.original_image", t, e, 0))), 
                    n.b('" target="_blank">Original Size</a>'), n.b("\n" + i);
                }), t.pop());
            }), t.pop()), n.b('        <div id="wip-prev" class="wip-arrow"></div>'), n.b("\n" + i), 
            n.b('        <div id="wip-next" class="wip-arrow"></div>'), n.b("\n"), n.b("\n" + i), 
            n.b('        <div class="wip-image-container overflow-hidden">'), n.b("\n"), n.b("\n" + i), 
            n.s(n.f("safe", t, e, 1), t, e, 0, 3449, 3527, "{{ }}") && (n.rs(t, e, function(t, e, n) {
                n.b('            <img src="'), n.b(n.v(n.d("revision.image_path", t, e, 0))), n.b('" class="wip-image"/>'), 
                n.b("\n" + i);
            }), t.pop()), n.b("\n" + i), n.s(n.f("safe", t, e, 1), t, e, 1, 0, 0, "") || (n.b('            <div class="wip-image wip-image-mature" style="max-height:'), 
            n.b(n.v(n.d("revision.image_properties.height", t, e, 0))), n.b('px;">&nbsp;</div>'), 
            n.b("\n" + i)), n.b("\n" + i), n.b("        </div>"), n.b("\n"), n.b("\n" + i), 
            n.b("        "), n.b(n.t(n.d("content.timeline", t, e, 0))), n.b("\n"), n.b("\n" + i), 
            n.b("      </div> <!-- .wip-main-content -->"), n.b("\n"), n.b("\n" + i), n.b("    </div> <!-- .wip-main -->"), 
            n.b("\n"), n.b("\n" + i), n.b('    <div class="wip-sidebar left'), n.s(n.f("linked_project", t, e, 1), t, e, 0, 3874, 3889, "{{ }}") && (n.rs(t, e, function(t, e, i) {
                i.b(" linked-project");
            }), t.pop()), n.b('">'), n.b("\n"), n.b("\n" + i), n.b('      <div class="wip-sidebar-content">'), 
            n.b("\n"), n.b("\n" + i), n.b('        <div class="hide-phone hide-tablet'), n.s(n.d("revision.description", t, e, 1), t, e, 1, 0, 0, "") || n.b(" hide"), 
            n.b('">'), n.b("\n" + i), n.b('          <div class="wip-sidebar-label">Description</div>'), 
            n.b("\n" + i), n.b('          <div id="description" class="wip-description">'), 
            n.b(n.v(n.d("revision.description", t, e, 0))), n.b("</div>"), n.b("\n" + i), n.b("        </div>"), 
            n.b("\n"), n.b("\n" + i), n.b('        <div id="comments-list-container" class="comments-container inline-comments-container">'), 
            n.b("\n"), n.b("\n" + i), n.b('          <div id="wip-comments-header">'), n.b("\n"), 
            n.b("\n" + i), n.b('            <div class="comments-pagination see-more-button-container hide">'), 
            n.b("\n" + i), n.b('              <div class="comments-total comments-offset fake-link cfix">'), 
            n.b("\n" + i), n.b('                <span class="comments-total-image spritei left"></span>'), 
            n.b("\n" + i), n.b('                <span class="comments-total-text fake-link left">Load More &darr;</span>'), 
            n.b("\n" + i), n.b("              </div>"), n.b("\n" + i), n.b("            </div>"), 
            n.b("\n"), n.b("\n" + i), n.b('            <div class="empty-state hide hide-phone hide-tablet">Discuss This Work in Progress:</div>'), 
            n.b("\n"), n.b("\n" + i), n.b('            <div id="comments-header" class="show-tablet show-phone"></div>'), 
            n.b("\n"), n.b("\n" + i), n.s(n.d("revision.description", t, e, 1), t, e, 0, 4924, 5185, "{{ }}") && (n.rs(t, e, function(t, e, n) {
                n.b('            <div id="wip-description-wrap" class="show-phone show-tablet">'), 
                n.b("\n" + i), n.b('              <div class="wip-sidebar-label">Description</div>'), 
                n.b("\n" + i), n.b('              <div id="description" class="wip-description">'), 
                n.b(n.v(n.d("revision.description", t, e, 0))), n.b("</div>"), n.b("\n" + i), n.b("            </div>"), 
                n.b("\n" + i);
            }), t.pop()), n.b("\n" + i), n.b("          </div>"), n.b("\n"), n.b("\n" + i), 
            n.b('          <ul id="comments-list"></ul>'), n.b("\n"), n.b("\n" + i), n.b('          <div id="comment-form-header" class="show-tablet">'), 
            n.b("\n" + i), n.b("            Discuss This Work in Progress:"), n.b("\n" + i), 
            n.b("          </div>"), n.b("\n"), n.b("\n" + i), n.b('          <form class="inline-comment-form cfix relative" action="'), 
            n.b(n.v(n.f("comment_action", t, e, 0))), n.b('"></form>'), n.b("\n"), n.b("\n" + i), 
            n.b("        </div> <!-- .comments-container  -->"), n.b("\n"), n.b("\n" + i), n.b("      </div> <!-- .wip-sidebar-content -->"), 
            n.b("\n"), n.b("\n" + i), n.b("    </div> <!-- .wip-sidebar -->"), n.b("\n"), n.b("\n" + i), 
            n.s(n.f("linked_project", t, e, 1), t, e, 0, 5634, 6180, "{{ }}") && (n.rs(t, e, function(t, e, n) {
                n.b("\n" + i), n.b('        <div class="wip-linked-project-block absolute unselectable">'), 
                n.b("\n"), n.b("\n" + i), n.b('          <a class="wip-linked-project cfix bordered-item" href="'), 
                n.b(n.v(n.f("url", t, e, 0))), n.b('" target="_blank">'), n.b("\n"), n.b("\n" + i), 
                n.b('            <img class="left project-cover" src="'), n.b(n.v(n.f("cover", t, e, 0))), 
                n.b('" />'), n.b("\n" + i), n.b('            <div class="left project-info">'), 
                n.b("\n" + i), n.b('              <div class="project-title bold">'), n.b(n.v(n.f("name", t, e, 0))), 
                n.b("</div>"), n.b("\n" + i), n.b('              <div class="project-link bold fake-link">View Full Project &rarr;</div>'), 
                n.b("\n" + i), n.b('              <div class="project-fields grey ellipsis">'), 
                n.b(n.v(n.f("fields", t, e, 0))), n.b("</div>"), n.b("\n" + i), n.b("            </div>"), 
                n.b("\n"), n.b("\n" + i), n.b("          </a>"), n.b("\n"), n.b("\n" + i), n.b("        </div>"), 
                n.b("\n"), n.b("\n" + i);
            }), t.pop()), n.b("  </div> <!-- .wip-content -->"), n.b("\n"), n.b("\n" + i), n.b('  <div class="wip-actions">'), 
            n.b("\n"), n.b("\n" + i), n.b('    <a class="pre-icon pre-icon-report flag-spam flag-spam-project js-report wip-report" data-id="'), 
            n.b(n.v(n.d("wip.id", t, e, 0))), n.b('">Report</a>'), n.b("\n"), n.b("\n" + i), 
            n.s(n.f("signed_in", t, e, 1), t, e, 0, 6401, 6480, "{{ }}") && (n.rs(t, e, function(t, e, n) {
                n.b("\n" + i), n.b('      <a class="beicons-pre beicons-pre-spam wip-spam">Mark as Spam</a>'), 
                n.b("\n"), n.b("\n" + i);
            }), t.pop()), n.b("\n" + i), n.b("  </div> <!-- .wip-actions -->"), n.b("\n"), n.b("\n" + i), 
            n.b('  <div class="cfix '), n.s(n.d("revision.tags", t, e, 1), t, e, 1, 0, 0, "") || n.b("hide"), 
            n.b('" id="wip-tags">'), n.b("\n" + i), n.b('    <div class="wip-tags-label inline-block">Tags:</div>'), 
            n.b("\n" + i), n.b('    <div class="cfix" id="object-tags">'), n.b("\n" + i), n.s(n.d("revision.tags", t, e, 1), t, e, 0, 6725, 6789, "{{ }}") && (n.rs(t, e, function(t, e, n) {
                n.b('      <a class="object-tag" href="'), n.b(n.v(n.f("url", t, e, 0))), n.b('">'), 
                n.b(n.v(n.f("title", t, e, 0))), n.b("</a>"), n.b("\n" + i);
            }), t.pop()), n.b("    </div>"), n.b("\n" + i), n.b("  </div>"), n.b("\n" + i), 
            n.b("</div>"), n.b("\n"), n.fl();
        },
        partials: {},
        subs: {}
    }, "", t), i = function(t, e) {
        for (var i in e) t[i] = e[i];
        return t;
    }, n = {
        "": null
    }, o = function() {
        return e.render.apply(e, arguments);
    };
    return e.ri = function(t, e, o) {
        return this.r(t, i(n, e), o);
    }, o.template = e, o;
}), define("be/View/Dialog/Popup/Wip", [ "nbd/util/async", "nbd/util/extend", "nbd/util/media", "be/View/Dialog/Popup", "lib/social", "lib/adobeanalytics", "wip/lib/core", "hgn!templates/wip" ], function(t, e, i, n, o, r, s, a) {
    "use strict";
    function l(t, e, i) {
        var n = t.map(function(n, o) {
            return n = Math.max(i ? i[o] : -1/0, n), n = Math.min(e ? e[o] : 1/0, n), n / t[o];
        }).reduce(function(t, e) {
            return Math.min(t, e);
        }, 1/0);
        return t.map(function(t) {
            return ~~(t * n);
        });
    }
    var c = n.extend({
        init: function() {
            this._super.apply(this, arguments), i.on("desktop:exit", function() {
                this.hide();
            }, this), this.on("show", function() {
                try {
                    s._wip._view.onkey();
                } catch (t) {}
            });
        },
        destroy: function() {
            i.off(null, null, this), this._super();
        },
        innerDestroy: function() {
            return this.$view.find(".wip-image").css("max-height", ""), s.destroy();
        },
        mustache: a,
        templateData: function() {
            var t = this._super();
            return e({
                classes: [ "wip-view" ],
                toolbar: !1
            }, t);
        },
        rendered: function() {
            this.$view.appendTo(document.body), document.title = this._model.get("title"), this._super(), 
            s.init(this.$view, this._model.data()), this.$view.find(".wip-owner").append('<div class="close popup-close">'), 
            this.findMax(), this.constrain(), this.listenTo(s._wip._model, "revision", this.constrain);
            var e = this.position.bind(this), i = this.$view.find(".wip-image-container");
            s._wip._model.get("safe") || e(), i.find(".wip-image").css("max-width", "100%").on("load", function() {
                i.css({
                    "min-width": i.width(),
                    "min-height": i.height()
                }), t(e);
            }), r.page();
        },
        findMax: function() {
            var t = [ window.innerWidth, window.innerHeight ], e = [ 0, 0 ];
            return e[0] += .1 * t[0], e[0] += this.$view.find(".wip-sidebar").outerWidth(), 
            e[1] += .1 * t[1], e[1] += this.$view.find("#wip-header").outerHeight(), e[1] += this.$view.find("#wip-timeline").outerHeight(), 
            t = t.map(function(t, i) {
                return t - e[i];
            }, e), this.max = t;
        },
        constrain: function() {
            var t = s._wip._model.image(), e = l([ t.width, t.height ], this.max);
            this.$view.find(".wip-image").css("max-height", e[1] + "px");
        },
        position: function() {
            this._super();
            var t = this.$view.filter(".popup"), e = parseFloat(t.css("top")) || 0;
            t.css("top", e + 30);
        },
        hide: function(t) {
            return this.$view ? (this._super(), this.$view.removeClass("shown"), this.innerDestroy(), 
            t !== !0 && this.trigger("exit"), this) : void 0;
        }
    });
    return c;
}), define("be/Controller/Dialog/Wip", [ "be/Controller/Dialog/EntityPopup", "be/View/Dialog/Popup/Wip" ], function(t, e) {
    "use strict";
    var i = t.extend({}, {
        VIEW_CLASS: {
            desktop: e
        }
    });
    return i;
}), define("wip/popup", [ "nbd/util/extend", "be/trait/popupSession", "be/Controller/Dialog/Wip" ], function(t, e, i) {
    "use strict";
    return t({}, e, {
        selector: ".wip-action-popup",
        entity: "wip",
        Dialog: i,
        show: function(t) {
            var i = t.data;
            if (this.singleton._view.$view && i && i.wip && i.wip.rev) {
                var n = this.singleton._view.$view.toArray().every(function(t) {
                    return document.body.contains(t);
                });
                if (n) return;
            }
            e.show.call(this, t);
        }
    });
}), define("require/hgn!templates/miniProfile", [ "hogan" ], function(t) {
    var e = new t.Template({
        code: function(t, e, i) {
            var n = this;
            return n.b(i = i || ""), n.s(n.f("user", t, e, 1), t, e, 0, 9, 1771, "{{ }}") && (n.rs(t, e, function(t, e, n) {
                n.b('<div class="mini-profile-wrap hide-phone hide-tablet cfix">'), n.b("\n"), n.b("\n" + i), 
                n.b('  <div class="user-info-container cfix">'), n.b("\n" + i), n.b('    <a target="_blank" href="'), 
                n.b(n.v(n.f("url", t, e, 0))), n.b('" class="user-image-wrap user-image-link">'), 
                n.b("\n" + i), n.b('      <img src="'), n.b(n.v(n.d("images.115", t, e, 0))), n.b('" class="user-image">'), 
                n.b("\n" + i), n.b("    </a>"), n.b("\n"), n.b("\n" + i), n.b('    <div class="user-info">'), 
                n.b("\n" + i), n.b('      <a target="_blank" href="'), n.b(n.v(n.f("url", t, e, 0))), 
                n.b('" class="user-name">'), n.b(n.v(n.f("display_name", t, e, 0))), n.b("</a>"), 
                n.b("\n"), n.b("\n" + i), n.b('      <a target="_blank" href="'), n.b(n.v(n.d("location.link", t, e, 0))), 
                n.b('" class="location-link beicons-pre beicons-pre-location">'), n.b(n.v(n.f("city", t, e, 0))), 
                n.s(n.f("state", t, e, 1), t, e, 0, 484, 495, "{{ }}") && (n.rs(t, e, function(t, e, i) {
                    i.b(", "), i.b(i.v(i.f("state", t, e, 0)));
                }), t.pop()), n.s(n.f("country", t, e, 1), t, e, 0, 517, 530, "{{ }}") && (n.rs(t, e, function(t, e, i) {
                    i.b(", "), i.b(i.v(i.f("country", t, e, 0)));
                }), t.pop()), n.b("</a>"), n.b("\n" + i), n.b("    </div> <!-- .user-info -->"), 
                n.b("\n" + i), n.b("  </div> <!-- .user-info-container -->"), n.b("\n"), n.b("\n" + i), 
                n.b("  "), n.b(n.t(n.f("follow", t, e, 0))), n.b("\n"), n.b("\n" + i), n.s(n.d("projects.0", t, e, 1), t, e, 0, 651, 1293, "{{ }}") && (n.rs(t, e, function(t, e, n) {
                    n.b('  <a target="_blank" href="'), n.b(n.v(n.f("url", t, e, 0))), n.b('" class="cfix user-view-link gallery-projects-wrap">'), 
                    n.b("\n" + i), n.b('    <ul class="project-cover-container">'), n.b("\n" + i), n.s(n.f("projects", t, e, 1), t, e, 0, 795, 900, "{{ }}") && (n.rs(t, e, function(t, e, n) {
                        n.b('      <li class="project-cover-wrap">'), n.b("\n" + i), n.b('        <img src="'), 
                        n.b(n.v(n.f("cover", t, e, 0))), n.b('" class="project-cover">'), n.b("\n" + i), 
                        n.b("      </li>"), n.b("\n" + i);
                    }), t.pop()), n.b("  "), n.s(n.d("projects.1", t, e, 1), t, e, 1, 0, 0, "") || n.b('<li class="project-cover-wrap"></li>'), 
                    n.b("\n" + i), n.b("  "), n.s(n.d("projects.2", t, e, 1), t, e, 1, 0, 0, "") || n.b('<li class="project-cover-wrap"></li>'), 
                    n.b("\n" + i), n.b("    </ul> <!-- .project-cover-container -->"), n.b("\n" + i), 
                    n.b('    <span class="gallery-cover-overlay">'), n.b("\n" + i), n.b('      <div class="gallery-cover-overlay-text">View Profile&nbsp;<span class="rarr">&rarr;</span></div>'), 
                    n.b("\n" + i), n.b("    </span>"), n.b("\n" + i), n.b("  </a> <!-- .gallery-projects-wrap -->"), 
                    n.b("\n" + i);
                }), t.pop()), n.b("\n" + i), n.s(n.f("stats", t, e, 1), t, e, 0, 1322, 1725, "{{ }}") && (n.rs(t, e, function(t, e, n) {
                    n.b('  <div class="stats-wrap">'), n.b("\n"), n.b("\n" + i), n.b('    <span class="cover-stat beicons-pre beicons-pre-eye cover-stat-views">'), 
                    n.b("\n" + i), n.b("      "), n.b(n.v(n.f("views", t, e, 0))), n.b("\n" + i), n.b("    </span>"), 
                    n.b("\n"), n.b("\n" + i), n.b('    <span class="cover-stat beicons-pre beicons-pre-thumb cover-stat-appreciations">'), 
                    n.b("\n" + i), n.b("      "), n.b(n.v(n.f("appreciations", t, e, 0))), n.b("\n" + i), 
                    n.b("    </span>"), n.b("\n"), n.b("\n" + i), n.b('    <span class="cover-stat beicons-pre beicons-pre-followers user-stats-followed">'), 
                    n.b("\n" + i), n.b("      "), n.b(n.v(n.f("followers", t, e, 0))), n.b("\n" + i), 
                    n.b("    </span>"), n.b("\n" + i), n.b("  </div> <!-- .stats-wrap -->"), n.b("\n" + i);
                }), t.pop()), n.b("</div> <!-- .mini-profile-wrap -->"), n.b("\n" + i);
            }), t.pop()), n.fl();
        },
        partials: {},
        subs: {}
    }, "", t), i = function(t, e) {
        for (var i in e) t[i] = e[i];
        return t;
    }, n = {
        "": null
    }, o = function() {
        return e.render.apply(e, arguments);
    };
    return e.ri = function(t, e, o) {
        return this.r(t, i(n, e), o);
    }, o.template = e, o;
}), define("be/View/MiniProfile", [ "jquery", "lib/gaq", "be/follow", "be/View/Dialog/Menu", "hgn!templates/miniProfile" ], function(t, e, i, n, o) {
    "use strict";
    var r = n.extend({
        mustache: o,
        template: function(e) {
            return this._super(t.extend({
                classes: [ "mini-profile", "hide-tablet", "hide-phone" ]
            }, e));
        },
        position: function() {
            var t, e, i, n = this._controller.$context.width() / 2, o = this.constructor.NUB_OFFSET - n, r = 0 > o ? "+" : "-";
            this._super(this._controller.$context, {
                my: "left top",
                at: "left" + r + Math.abs(o) + " bottom+" + this.constructor.NUB_HEIGHT,
                collision: "flipfit",
                within: this._model.get("within")
            }), t = this._controller.$context.offset(), e = this.$view.offset(), this._model.get("bottom") && e.top + this.$view.height() > this._model.get("bottom").offset().top ? (this._super(this._controller.$context, {
                my: "left" + r + Math.abs(o) + " bottom-" + this.constructor.NUB_HEIGHT,
                at: "left top",
                collision: "flipfit none",
                within: this._model.get("within")
            }), i = "bottom") : i = t.top > e.top ? "bottom" : "top", i += Math.floor(t.left) > e.left + Math.abs(o) ? "-right" : "-left", 
            this.$view.removeClass("top-right top-left bottom-right bottom-left").addClass(i);
        },
        rendered: function() {
            this._super(), i.init(this.$view), t(document.body).hasClass("logged-out") ? this.$view.on("click", ".action-follow-user", this.hide.bind(this)) : (this.$view.on("click", ".form-button-follow", function() {
                e.event("mini_profile", "follow_button", "followed_user");
            }), this.$view.on("click", ".form-button-unfollow", function() {
                e.event("mini_profile", "follow_button", "unfollowed_user");
            }));
        },
        show: function() {
            this.$view && (this.$view.removeClass("hide"), this.position()), this._super(), 
            e.event("mini_profile", "mini_profile_shown", window.location.pathname), this._controller.$context.closest(":focusable").focus();
        },
        hide: function() {
            this._super(), this.$view.one("transitionend webkitTransitionEnd", function() {
                this.$view.addClass("hide");
            }.bind(this));
        },
        _bind: t.noop,
        _unbind: t.noop
    }, {
        NUB_OFFSET: 55,
        NUB_HEIGHT: 12
    });
    return r;
}), define("be/Controller/MiniProfile", [ "jquery", "be/Controller/Dialog/Roulette", "be/View/MiniProfile" ], function(t, e, i) {
    "use strict";
    var n = e.extend({
        init: function() {
            this._super.apply(this, arguments), this._view.on("postrender", function(t) {
                this.bindHide(t);
            }.bind(this)), this.keepAlive = this.keepAlive.bind(this), this.setDeath = this.setDeath.bind(this);
        },
        bindHide: function(t) {
            t = t || this.$context, t.on({
                mouseenter: this.keepAlive,
                mouseleave: this.setDeath,
                click: this.setDeath
            });
        },
        setContext: function(t) {
            this.$context && this.$context.off({
                mouseenter: this.keepAlive,
                mouseleave: this.setDeath,
                click: this.setDeath
            }), this.$context = t, this.bindHide();
        },
        keepAlive: function() {
            clearTimeout(this.hideTimeout);
        },
        setDeath: function() {
            this.hideTimeout = setTimeout(function() {
                this._view.hide();
            }.bind(this), this.constructor.HIDE_TIMEOUT);
        }
    }, {
        VIEW_CLASS: i,
        HIDE_TIMEOUT: 500
    });
    return n;
}), define("require/css!styles/profile/mini", [], function() {}), define("be/miniprofile", [ "jquery", "lib/xhr", "nbd/trait/promise", "be/Controller/MiniProfile", "css!styles/profile/mini" ], function(t, e, i, n) {
    "use strict";
    function o(e, i, n) {
        e = e || t(document.body), c = i || t(window), l = n;
        var o, r, d;
        e.on("mouseenter", ".js-mini-profile", function() {
            var e = t(this);
            o = e.data("id"), clearTimeout(r), r = setTimeout(function() {
                e.addClass("wait"), d = s(o), d.then(function(t) {
                    e.removeClass("wait"), a(e, t);
                });
            }, u);
        }).on("mouseleave", ".js-mini-profile", function() {
            clearTimeout(r), d && (d.reject(), d = null);
        });
    }
    function r(e) {
        e = e || t(document.body), e.off("mouseenter mouseleave", ".js-mini-profile"), t.each(d, function(t, e) {
            e.destroy();
        });
    }
    function s(t) {
        s._cache = s._cache || {};
        var n, o;
        return (o = s._cache[t]) ? (n = new i(), n.resolve(o), n) : e({
            url: "/user/mini/" + t
        }).then(function(e) {
            return s._cache[t] = e, e;
        });
    }
    function a(e, i) {
        var o, r = i.user.id;
        e.parents(".popup").length ? (i.within = t(window), i.bottom = null) : (i.within = c, 
        i.bottom = l), d[r] = d[r] || new n(i), o = d[r], o.setContext(e), o.render(e), 
        o._view.show();
    }
    var l, c, u = 500, d = {};
    return {
        init: o,
        destroy: r
    };
}), require([ "jquery", "has", "be/responsive", "be/navigation", "discover/filter", "discover/content", "discover/sidebar", "discover/lib/url", "project/popup", "wip/popup", "be/miniprofile" ], function(t, e, i, n, o, r, s, a, l, c, u) {
    "use strict";
    function d() {
        t("#top-panel").addClass("loading");
    }
    function p() {
        t("#top-panel").removeClass("loading");
    }
    function h() {
        var e = t(document.body);
        l.on("prerender", d).on("postrender", p).init(), c.on("prerender", d).on("postrender", p).init(), 
        n.init(e), o.init(e), r.init(t("#content")), s.init(e), a.init("#top-panel a, .popup a"), 
        u.init(e, t("#content"), t("#infinity-footer"));
    }
    i.init(), t(h);
}), define("discover", function() {}), function(t) {
    if (t._cssWritten = t._cssWritten || [], -1 == t._cssWritten.indexOf("discover")) {
        t._cssWritten.push("discover");
        for (var e in requirejs.s.contexts) requirejs.s.contexts[e].nextTick = function(t) {
            t();
        };
        require([ "css", "require/normalize", "require" ], function(t, e, i) {
            var n = window.location.pathname.split("/");
            n.pop(), n = n.join("/") + "/";
            var o = i.toUrl("base_url").split("/");
            o.pop();
            var r = o.join("/") + "/";
            r = e.convertURIBase(r, n, "/"), "/" != r.substr(0, 1) && (r = "/" + r), t.inject(e(".fancybox-tmp iframe,.fancybox-tmp object{vertical-align:top;padding:0;margin:0;}.fancybox-wrap{position:absolute;top:0;left:0;z-index:1002;}.fancybox-outer{padding:0;margin:0;background:#f9f9f9;color:#444;text-shadow:none;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;}.fancybox-opened{z-index:1003;}.fancybox-opened .fancybox-outer{-webkit-box-shadow:0 10px 25px rgba(0,0,0,0.5);-moz-box-shadow:0 10px 25px rgba(0,0,0,0.5);box-shadow:0 10px 25px rgba(0,0,0,0.5);}.fancybox-inner{width:100%;height:100%;padding:0;margin:0;position:relative;outline:none;overflow:hidden;}.fancybox-error{color:#444;font:14px/20px \"Helvetica Neue\",Helvetica,Arial,sans-serif;margin:0;padding:10px;}.fancybox-image,.fancybox-iframe{display:block;width:100%;height:100%;border:0;padding:0;margin:0;vertical-align:top;}.fancybox-image{max-width:100%;max-height:100%;}#fancybox-loading{position:fixed;top:50%;left:50%;margin-top:-21px;margin-left:-21px;width:42px;height:42px;background:url('//a2.behance.net/img/jquery/plugins/fancybox/loading.gif?cb=1005512518');opacity:0.8;cursor:pointer;z-index:1010;}.fancybox-close,.fancybox-prev span,.fancybox-next span{background-image:url('//a2.behance.net/img/jquery/plugins/fancybox/sprite.png?cb=1005512518');}.fancybox-close{position:absolute;top:-18px;right:-18px;width:36px;height:36px;cursor:pointer;z-index:1004;}.fancybox-prev,.fancybox-next{position:absolute;top:0;width:40%;height:100%;cursor:pointer;background:transparent url('//a2.behance.net/img/jquery/blank.gif?cb=1005512518');z-index:1003;}.fancybox-prev{left:0;}.fancybox-next{right:0;}.fancybox-prev span,.fancybox-next span{position:absolute;top:50%;left:-9999px;width:36px;height:36px;margin-top:-18px;cursor:pointer;z-index:1003;}.fancybox-prev span{background-position:0 -36px;}.fancybox-next span{background-position:0 -72px;}.fancybox-prev:hover,.fancybox-next:hover{visibility:visible;}.fancybox-prev:hover span{left:20px;}.fancybox-next:hover span{left:auto;right:20px;}.fancybox-tmp{position:absolute;top:-9999px;left:-9999px;padding:0;overflow:visible;visibility:hidden;}#fancybox-overlay{position:absolute;top:0;left:0;overflow:hidden;display:none;z-index:1001;background:#000;}.fancybox-title{visibility:hidden;font:normal 13px/20px \"Helvetica Neue\",Helvetica,Arial,sans-serif;position:relative;text-shadow:none;z-index:1005;}.fancybox-opened .fancybox-title{visibility:visible;}.fancybox-title-float-wrap{position:absolute;bottom:0;right:50%;margin-bottom:-35px;z-index:1003;text-align:center;}.fancybox-title-float-wrap .child{display:inline-block;margin-right:-100%;padding:2px 20px;background:transparent;background:rgba(0,0,0,0.8);-webkit-border-radius:15px;-moz-border-radius:15px;border-radius:15px;text-shadow:0 1px 2px #222;color:#FFF;font-weight:bold;line-height:24px;white-space:nowrap;}.fancybox-title-outside-wrap{position:relative;margin-top:10px;color:#fff;}.fancybox-title-inside-wrap{margin-top:10px;}.fancybox-title-over-wrap{position:absolute;bottom:0;left:0;color:#fff;padding:10px;background:#000;background:rgba(0,0,0,.8);}.fancybox-wrap .fancybox-close,.fancybox-close,.popup-close{background:url(\"//a2.behance.net/img/network/site/sprite.png?cb=1005512518\") repeat -244px -105px;display:block;height:29px;position:absolute;right:-15px;top:-15px;width:29px;z-index:100;}.popup.mini-profile:before{width:20px;height:20px;background:#fff;box-shadow:-2px -2px 4px -2px rgba(0,0,0,0.4);content:'';position:absolute;z-index:-1;}.popup.mini-profile.top-right:before,.popup.mini-profile.top-left:before{-webkit-transform:rotate(45deg);-moz-transform:rotate(45deg);-ms-transform:rotate(45deg);-o-transform:rotate(45deg);transform:rotate(45deg);top:-8px;}.popup.mini-profile.bottom-right:before,.popup.mini-profile.bottom-left:before{-webkit-transform:rotate(-134deg);-moz-transform:rotate(-134deg);-ms-transform:rotate(-134deg);-o-transform:rotate(-134deg);transform:rotate(-134deg);bottom:-8px;}.popup.mini-profile.top-right:before,.popup.mini-profile.bottom-right:before{right:45px;}.popup.mini-profile.top-left:before,.popup.mini-profile.bottom-left:before{left:45px;}.mini-profile-wrap{width:331px;}.mini-profile-wrap .gallery-projects-wrap{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;background:#fff;border:1px solid #d9d9d9;border-radius:4px;padding:4px 3px 4px 1px;position:relative;text-decoration:none;width:361px;}.mini-profile-wrap .gallery-projects-wrap .gallery-cover-overlay{background:#0088f5;background:-webkit-gradient(linear,0% 0%,0% 100%,from(rgba(0,156,252,0.75)),to(rgba(0,116,238,0.75)));background:-webkit-linear-gradient(0% 0%,0% 100%,from(rgba(0,156,252,0.75)),to(rgba(0,116,238,0.75)));background:-moz-linear-gradient(center top,rgba(0,156,252,0.75),rgba(0,116,238,0.75));background:linear-gradient(rgba(0,156,252,0.75),rgba(0,116,238,0.75));-moz-transition:opacity 0.15s ease-in;-webkit-transition:opacity 0.15s ease-in;transition:opacity 0.15s ease-in;border:1px solid #356bca;border-radius:4px;bottom:0;color:#fff;font-size:16px;left:0;opacity:0;position:absolute;right:0;text-align:center;text-decoration:none !important;text-shadow:1px 2px 0 #0a4fb9;text-transform:uppercase;top:0;}.ie .mini-profile-wrap .gallery-projects-wrap .gallery-cover-overlay{display:none;font-weight:bold;}.mini-profile-wrap .gallery-projects-wrap:hover .gallery-cover-overlay{opacity:1;}.ie .mini-profile-wrap .gallery-projects-wrap:hover .gallery-cover-overlay{background:rgba(0,156,252,0.75);display:block;}.mini-profile-wrap .gallery-projects-wrap .gallery-cover-overlay-text{-moz-transform:translateY(-50%);-ms-transform:translateY(-50%);-webkit-transform:translateY(-50%);transform:translateY(-50%);position:absolute;top:50%;width:100%;}.mini-profile-wrap .gallery-projects-wrap .project-cover-wrap{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;background:#f3f3f3;border-left:3px solid #fff;float:left;height:90px;overflow:hidden;width:33.3%;}.mini-profile-wrap .gallery-projects-wrap .project-cover-wrap .project-cover{border-radius:0;box-shadow:none;margin:0;vertical-align:top;visibility:visible;width:100%;}.mini-profile-wrap .gallery-projects-wrap .project-cover-wrap.empty .project-cover{display:none;}.mini-profile-wrap .gallery-projects-wrap-4{width:479px;}.mini-profile-wrap .gallery-projects-wrap-4 .project-cover-wrap{width:25%;}.mini-profile-wrap .gallery-projects-wrap-4 .project-cover-wrap:nth-child(n+5){display:none;}.mini-profile-wrap .gallery-projects-wrap-2{width:242px;}.mini-profile-wrap .gallery-projects-wrap-2 .project-cover-wrap{width:50%;}.mini-profile-wrap .gallery-projects-wrap-2 .project-cover-wrap:nth-child(n+3){display:none;}.mini-profile-wrap .user-image-wrap,.mini-profile-wrap .user-image{width:35px;height:35px;}.mini-profile-wrap .user-image-wrap{background:#f3f3f3;display:block;float:left;margin:0 10px 0 0;padding:0;}.mini-profile-wrap .user-info{display:inline-block;max-width:160px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;}.mini-profile-wrap .user-name{color:#3c3c3c;display:block;font-size:14px;padding-bottom:3px;}.mini-profile-wrap .location-link{color:#6f6f6f;font-size:13px;}.mini-profile-wrap .location-link:before{margin-right:3px;}.mini-profile-wrap .follow-button-container{float:right;width:auto !important;}.mini-profile-wrap .gallery-projects-wrap{float:left;margin:0 0 10px;width:331px;}.mini-profile-wrap .gallery-projects-wrap .project-cover-wrap{height:82px;width:108px;}.mini-profile-wrap .user-stats-followed{float:inherit;}.mini-profile-wrap .user-info-container{display:inline-block;}.mini-profile-wrap .stats-wrap{color:#adadad;font-size:13px;font-weight:bold;margin-bottom:-2px;}.mini-profile-wrap .cover-stat{margin-right:10px;}.mini-profile-wrap .cover-stat:before{margin-right:2px;}", r, n));
        });
        for (var e in requirejs.s.contexts) requirejs.s.contexts[e].nextTick = requirejs.nextTick;
    }
}(this);